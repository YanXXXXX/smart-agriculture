{"version":3,"file":"jessibuca-pro-talk.js","sources":["../../src/utils/emitter.js","../../src/constant/index.js","../../node_modules/screenfull/dist/screenfull.js","../../src/utils/index.js","../../src/utils/resampler.js","../../src/utils/arraybuffer.js","../../src/utils/g711.js","../../src/utils/debug.js","../../src/utils/events.js","../../src/talk/index.js","../../src/jessibuca-talk.js"],"sourcesContent":["export default class Emitter {\n    on(name, fn, ctx) {\n        const e = this.e || (this.e = {});\n        (e[name] || (e[name] = [])).push({fn, ctx});\n        return this;\n    }\n\n    once(name, fn, ctx) {\n        const self = this;\n\n        function listener(...args) {\n            self.off(name, listener);\n            fn.apply(ctx, args);\n        }\n\n        listener._ = fn;\n        return this.on(name, listener, ctx);\n    }\n\n    emit(name, ...data) {\n        const evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n        for (let i = 0; i < evtArr.length; i += 1) {\n            evtArr[i].fn.apply(evtArr[i].ctx, data);\n        }\n        return this;\n    }\n\n    off(name, callback) {\n        const e = this.e || (this.e = {});\n\n        if (!name) {\n            Object.keys(e).forEach((key) => {\n                delete e[key];\n            })\n            delete this.e\n            return;\n        }\n\n        const evts = e[name];\n        const liveEvents = [];\n        if (evts && callback) {\n            for (let i = 0, len = evts.length; i < len; i += 1) {\n                if (evts[i].fn !== callback && evts[i].fn._ !== callback) liveEvents.push(evts[i]);\n            }\n        }\n        if (liveEvents.length) {\n            e[name] = liveEvents;\n        } else {\n            delete e[name];\n        }\n        return this;\n    }\n}\n","// 播放协议\nexport const PLAYER_PLAY_PROTOCOL = {\n    websocket: 1,\n    fetch: 2,\n    hls: 3,\n    webrtc: 4,\n    webTransport: 5,\n    aliyunRtc: 6,\n    ts: 7\n}\n\nexport const PLAYER_PLAY_PROTOCOL_LIST = [\n    '', \"websocket\", \"fetch\", \"hls\", \"webrtc\", \"webTransport\", \"aliyunRtc\", \"ts\"\n]\n\nexport const PLAYER_STREAM_TYPE = {\n    fetch: 'fetch',\n    hls: 'hls',\n    websocket: 'websocket',\n    webrtc: 'webrtc',\n    webTransport: 'webTransport',\n    worker: 'worker',\n    aliyunRtc: 'aliyunRtc',\n}\n\n// 播放\nexport const PLAY_TYPE = {\n    player: \"player\",\n    playerAudio: 'playerAudio',\n    playbackTF: 'playbackTF',\n}\n\nexport const FILE_SUFFIX = {\n    mp4: 'mp4',\n    webm: 'webm',\n    flv: 'flv',\n    mov: 'mov'\n};\n\nexport const DEMUX_TYPE = {\n    flv: 'flv',\n    m7s: 'm7s',\n    hls: 'hls',\n    webrtc: 'webrtc',\n    webTransport: 'webTransport',\n    nakedFlow: 'nakedFlow',\n    fmp4: 'fmp4',\n    mpeg4: 'mpeg4',\n    aliyunRtc: 'aliyunRtc',\n    ts: 'ts',\n}\n\nexport const DEMUX_TYPE_SHOW = {\n    flv: 'FLV',\n    m7s: 'M7S',\n    hls: 'HLS',\n    fmp4: 'FMP4',\n    mpeg4: 'MPEG4',\n    webrtc: 'Webrtc',\n    webTransport: 'WebTransport',\n    nakedFlow: '裸流',\n    aliyunRtc: 'AliyunRtc',\n    ts: 'TS'\n}\n\nexport const DECODE_TYPE = {\n    mse: 'mse',\n    wcs: 'wcs',\n    offscreen: 'offscreen',\n    wasm: 'wasm',\n    simd: 'simd',\n    mt: 'mt',\n    webrtc: 'webrtc',\n    hls: 'hls',\n    aliyunRtc: 'aliyunRtc',\n}\n\nexport const RENDER_TYPE = {\n    canvas: 'canvas',\n    video: 'video'\n}\n\nexport const DEBUG_LEVEL = {\n    debug: 'debug',\n    warn: 'warn',\n}\n\nexport const PTZ_ACTIVE_EVENT_TYPE = {\n    click: 'click',\n    mouseDownAndUp: 'mouseDownAndUp',\n}\n\nexport const PLAYBACK_CONTROL_TYPE = {\n    normal: 'normal', // default normal 24H\n    simple: 'simple',\n}\n\n\nexport const PLAYER_NAME = 'JessibucaPro'\n\nexport const DEFAULT_PLAYBACK_FORWARD_MAX_RATE_DECODE_IFRAME = 4; // default playback forward max rate decode iframe\n\nexport const MEDIA_SOURCE_UPDATE_END_TIMEOUT = 10 * 1000\n\nexport const DOCUMENT_ONE_SECOND_BUFFER_LENGTH = 60; // default one second buffer length (fps is 25 - 30)\n\nexport const MSE_MAX_DELAY_TIME = 5;// 单位 秒\n\nexport const MSE_DELAY_INCREASE_TIME = 3;// 单位 秒\n\nexport const PLAYER_RESIZE_TIME = 500;\n\nexport const PLAYER_SCROLL_TIME = 200;\n\nexport const FLV_BUFFER_LARGE_SIZE = 1024 * 1024; // 1024kb = 1mb\n\nexport const WASM_DECODE_MAX_DIFF_TIMESTAMP = 1100; // 1s\n\nexport const AUDIO_CHANNEL_MAX = 2; // max support 2 channel\n\nexport const FRAME_TS_MAX_DIFF = 1000 * 60 * 60; // 1 hour\n\nexport const SIMD_H264_DECODE_MAX_WIDTH = 4080;\n\nexport const VIDEO_PAYLOAD_MIN_SIZE = 12; // video payload min size: 12 byte\n\nexport const CRYPTO_KEY_URL_PATH = '/crypto/'\n\nexport const CONTAINER_DATA_SET_KEY = 'jbprov'\n\nexport const VIDEO_ELEMENT_RETRY_PLAY_MAX_TIME = 3 // video element retry play max time\n\nexport const URL_OBJECT_CLEAR_TIME = 10 * 1000; // url object clear time\n\nexport const DEMUX_LOOP_INTERVAL_TIMES = 20; // 20ms\n\nexport const ERROR_MESSAGE_TIPS = {\n    webglAlignmentError: 'Webgl 渲染失败',\n    webglContextLostError: 'webgl 上下文丢失',\n    mediaSourceH265NotSupport: '不支持硬解码H265',\n    mediaSourceFull: '缓冲区已满',\n    mediaSourceAppendBufferError: '初始化解码器失败',\n    mseSourceBufferError: '解码失败',\n    mseAddSourceBufferError: '初始化解码器失败',\n    mediaSourceDecoderConfigurationError: '初始化解码器失败',\n    mediaSourceTsIsMaxDiff: '流异常',\n    mseWidthOrHeightChange: '流异常',\n    mediaSourceAudioG711NotSupport: '硬解码不支持G711a/u音频格式',\n    mediaSourceUseCanvasRenderPlayFailed: 'MediaSource解码使用canvas渲染失败',\n    webcodecsH265NotSupport: '不支持硬解码H265',\n    webcodecsUnsupportedConfigurationError: '初始化解码器失败',\n    webcodecsDecodeConfigureError: '初始化解码器失败',\n    webcodecsDecodeError: '解码失败',\n    wcsWidthOrHeightChange: '解码失败',\n    wasmDecodeError: '解码失败',\n    simdDecodeError: '解码失败',\n    wasmWidthOrHeightChange: '流异常',\n    wasmUseVideoRenderError: 'video自动渲染失败',\n    videoElementPlayingFailed: 'video自动渲染失败',\n    simdH264DecodeVideoWidthIsTooLarge: '不支持该分辨率的视频',\n    networkDelayTimeout: '网络超时重播失败',\n    fetchError: '请求失败',\n    streamEnd: '请求结束',\n    websocketError: '请求失败',\n    webrtcError: '请求失败',\n    hlsError: '请求失败',\n    decoderWorkerInitError: '初始化worker失败',\n    videoElementPlayingFailedForWebrtc: 'video自动渲染失败',\n    videoInfoError: '解析视频分辨率失败',\n    webrtcStreamH265: 'webrtc不支持H265',\n    delayTimeout: '播放超时重播失败',\n    loadingTimeout: '加载超时重播失败',\n    loadingTimeoutRetryEnd: '加载超时重播失败',\n    delayTimeoutRetryEnd: '播放超时重播失败',\n}\n\n\nexport const DEFAULT_JESSIBUCA_OPTIONS = {\n    url: '',\n    playbackConfig: {},\n    fullscreenWatermarkConfig: {}, // 全屏水印设置。\n    playType: PLAY_TYPE.player,\n    playbackForwardMaxRateDecodeIFrame: DEFAULT_PLAYBACK_FORWARD_MAX_RATE_DECODE_IFRAME,\n    playOptions: {},\n    isLive: true,\n    isMulti: true, // 默认就是显示uuid\n    isM7sCrypto: false,\n    supportHls265:false,\n    playFailedUseLastFrameShow: true, // 播放失败(异常原因)后，使用最后一帧显示。\n\n    playFailedAndPausedShowMessage: false, // 播放失败并暂停，是否显示提示信息。\n    pauseAndNextPlayUseLastFrameShow: false,\n    widthOrHeightChangeReplayDelayTime: 0,// 单位秒，宽高变化重新播放延迟时间\n    isUseNewFullscreenWatermark:false,\n}\n\n// default player options\nexport const DEFAULT_PLAYER_OPTIONS = {\n    playType: PLAY_TYPE.player, // inner\n    container: '',//\n    videoBuffer: 1 * 1000, // 1* 1000ms == 1 second\n    videoBufferDelay: 1 * 1000,// 1 * 1000ms\n    networkDelay: 10 * 1000, //  10 * 1000ms\n    isResize: true, //\n    isFullResize: false, // full resize\n    isFlv: false, // flv\n    isHls: false, // hls（inner）\n    isFmp4: false, // fmp4,\n    isFmp4Private: false,// 是否是fmp4私有协议\n    isWebrtc: false,// webrtc (inner)\n    isWebrtcForZLM: false,// webrtc for ZLM\n    isWebrtcForSRS: false,// webrtc for SRS\n    isWebrtcForOthers: false, // webrtc for others\n    isNakedFlow: false,// 是否是裸流（264、265）\n    isMpeg4: false,// 是否是mpeg4\n    isAliyunRtc: false,// 是否是阿里云rtc\n    isTs: false,// 是否是ts流\n    debug: false, // debug log\n    debugLevel: DEBUG_LEVEL.warn, // log level\n    debugUuid: '', // debug uuid (inner)\n    isMulti: true,// 是否多实例播放(配置log用的)\n    multiIndex: -1,// 多实例播放的index\n    hotKey: false, // 快捷键\n    loadingTimeout: 10, // loading timeout 单位秒\n    heartTimeout: 10,  // heart timeout 单位秒\n    timeout: 10, // timeout 单位秒\n    pageVisibilityHiddenTimeout: 5 * 60, //   5 * 60  = 5 minute\n    loadingTimeoutReplay: true, // loading timeout replay\n    heartTimeoutReplay: true,// heart timeout replay。\n    loadingTimeoutReplayTimes: 3, // loading timeout replay fail times\n    heartTimeoutReplayTimes: 3, // heart timeout replay fail times\n    heartTimeoutReplayUseLastFrameShow: true, // heart timeout replay use last frame\n    replayUseLastFrameShow: true,// replay use last frame\n    replayShowLoadingIcon: false,// replay show loading icon\n    supportDblclickFullscreen: false,\n    showBandwidth: false, //\n    showPerformance: false, // 是否显示性能面板\n    mseCorrectTimeDuration: 20,// mse correct time duration 20ms\n    mseCorrectAudioTimeDuration: 20,// mse correct audio time duration 20ms\n    keepScreenOn: true, // keep screen on\n    isNotMute: false,\n    hasAudio: true,\n    hasVideo: true,\n    operateBtns: {\n        fullscreen: false,\n        screenshot: false,\n        play: false,\n        audio: false,\n        record: false,\n        ptz: false,\n        quality: false,\n        zoom: false,\n        close: false,\n        scale: false,\n        performance: false,\n        logSave: false,\n        aiFace: false,\n        aiObject: false,\n        aiOcclusion: false,\n        fullscreenFn: null,\n        fullscreenExitFn: null,\n        screenshotFn: null,\n        playFn: null,\n        pauseFn: null,\n        recordFn: null,\n        recordStopFn: null,\n    },\n    extendOperateBtns: [],\n    contextmenuBtns: [],\n    watermarkConfig: {}, // 局部水印设置\n    controlAutoHide: false,\n    hasControl: false, // inner params\n    loadingIcon: true, // is show loading icon\n    loadingIconStyle: {},// loading icon style\n    loadingText: '',\n    background: '',\n    backgroundLoadingShow: true, // 加载过程中是否显示背景\n    loadingBackground: '', // 内部参数 重新播放过程中，显示播放失败前的最后一帧数据。\n    loadingBackgroundWidth: 0, // 内部参数 重新播放过程中，显示播放失败前的最后一帧数据 width。\n    loadingBackgroundHeight: 0, // 内部参数 重新播放过程中，显示播放失败前的最后一帧数据 height。\n    decoder: 'decoder-pro.js',\n    decoderAudio: 'decoder-pro-audio.js',\n    decoderHard: 'decoder-pro-hard.js',  // 硬解码\n    decoderHardNotWasm: 'decoder-pro-hard-not-wasm.js', // 硬解码\n    wasmMp4RecorderDecoder: 'jessibuca-pro-mp4-recorder-decoder.js', // wasm mp4 recorder decoder\n    decoderWASM: '',\n    isDecoderUseCDN: false,\n    url: '',// inner\n    rotate: 0,\n    mirrorRotate: 'none', // 镜像xx\n    aspectRatio: 'default', // 比例支持 4:3, 16:9,\n    playbackConfig: {\n        playList: [], // {start:xx,end:xx,more:xx}\n        fps: '', // fps值\n        showControl: true,\n        controlType: PLAYBACK_CONTROL_TYPE.normal, //\n        duration: 0, // duration 持续时间。\n        startTime: '', // 开始时间\n        showRateBtn: false,\n        rateConfig: [],// 播放倍率切换，支持[{label:'正常',value:1},{label:'2倍',value:2}]\n        showPrecision: '',// 初始化显示精度 'oneHour', 'halfHour', 'tenMin', 'fiveMin'。\n        showPrecisionBtn: true,// 是否显示精度切换按钮\n        isCacheBeforeDecodeForFpsRender: false, // rfs渲染时，是否在解码前缓存数据\n        uiUsePlaybackPause: false, // ui上面是否使用 playbackPause 方法\n        isPlaybackPauseClearCache: true,// playbackPause是否清除缓存数据\n        isUseFpsRender: false, // 是否使用固定的fps渲染，播放器会动态计算流的fps\n        isUseLocalCalculateTime: false, // 是否使用本地时间来计算playback时间\n        localOneFrameTimestamp: 40, // 一帧 40ms, isUseLocalCalculateTime 为 true 生效。\n        supportWheel: false,// 是否支持滚动轴切换精度。\n        useWCS: false,// 是否使用wcs解码\n        useMSE: false,// 是否使用mse解码\n    },\n    qualityConfig: [], // 支持 ['高清','超清','4K']\n    defaultStreamQuality: '',\n    scaleConfig: ['拉伸', '缩放', '正常'],\n    // text: '',\n    forceNoOffscreen: true, // 默认是不采用\n    hiddenAutoPause: false,\n    protocol: PLAYER_PLAY_PROTOCOL.fetch, // 内部参数\n    demuxType: DEMUX_TYPE.flv, // 内部参数\n    useWasm: false,//wasm 解码 （inner）默认\n    useMSE: false, // mse 解码\n    useWCS: false, // wcs 解码\n    useSIMD: true, // pro 默认优先使用wasm simd解码，不支持则使用wasm解码\n    useMThreading: false,// 是否使用多线程解码\n    wcsUseVideoRender: true, // wcs 是否使用 video 渲染\n    wcsUseWebgl2Render: true,// canvas 模式下 wcs 是否使用webgl2渲染\n    wasmUseVideoRender: true, // wasm 用video标签渲染\n    mseUseCanvasRender: false,//mse 用canvas标签渲染\n    hlsUseCanvasRender: false,// hls 用canvas标签渲染\n    webrtcUseCanvasRender: false,// webrtc 用canvas标签渲染 待定\n\n    useOffscreen: false, //  内部参数（废弃）\n    useWebGPU: false, //  是否使用webgpu引擎\n    mseDecodeErrorReplay: true,// mse 解码失败重新播放\n    wcsDecodeErrorReplay: true,// wcs 解码失败重新播放\n    wasmDecodeErrorReplay: true, // 解码失败重新播放。\n    simdDecodeErrorReplay: true,// simd 解码失败重新播放。\n    simdDecodeErrorReplayType: DECODE_TYPE.wasm, // simd 解码失败重新播放类型: wasm 或者 simd\n    autoWasm: true, // 自动降级到 wasm 模式\n    decoderErrorAutoWasm: true, // 解码失败自动降级到 wasm 模式\n    hardDecodingNotSupportAutoWasm: true, // 硬解码不支持自动降级到 wasm 模式\n    webglAlignmentErrorReplay: true, // webgl对齐失败重新播放。\n    webglContextLostErrorReplay: true, // webgl context lost 重新播放。\n    openWebglAlignment: false,//  https://github.com/langhuihui/jessibuca/issues/152\n    syncAudioAndVideo: false,// 音视频同步\n    syncAudioAndVideoDiff: 500, // ms\n    // playback config\n    playbackDelayTime: 1000, // TF卡流播放延迟时间  Inner\n    playbackFps: 25, // Inner\n    playbackForwardMaxRateDecodeIFrame: DEFAULT_PLAYBACK_FORWARD_MAX_RATE_DECODE_IFRAME,// max rate render i frame , Inner\n    playbackCurrentTimeMove: true, // Inner 录像流数据的当前时间是否跟着播放时长移动\n\n    useVideoRender: true, // 使用video标签渲染\n    useCanvasRender: false, // 使用canvas渲染\n    networkDelayTimeoutReplay: false, // 网络延迟重连\n    recordType: FILE_SUFFIX.mp4,\n    checkFirstIFrame: true, // 检查第一帧是否是I帧\n    nakedFlowFps: 25, // 裸流fps\n    audioEngine: null, // 音频引擎\n    isShowRecordingUI: true, // 是否显示录制中UI\n    isShowZoomingUI: true, // 是否显示缩放中\n    useFaceDetector: false, // 使用人脸检测\n    useObjectDetector: false, // 使用物体检测\n    useImageDetector: false,// 使用图片检测\n    useOcclusionDetector: false,// 使用遮挡检测\n    ptzPositionConfig: {}, // position config\n    ptzShowType: 'vertical', // vertical 垂直,level 水平\n    ptzClickType: PTZ_ACTIVE_EVENT_TYPE.click, // PTZ 点击类型\n    ptzStopEmitDelay: 0.3,// ptz停止后，停止发送指令的延迟时间(秒)\n    ptzZoomShow: false,// ptz操作是否显示放大缩小操作\n    ptzApertureShow: false, // ptz操作是否显示光圈操作\n    ptzFocusShow: false, // ptz操作是否显示聚焦操作\n    ptzMoreArrowShow: false,// ptz操作是否显示更多箭头\n    ptzCruiseShow: false, // ptz操作是否显示巡航操作\n    ptzFogShow: false,// ptz操作是否显示透雾操作\n    ptzWiperShow: false,// ptz操作是否显示雨刷操作\n    ptzSupportDraggable: false,// ptz是否支持拖拽\n    // 微信安卓音频播放块大小\n    // 计算规则 48000 * ms / 1000 = size,\n    // 48000 * 200 /1000 = 9600  播放时长200ms\n    // 48000 * 175 /1000 = 8400  播放时长175ms\n    // 48000 * 150 /1000 = 7200  播放时长150ms\n    // 48000 * 125 /1000 = 6000  播放时长125ms\n    // 48000 * 100 /1000 = 4800  播放时长100ms default\n    // 48000 * 50 /1000 = 2400  播放时长50ms\n    // 48000 * 25 /1000 = 1200  播放时长25ms\n    // 48000 * 10 /1000 = 480  播放时长10ms\n    weiXinInAndroidAudioBufferSize: 4800,\n    isM7sCrypto: false,// 是否是m7s加密,\n    m7sCryptoAudio: false,// m7s音频是否加密\n    isSm4Crypto: false,// 是否是sm4加密\n    isXorCrypto: false,// 是否是xor加密\n    sm4CryptoKey: '',// sm4加密key\n    m7sCryptoKey: '',\n    xorCryptoKey: '', // xor加密key\n    cryptoKey: '',// 加密key\n    cryptoIV: '',// 加密iv\n    cryptoKeyUrl: '',// 加密key获取域名(for m7s)\n    autoResize: false,// 自动调整大小 inner\n    useWebFullScreen: false,// 使用web全屏(旋转播放器90度)(只会在移动端生效)\n    ptsMaxDiff: 60 * 60, //单位(秒)，默认值是1H\n    aiFaceDetectLevel: 2,// 人脸检测等级(1-5)\n    aiFaceDetectWidth: 240, // 人脸检测宽度（inner）\n    aiFaceDetectShowRect: true, // 人脸检测显示框子\n    aiFaceDetectInterval: 1000, // 人脸检测时间间隔 ms\n    aiFaceDetectRectConfig: {},// 人脸检测框子配置\n    aiObjectDetectLevel: 2,// 物体检测等级(1-5)\n    aiObjectDetectWidth: 240, // 物体检测宽度（inner）\n    aiObjectDetectShowRect: true,// 物体检测显示框子\n    aiObjectDetectInterval: 1000, // 物品检测时间间隔 ms\n    aiObjectDetectRectConfig: {},// 物体检测框子配置\n    aiOcclusionDetectInterval: 1000,// 遮挡检测时间间隔 ms\n    aiImageDetectDrop: false,// 图片检测是否丢弃不渲染\n    aiImageDetectActive: false,// 图片检测是否激活\n    videoRenderSupportScale: true, // video渲染支持Scale\n    mediaSourceTsIsMaxDiffReplay: true, // 当ts间隔超过最大值之后，重新播放\n    controlHtml: '',// 自定义控制栏Html\n    isH265: false,// 是否是h265,\n    isWebrtcH265: false,// 是否是webrtc h265\n    supportLockScreenPlayAudio: true,// 是否支持锁屏播放音频（mobile,ipad 端）\n    supportHls265: false,// 是否支持hls265\n    isEmitSEI: false,// 是否发送sei\n    pauseAndNextPlayUseLastFrameShow: false, // pause->play 使用最后一帧显示\n    demuxUseWorker: true,// demux 使用worker 解析 其中，\n    playFailedAndReplay: true, // 播放失败(异常原因)后，重新播放。(统一配置参数)\n    showMessageConfig: ERROR_MESSAGE_TIPS, // 播放失败提示信息配置\n    videoElementPlayingFailedReplay: true,// video 播放失败，主要是自动播放的时候，video不允许播放的情况下，降级会canvas。\n    mp4RecordUseWasm: true, // mp4 record 使用 wasm\n    //  for mse\n    mseAutoCleanupSourceBuffer: true, // 是否自动清理sourceBuffer（inner）\n    mseAutoCleanupMaxBackwardDuration: 30, // 30s （inner）\n    mseAutoCleanupMinBackwardDuration: 10, // 10s（inner）\n\n    // replay\n    widthOrHeightChangeReplay: true, // 宽高变化重新播放\n    simdH264DecodeVideoWidthIsTooLargeReplay: true, // simd h264 解码视频宽度过大重新播放\n    mediaSourceAudioG711NotSupportReplay: true, // mediaSource audio g711 not support replay (inner)\n    mediaSourceAudioInitTimeoutReplay: true, // mediaSource audio init timeout replay  (inner)\n    mediaSourceUseCanvasRenderPlayFailedReplay: true, // mediaSource 解码使用canvas渲染失败重新播放\n    mediaSourceUseCanvasRenderPlayFailedReplayType: RENDER_TYPE.video, // mediaSource 解码使用canvas渲染失败重新播放类型:mse+video,或者wasm+canvas\n    widthOrHeightChangeReplayDelayTime: 0,// 单位秒，宽高变化重新播放延迟时间\n    // 幽灵水印设置\n    ghostWatermarkConfig: {\n        on: 5, // 幽灵模式开启时间\n        off: 5, // 幽灵模式关闭时间\n        content: '', // 幽灵水印内容\n        fontSize: 12, // 幽灵水印字体大小\n        color: 'white', // 幽灵水印颜色\n        opacity: 0.15, // 幽灵水印透明度\n        speed: 0.2, // 幽灵水印速度\n    },\n\n    //  动态水印设置\n    dynamicWatermarkConfig: {\n        content: '', // 动态水印内容\n        speed: 0.2, // 动态水印速度\n        fontSize: 12, // 动态水印字体大小\n        color: 'white', // 动态水印颜色\n        opacity: 0.15, // 动态水印透明度\n    },\n\n    // 遇上时间戳相同的流，直接扔掉整个gop数据。\n    isDropSameTimestampGop: false,\n    mseDecodeAudio: false, //  mse 解码音频数据(支持aac/mp3)\n\n    nakedFlowH265DemuxUseNew: true,// 裸流h265解封装用new的\n\n    //自定义扩展dom\n    extendDomConfig: {\n        html: '',\n        showBeforePlay: false,//是否在播放前显示\n        showAfterLoading: true,//是否在加载后显示\n    },\n\n    disableContextmenu: false, // 是否禁用右键菜单\n    websocket1006ErrorReplay: false, // ws1006错误重播\n\n    websocket1006ErrorReplayDelayTime: 0,//ws1006错误延迟重播时间\n    mseDecoderUseWorker: false,\n    openMemoryLog: false, // 是否打开内存日志\n    mainThreadFetchUseWorker: true, // 主线程解码的时候fetch 是否通过单独的 worker fetch\n    playFailedAndPausedShowPlayBtn: true, // 播放失败并暂停，是否显示播放按钮\n    mseCorrectionTimestamp: true,// mse解码是否纠正时间戳。\n}\n\nexport const WORKER_CMD_TYPE = {\n    init: 'init',\n    initVideo: 'initVideo',\n    render: 'render',\n    playAudio: 'playAudio',\n    initAudio: 'initAudio',\n    kBps: 'kBps',\n    decode: 'decode',\n    audioCode: 'audioCode',\n    audioNalu: 'audioNalu',\n    audioAACSequenceHeader: 'audioAACSequenceHeader',\n    videoCode: 'videoCode',\n    videoCodec: 'videoCodec',\n    videoNalu: 'videoNalu',\n    videoPayload: 'videoPayload',\n    audioPayload: 'audioPayload',\n    wasmError: 'wasmError',\n    workerFetch: 'workerFetch',\n    iframeIntervalTs: 'iframeIntervalTs',\n    isDropping: 'isDropping',\n    workerEnd: 'workerEnd',\n    networkDelay: 'networkDelay',\n    playbackStreamVideoFps: 'playbackStreamVideoFps',\n    wasmDecodeVideoNoResponseError: 'wasmDecodeVideoNoResponseError',\n    wasmWidthOrHeightChange: 'wasmWidthOrHeightChange',\n    simdDecodeError: 'simdDecodeError',\n    simdH264DecodeVideoWidthIsTooLarge: 'simdH264DecodeVideoWidthIsTooLarge',\n    websocketOpen: 'websocketOpen',\n    closeEnd: 'closeEnd',\n    tempStream: 'tempStream',\n    videoSEI: 'videoSEI',\n    //  for flv recorder\n    flvScriptData: 'flvScriptData',\n    aacSequenceHeader: 'aacSequenceHeader',\n    videoSequenceHeader: 'videoSequenceHeader',\n    flvBufferData: 'flvBufferData',\n    checkFirstIFrame: 'checkFirstIFrame',\n\n    // for mse worker\n    mseHandle: 'mseHandle',\n    mseFirstRenderTime: 'mseFirstRenderTime',\n    mseError: 'mseError',\n}\n\nexport const WASM_ERROR = {\n    invalidNalUnitSize: 'Invalid NAL unit size',\n    // errorSplittingTheInputIntoNALUnits: 'Error splitting the input into NAL units'\n}\n\nexport const MEDIA_TYPE = {\n    audio: 1,\n    video: 2\n}\n\nexport const FLV_MEDIA_TYPE = {\n    audio: 8,\n    video: 9,\n    scriptData: 18\n}\n\nexport const WORKER_SEND_TYPE = {\n    init: 'init',\n    decode: 'decode',\n    audioDecode: 'audioDecode',\n    videoDecode: 'videoDecode',\n    initAudioCodec: 'initAudioCodec',\n    initVideoCodec: 'initVideoCodec',\n    close: 'close',\n    updateConfig: 'updateConfig',\n    resetDecode: 'resetDecode',\n    clearBuffer: 'clearBuffer',\n    resetAudioDecode: 'resetAudioDecode',\n    resetVideoDecode: 'resetVideoDecode',\n    fetchStream: 'fetchStream',\n    sendWsMessage: 'sendWsMessage',\n\n    // for mse worker\n    mseUpdateVideoTimestamp: 'mseUpdateVideoTimestamp',\n}\n\n\nexport const WORKER_FETCH_CMD_TYPE = {\n    fetch: 'fetch',\n    destroy: 'destroy',\n    destroyEnd: 'destroyEnd',\n    buffer: 'buffer',\n    fetchError: 'fetchError',\n    fetchClose: 'fetchClose',\n    fetchSuccess: 'fetchSuccess',\n}\n\n// inner events\nexport const EVENTS = {\n    fullscreen: 'fullscreen$2',\n    webFullscreen: 'webFullscreen',\n    decoderWorkerInit: 'decoderWorkerInit',\n    play: 'play',\n    playing: 'playing',\n    pause: 'pause',\n    mute: 'mute',\n    load: 'load',\n    loading: 'loading',\n    zooming: 'zooming',\n    videoInfo: 'videoInfo',\n    timeUpdate: 'timeUpdate',\n    audioInfo: \"audioInfo\",\n    log: 'log',\n    error: \"error\",\n    kBps: 'kBps',\n    timeout: 'timeout',\n    delayTimeout: 'delayTimeout',\n    delayTimeoutRetryEnd: 'delayTimeoutRetryEnd',\n    loadingTimeout: 'loadingTimeout',\n    loadingTimeoutRetryEnd: 'loadingTimeoutRetryEnd',\n    stats: 'stats',\n    performance: \"performance\",\n    videoSmooth: 'videoSmooth',\n    faceDetectActive: 'faceDetectActive',\n    objectDetectActive: 'objectDetectActive',\n    occlusionDetectActive: 'occlusionDetectActive',\n    imageDetectActive: 'imageDetectActive',\n    // record\n    record: 'record',\n    recording: 'recording',\n    recordingTimestamp: 'recordingTimestamp',\n    recordStart: 'recordStart',\n    recordEnd: 'recordEnd',\n    recordCreateError: 'recordCreateError',\n    recordBlob: 'recordBlob',\n\n    buffer: 'buffer',\n    videoFrame: 'videoFrame',\n    videoSEI: 'videoSEI',\n    start: 'start',\n    metadata: 'metadata',\n    resize: 'resize',\n    volumechange: 'volumechange',\n    destroy: 'destroy',\n    beforeDestroy: 'beforeDestroy',\n\n    // stream\n    streamEnd: 'streamEnd',\n    streamRate: 'streamRate',\n    streamAbps: 'streamAbps',\n    streamVbps: 'streamVbps',\n    streamDts: 'streamDts',\n    streamSuccess: 'streamSuccess',\n    streamMessage: 'streamMessage',\n    streamError: 'streamError',\n    streamStats: 'streamStats',\n\n    // MSE\n    mseSourceOpen: 'mseSourceOpen',\n    mseSourceClose: 'mseSourceClose',\n    mseSourceended: 'mseSourceended',\n    mseSourceStartStreaming: 'mseSourceStartStreaming',\n    mseSourceEndStreaming: 'mseSourceEndStreaming',\n    mseSourceBufferError: 'mseSourceBufferError',\n    mseAddSourceBufferError: 'mseAddSourceBufferError',\n    mseSourceBufferBusy: 'mseSourceBufferBusy',\n    mseSourceBufferFull: 'mseSourceBufferFull',\n    // VIDEO\n    videoWaiting: 'videoWaiting',\n    videoTimeUpdate: 'videoTimeUpdate',\n    videoSyncAudio: 'videoSyncAudio',\n    //\n    playToRenderTimes: 'playToRenderTimes',\n    playbackTime: 'playbackTime',\n    playbackTimestamp: 'playbackTimestamp',\n    playbackTimeScroll: 'playbackTimeScroll',\n    playbackPrecision: 'playbackPrecision',// inner\n    playbackShowPrecisionChange: 'playbackShowPrecisionChange',\n    playbackJustTime: 'playbackJustTime',\n    playbackStats: 'playbackStats',\n    playbackSeek: 'playbackSeek',\n    playbackPause: 'playbackPause',\n    playbackPauseOrResume: 'playbackPauseOrResume',\n    playbackRateChange: 'playbackRateChange',\n    playbackPreRateChange: 'playbackPreRateChange',\n\n    ptz: 'ptz',\n    streamQualityChange: 'streamQualityChange',\n    visibilityChange: \"visibilityChange\",\n    netBuf: 'netBuf',\n    close: 'close',\n    networkDelayTimeout: 'networkDelayTimeout',\n    togglePerformancePanel: 'togglePerformancePanel',\n    viewResizeChange: 'viewResizeChange',\n    flvDemuxBufferSizeTooLarge: 'flvDemuxBufferSizeTooLarge',\n    // talk\n    talkGetUserMediaSuccess: 'talkGetUserMediaSuccess',\n    talkGetUserMediaFail: 'talkGetUserMediaFail',\n    talkGetUserMediaTimeout: 'talkGetUserMediaTimeout',\n    talkStreamStart: 'talkStreamStart',\n    talkStreamOpen: 'talkStreamOpen',\n    talkStreamClose: 'talkStreamClose',\n    talkStreamError: 'talkStreamError',\n    talkStreamInactive: 'talkStreamInactive',\n\n    webrtcDisconnect: 'webrtcDisconnect',\n    webrtcFailed: 'webrtcFailed',\n    webrtcClosed: 'webrtcClosed',\n    webrtcOnConnectionStateChange: 'webrtcOnConnectionStateChange',\n    webrtcOnIceConnectionStateChange: 'webrtcOnIceConnectionStateChange',\n    // crash\n    crashLog: 'crashLog',\n\n    // dom\n    focus: 'focus',\n    blur: 'blur',\n    visibilityHiddenTimeout: 'visibilityHiddenTimeout',\n\n    // websocket\n    websocketOpen: 'websocketOpen',\n    websocketClose: 'websocketClose',\n    websocketError: 'websocketError',\n    websocketMessage: 'websocketMessage',\n\n    // ai\n    aiObjectDetectorInfo: 'aiObjectDetectorInfo',\n    aiFaceDetectorInfo: 'aiFaceDetectorInfo',\n    aiOcclusionDetectResult: 'aiOcclusionDetectResult',\n    aiImageDetectResult: 'aiImageDetectResult',\n\n    // 异常暂停\n    playFailedAndPaused: 'playFailedAndPaused',\n\n    // audio\n    audioResumeState: 'audioResumeState',\n\n    // webrtc\n    webrtcStreamH265: 'webrtcStreamH265',\n\n    // flv\n    flvMetaData: 'flvMetaData',\n\n    // talk\n    talkFailedAndStop: 'talkFailedAndStop',\n\n    removeLoadingBgImage: 'removeLoadingBgImage',\n\n    memoryLog: 'memoryLog',\n\n    downloadMemoryLog: 'downloadMemoryLog',\n\n    pressureObserverCpu: 'pressureObserverCpu',\n\n    currentPts: 'currentPts',\n}\n\n// jbPro events\nexport const JESSIBUCA_EVENTS = {\n    load: EVENTS.load,\n    timeUpdate: EVENTS.timeUpdate,\n    videoInfo: EVENTS.videoInfo,\n    audioInfo: EVENTS.audioInfo,\n    error: EVENTS.error,\n    kBps: EVENTS.kBps,\n    start: EVENTS.start,\n    timeout: EVENTS.timeout,\n    loadingTimeout: EVENTS.loadingTimeout,\n    loadingTimeoutRetryEnd: EVENTS.loadingTimeoutRetryEnd,\n    delayTimeout: EVENTS.delayTimeout,\n    delayTimeoutRetryEnd: EVENTS.delayTimeoutRetryEnd,\n    fullscreen: 'fullscreen',\n    webFullscreen: EVENTS.webFullscreen,\n    play: EVENTS.play,\n    pause: EVENTS.pause,\n    mute: EVENTS.mute,\n    stats: EVENTS.stats,\n    performance: EVENTS.performance,\n    //  record\n    recordingTimestamp: EVENTS.recordingTimestamp,\n    recordStart: EVENTS.recordStart,\n    recordCreateError: EVENTS.recordCreateError,\n    recordEnd: EVENTS.recordEnd,\n    recordBlob: EVENTS.recordBlob,\n    playToRenderTimes: EVENTS.playToRenderTimes,\n\n    // playback\n    playbackSeek: EVENTS.playbackSeek,\n    playbackStats: EVENTS.playbackStats,\n    playbackTimestamp: EVENTS.playbackTimestamp,\n    playbackPauseOrResume: EVENTS.playbackPauseOrResume,\n    playbackPreRateChange: EVENTS.playbackPreRateChange,\n    playbackRateChange: EVENTS.playbackRateChange,\n    playbackShowPrecisionChange: EVENTS.playbackShowPrecisionChange,\n\n    ptz: EVENTS.ptz,\n    streamQualityChange: EVENTS.streamQualityChange,\n    zooming: EVENTS.zooming,\n    crashLog: EVENTS.crashLog,\n\n    focus: EVENTS.focus,\n    blur: EVENTS.blur,\n    visibilityHiddenTimeout: EVENTS.visibilityHiddenTimeout,\n    visibilityChange: EVENTS.visibilityChange,\n\n    // websocket\n    websocketOpen: EVENTS.websocketOpen,\n    websocketClose: EVENTS.websocketClose,\n    //\n    networkDelayTimeout: EVENTS.networkDelayTimeout,\n    //\n    aiObjectDetectorInfo: EVENTS.aiObjectDetectorInfo,\n    aiFaceDetectorInfo: EVENTS.aiFaceDetectorInfo,\n    aiOcclusionDetectResult: EVENTS.aiOcclusionDetectResult,\n    aiImageDetectResult: EVENTS.aiImageDetectResult,\n\n    playFailedAndPaused: EVENTS.playFailedAndPaused,\n\n    streamEnd: EVENTS.streamEnd,\n\n    // audio\n    audioResumeState: EVENTS.audioResumeState,\n\n    // video\n    videoSEI: EVENTS.videoSEI,\n\n    //  flv\n    flvMetaData: EVENTS.flvMetaData,\n\n    // webrtc\n    webrtcOnConnectionStateChange: EVENTS.webrtcOnConnectionStateChange,\n    webrtcOnIceConnectionStateChange: EVENTS.webrtcOnIceConnectionStateChange,\n\n    currentPts: EVENTS.currentPts,\n\n    videoSmooth: EVENTS.videoSmooth,\n}\n\nexport const TALK_EVENTS = {\n    talkStreamClose: EVENTS.talkStreamClose,\n    talkStreamError: EVENTS.talkStreamError,\n    talkStreamInactive: EVENTS.talkStreamInactive,\n    talkGetUserMediaTimeout: EVENTS.talkGetUserMediaTimeout,\n    talkFailedAndStop: EVENTS.talkFailedAndStop,\n}\n\nexport const JESSIBUCA_AUDIO_EVENTS = {\n    load: EVENTS.load,\n    timeUpdate: EVENTS.timeUpdate,\n    audioInfo: EVENTS.audioInfo,\n    error: EVENTS.error,\n    kBps: EVENTS.kBps,\n    start: EVENTS.start,\n    timeout: EVENTS.timeout,\n    loadingTimeout: EVENTS.loadingTimeout,\n    loadingTimeoutRetryEnd: EVENTS.loadingTimeoutRetryEnd,\n    delayTimeout: EVENTS.delayTimeout,\n    delayTimeoutRetryEnd: EVENTS.delayTimeoutRetryEnd,\n    play: EVENTS.play,\n    pause: EVENTS.pause,\n    mute: EVENTS.mute,\n    stats: EVENTS.stats,\n    playToRenderTimes: EVENTS.playToRenderTimes,\n    crashLog: EVENTS.crashLog,\n\n    // websocket\n    websocketOpen: EVENTS.websocketOpen,\n    websocketClose: EVENTS.websocketClose,\n    //\n    playFailedAndPaused: EVENTS.playFailedAndPaused,\n\n    // audio\n    audioResumeState: EVENTS.audioResumeState,\n}\n\nexport const TALK_EVENTS_ERROR = {\n    talkStreamError: EVENTS.talkStreamError,\n    talkStreamClose: EVENTS.talkStreamClose,\n}\n\nexport const EVENTS_ERROR = {\n    playError: 'playIsNotPauseOrUrlIsNull',\n    fetchError: \"fetchError\",\n    websocketError: 'websocketError',\n    webcodecsH265NotSupport: 'webcodecsH265NotSupport',\n    webcodecsDecodeError: 'webcodecsDecodeError',\n    webcodecsUnsupportedConfigurationError: 'webcodecsUnsupportedConfigurationError',\n    webcodecsDecodeConfigureError: 'webcodecsDecodeConfigureError',\n    mediaSourceH265NotSupport: 'mediaSourceH265NotSupport',\n    mediaSourceAudioG711NotSupport: 'mediaSourceAudioG711NotSupport',\n    mediaSourceAudioInitTimeout: 'mediaSourceAudioInitTimeout',\n    mediaSourceAudioNoDataTimeout: 'mediaSourceAudioNoDataTimeout',\n    mediaSourceDecoderConfigurationError: 'mediaSourceDecoderConfigurationError',\n    mediaSourceFull: EVENTS.mseSourceBufferFull,\n    mseSourceBufferError: EVENTS.mseSourceBufferError,\n    mseAddSourceBufferError: EVENTS.mseAddSourceBufferError,\n    mediaSourceAppendBufferError: 'mediaSourceAppendBufferError',\n    mediaSourceTsIsMaxDiff: 'mediaSourceTsIsMaxDiff',\n    mediaSourceUseCanvasRenderPlayFailed: 'mediaSourceUseCanvasRenderPlayFailed',\n    mediaSourceBufferedIsZeroError: 'mediaSourceBufferedIsZeroError',\n    wasmDecodeError: 'wasmDecodeError',\n    wasmUseVideoRenderError: 'wasmUseVideoRenderError',\n    hlsError: 'hlsError',\n    webrtcError: 'webrtcError',\n    webrtcClosed: EVENTS.webrtcClosed,\n    webrtcIceCandidateError: 'webrtcIceCandidateError',\n    webglAlignmentError: 'webglAlignmentError',\n    wasmWidthOrHeightChange: 'wasmWidthOrHeightChange',\n    mseWidthOrHeightChange: 'mseWidthOrHeightChange',\n    wcsWidthOrHeightChange: 'wcsWidthOrHeightChange',\n    widthOrHeightChange: 'widthOrHeightChange',\n    tallWebsocketClosedByError: 'tallWebsocketClosedByError',\n    flvDemuxBufferSizeTooLarge: EVENTS.flvDemuxBufferSizeTooLarge,\n    wasmDecodeVideoNoResponseError: 'wasmDecodeVideoNoResponseError',\n    audioChannelError: 'audioChannelError',\n    simdH264DecodeVideoWidthIsTooLarge: 'simdH264DecodeVideoWidthIsTooLarge',\n    simdDecodeError: 'simdDecodeError',\n    webglContextLostError: 'webglContextLostError',\n    videoElementPlayingFailed: 'videoElementPlayingFailed',\n    videoElementPlayingFailedForWebrtc: 'videoElementPlayingFailedForWebrtc',\n    decoderWorkerInitError: 'decoderWorkerInitError',\n    videoInfoError: 'videoInfoError',\n    videoCodecIdError: 'videoCodecIdError',\n    streamEnd: EVENTS.streamEnd,\n    delayTimeout: EVENTS.delayTimeout,\n    loadingTimeout: EVENTS.loadingTimeout,\n    networkDelayTimeout: EVENTS.networkDelayTimeout,\n\n    aliyunRtcError: 'aliyunRtcError',\n\n    ...TALK_EVENTS_ERROR,\n}\n\nexport const WEBSOCKET_STATUS = {\n    notConnect: 'notConnect',\n    open: 'open',\n    close: 'close',\n    error: 'error'\n}\n\nexport const WEBSOCKET_STATUS_CODE = {\n    connecting: 0,\n    open: 1,\n    closing: 2,\n    closed: 3\n}\n\nexport const BUFFER_STATUS = {\n    empty: 'empty',\n    buffering: 'buffering',\n    full: 'full'\n}\n\n\nexport const SCREENSHOT_TYPE = {\n    download: 'download',\n    base64: 'base64',\n    blob: 'blob'\n}\n\n\nexport const RECORDING_TYPE = {\n    download: 'download',\n    blob: 'blob'\n}\n\n\nexport const VIDEO_ENC_TYPE = {\n    7: 'H264(AVC)', //\n    12: 'H265(HEVC)', //\n    99: 'MPEG4'\n}\n\nexport const VIDEO_ENC_CODE = {\n    h264: 7,\n    h265: 12,\n    mpeg4: 99\n}\n\nexport const VIDEO_ENC_TYPE_SHOW = {\n    h264: 'H264(AVC)',\n    h265: 'H265(HEVC)'\n}\n\nexport const AUDIO_ENC_CODE = {\n    AAC: 10,\n    ALAW: 7,\n    MULAW: 8,\n    MP3: 2\n}\n\nexport const AUDIO_ENC_CODE_SHOW = {\n    AAC: 'AAC',\n    ALAW: 'ALAW(g711a)',\n    MULAW: 'MULAW(g711u)',\n    MP3: 'MP3'\n}\n\nexport const AUDIO_ENC_TYPE = {\n    10: 'AAC',\n    7: 'ALAW',\n    8: 'MULAW',\n    2: 'MP3'\n}\n\n\nexport const H264_NAL_TYPE = {\n    sps: 7,\n    pps: 8,\n    iFrame: 5, //\n    kUnspecified: 0,\n    kSliceNonIDR: 1,\n    kSliceDPA: 2,\n    kSliceDPB: 3,\n    kSliceDPC: 4,\n    kSliceIDR: 5, //  iFrame\n    kSliceSEI: 6, // sei 辅助增强信息\n    kSliceSPS: 7, // sps\n    kSlicePPS: 8, // pps\n    kSliceAUD: 9,\n    kEndOfSequence: 10,\n    kEndOfStream: 11,\n    kFiller: 12,\n    kSPSExt: 13,\n    kReserved0: 14,\n}\n\n/**\n * NAL_TRAIL_N = 0,\n * NAL_TRAIL_R = 1,\n * NAL_TSA_N = 2,\n * NAL_TSA_R = 3,\n * NAL_STSA_N = 4,\n * NAL_STSA_R = 5,\n * NAL_RADL_N = 6,\n * NAL_RADL_R = 7,\n * NAL_RASL_N = 8,\n * NAL_RASL_R = 9,\n * NAL_BLA_W_LP = 16,\n * NAL_BLA_W_RADL = 17,\n * NAL_BLA_N_LP = 18,\n * NAL_IDR_W_RADL = 19,\n * NAL_IDR_N_LP = 20,\n * NAL_CRA_NUT = 21,\n * NAL_VPS = 32,\n * NAL_SPS = 33,\n * NAL_PPS = 34,\n * NAL_AUD = 35,\n * NAL_EOS_NUT = 36,\n * NAL_EOB_NUT = 37,\n * NAL_FD_NUT = 38,\n * NAL_SEI_PREFIX = 39,\n * NAL_SEI_SUFFIX = 40,\n */\nexport const H265_NAL_TYPE = {\n    pFrame: 1, //  语义为被参考的后置图像，且非TSA、非STSA的SS编码数据\n    iFrame: 19, // IDR_W_RADL 语义为可能有RADL图像的IDR图像的SS编码数据 IDR\n    kSliceIDR_W_RADL: 19,\n    nLp: 20, // kSliceIDR_N_LP\n    kSliceIDR_N_LP: 20,\n    craNut: 21,//NAL_CRA_NUT\n    kSliceCRA_NUT: 21,\n    vps: 32, // 语义为视频参数集\n    kSliceVPS: 32,\n    sps: 33, // 语义为序列参数集\n    kSliceSPS: 33,\n    pps: 34, // 语义为图像参数集\n    kSlicePPS: 34,\n    kSliceAUD: 35,\n    sei: 39, //SEI 语义为补充增强信息\n    prefixSei: 39,//\n    suffixSei: 40,//\n\n}\n\n\nexport const CONTROL_HEIGHT = 38\nexport const CONTROL_PLAYBACK_HEIGHT = 48\n\nexport const SCALE_MODE_TYPE = {\n    full: 0, //  视频画面完全填充canvas区域,画面会被拉伸\n    auto: 1, // 视频画面做等比缩放后,高或宽对齐canvas区域,画面不被拉伸,但有黑边\n    fullAuto: 2 // 视频画面做等比缩放后,完全填充canvas区域,画面不被拉伸,没有黑边,但画面显示不全\n}\n\n\nexport const CANVAS_RENDER_TYPE = {\n    webcodecs: 'webcodecs',\n    webgl: 'webgl',\n    webgl2: 'webgl2',\n    webgpu: 'webgpu',\n    offscreen: 'offscreen',\n    mse: 'mse',\n    hls: 'hls',\n    webrtc: 'webrtc'\n}\n\nexport const ENCODED_VIDEO_TYPE = {\n    key: 'key',\n    delta: 'delta'\n}\n\n\nexport const MP4_CODECS = {\n    avc: 'video/mp4; codecs=\"avc1.64002A\"',\n    hev: 'video/mp4; codecs=\"hev1.1.6.L123.b0\"',\n    // others hev\n    hev2: 'video/mp4;codecs=\"hev1.1.6.L120.90\"',\n    hev3: 'video/mp4;codecs=\"hev1.2.4.L120.90\"',\n    hev4: 'video/mp4;codecs=\"hev1.3.E.L120.90\"',\n    hev5: 'video/mp4;codecs=\"hev1.4.10.L120.90\"',\n}\n\n\nexport const MEDIA_SOURCE_STATE = {\n    ended: 'ended',\n    open: 'open',\n    closed: 'closed'\n}\n\n\n// frag duration\nexport const FRAG_DURATION = Math.ceil(1000 / 25)\n\nexport const AIDIO_MAX_VIDEO_DIFF = 2000; // ms\n// renderTimeDay once length\nexport const PLAYBACK_RENDER_ONCE_LENGTH = 2000;\n\nexport const HOT_KEY = {\n    esc: 27, //\n    arrowUp: 38, //\n    arrowDown: 40, //\n}\n\n// playback control time precision\nexport const PLAYBACK_CONTROL_TIME_PRECISION = {\n    oneHour: 'oneHour', // 60min\n    halfHour: 'halfHour', // 30min\n    tenMin: 'tenMin', // 10min\n    fiveMin: 'fiveMin', // 5min\n    // oneMin: \"oneMin\" // 1min\n}\n\nexport const PLAYBACK_CONTROL_TIME_PRECISION_CLASS = {\n    oneHour: 'one-hour', // 60min\n    halfHour: 'half-hour', // 30min\n    tenMin: 'ten-min', // 10min\n    fiveMin: 'five-min', // 5min\n    // oneMin: 'one-min' // 1min\n}\n\nexport const PLAYBACK_CONTROL_TIME_PRECISION_TEXT = {\n    oneHour: '1h', // 60min\n    halfHour: '30min', // 30min\n    tenMin: '10min', // 10min\n    fiveMin: '5min', // 5min\n    // oneMin: '1min' // 1min\n}\n\n//\nexport const PLAYBACK_CONTROL_TIME_PRECISION_ARRAY = [\n    'oneHour', 'halfHour', 'tenMin', 'fiveMin'\n]\n\nexport const PTZ_ARROW = ['up', 'right', 'down', 'left', 'left-up', 'right-up', 'left-down', 'right-down'];\n\nexport const PTZ_OBJ = {\n    up: \"up\",\n    right: 'right',\n    down: 'down',\n    left: 'left',\n    leftUp: 'leftUp',\n    leftDown: 'leftDown',\n    rightUp: 'rightUp',\n    rightDown: 'rightDown',\n    // stop\n    stop: 'stop',\n    fiStop: 'fiStop', // just for 聚焦，光圈,\n    // 镜头\n    zoomExpand: 'zoomExpand',\n    zoomNarrow: 'zoomNarrow',\n    // 聚焦\n    apertureFar: 'apertureFar',\n    apertureNear: 'apertureNear',\n    // 光圈\n    focusFar: 'focusFar',\n    focusNear: 'focusNear',\n    // 巡航\n    cruiseStart: 'cruiseStart',\n    cruiseStop: 'cruiseStop',\n    // 透雾\n    fogOpen: 'fogOpen',\n    fogClose: 'fogClose',\n\n    // 雨刷\n    wiperOpen: 'wiperOpen',\n    wiperClose: 'wiperClose'\n}\n\nexport const TALK_ENC_TYPE = {\n    g711a: 'g711a',\n    g711u: 'g711u',\n    pcm: 'pcm',\n    opus: 'opus',\n}\n\nexport const SCREENSHOT_FORMAT_TYPE = {\n    png: 'image/png',\n    jpeg: 'image/jpeg',\n    webp: 'image/webp'\n};\n\nexport const PLAYBACK_VIDEO_MAX_BUFFER_SIZE = 50;\n\n\nexport const MEDIA_SOURCE_EVENTS = {\n    sourceClose: 'sourceclose',\n    sourceOpen: 'sourceopen',\n    sourceended: 'sourceended',\n    startstreaming: 'startstreaming',\n    endstreaming: 'endstreaming',\n    qualitychange: 'qualitychange',\n}\n\nexport const VIDEO_ELEMENT_EVENTS = {\n    canplay: 'canplay',\n    waiting: \"waiting\",\n    timeUpdate: 'timeupdate',\n    ratechange: 'ratechange'\n}\n\n\nexport const VIDEO_ENCODE_TYPE = {\n    h264: 'avc',\n    h265: 'hevc'\n}\n\n\nexport const AVCPacketType = {\n    AVCSequenceHeader: 0,\n    AVCNalu: 1,\n}\n\n\nexport const WCS_ERROR = {\n    keyframeIsRequiredError: 'A key frame is required after configure() or flush()',\n    canNotDecodeClosedCodec: \"Cannot call 'decode' on a closed codec\",\n    unsupportedConfiguration: 'Unsupported configuration',\n    decoderFailure: 'Decoder failure',\n    decodingError: 'Decoding error',\n    decoderError: 'Decoder error',\n    hevcDecodingIsNotSupported: 'HEVC decoding is not supported',\n}\nexport const FETCH_ERROR = {\n    abortError: 'The user aborted a request',\n    abortError2: 'AbortError',\n    abort: 'AbortError'\n}\n\nexport const PLAYER_STATUS = {\n    loading: 'loading',\n    playing: 'playing',\n    paused: 'paused',\n    destroy: 'destroy'\n}\n\n\nexport const AVC_PACKET_TYPE = {\n    sequenceHeader: 0,\n    nalu: 1\n}\n\nexport const FRAME_TYPE = {\n    keyFrame: 1,\n    interFrame: 2\n}\n\n//     RTP_PAYLOAD_TYPE_PCMU    = 0,   // g711u\n//     RTP_PAYLOAD_TYPE_PCMA    = 8,   // g711a\n//     RTP_PAYLOAD_TYPE_JPEG    = 26,\n//     RTP_PAYLOAD_TYPE_H264    = 96,\n//     RTP_PAYLOAD_TYPE_H265    = 97,\n//     RTP_PAYLOAD_TYPE_OPUS    = 98,\n//     RTP_PAYLOAD_TYPE_AAC     = 99,\n//     RTP_PAYLOAD_TYPE_G726    = 100,\n//     RTP_PAYLOAD_TYPE_G726_16 = 101,\n//     RTP_PAYLOAD_TYPE_G726_24 = 102,\n//     RTP_PAYLOAD_TYPE_G726_32 = 103,\n//     RTP_PAYLOAD_TYPE_G726_40 = 104,\n//     RTP_PAYLOAD_TYPE_SPEEX   = 105,\nexport const RTP_PAYLOAD_TYPE = {\n    pcma: 8,\n    g711a: 8,\n    pcmu: 0,\n    g711u: 0,\n    jpeg: 26,\n    h264: 96,\n    h265: 97,\n    opus: 98,\n    aac: 99,\n}\n\n\nexport const TALK_PACKET_TYPE = {\n    empty: 'empty', // 裸的协议\n    rtp: 'rtp',\n}\n\nexport const TALK_PACKAGE_TCP_SEND_TYPE = {\n    tcp: 'tcp',\n    udp: 'udp'\n}\n\n\nexport const RECORD_STREAM_TYPE = {\n    stream: 'stream',\n    playback: 'playback'\n}\n\n\nexport const WEBSOCKET_EVENTS = {\n    open: 'open',\n    close: 'close',\n    error: 'error',\n    message: 'message'\n}\n\nexport const TALK_ENGINE = {\n    worklet: 'worklet',\n    script: 'script'\n}\n\n// default talk options\nexport const DEFAULT_TALK_OPTIONS = {\n    encType: TALK_ENC_TYPE.g711a,\n    packetType: TALK_PACKET_TYPE.rtp, // 默认的包个格式化\n    packetTcpSendType: TALK_PACKAGE_TCP_SEND_TYPE.tcp, // 默认的包个格式化\n    rtpSsrc: '0000000000', // 10 位\n    numberChannels: 1, // 采样通道\n    sampleRate: 8000, // 采样率\n    sampleBitsWidth: 16, // 采样精度\n    sendInterval: 20, // 发送间隔(ms)\n    debug: false,\n    debugLevel: DEBUG_LEVEL.warn, // debug level\n    testMicrophone: false, // 测试麦克风获取\n    saveRtpToFile: false, // 保存 rtp 到文件\n    audioBufferLength: 160, // 默认走的是 20ms 8000 采样率 16 位精度\n    engine: TALK_ENGINE.worklet, //\n    checkGetUserMediaTimeout: false, // 检测 getUserMedia 超时\n    getUserMediaTimeout: 10 * 1000, // getUserMedia 超时时间 10s\n    audioConstraints: {\n        // deviceId: '', // 设备 id\n        latency: true,//\n        noiseSuppression: true, // 降噪\n        autoGainControl: true,\n        echoCancellation: true, // 回声消除\n        sampleRate: 48000,\n        channelCount: 1\n    },\n}\n\n\nexport const AUDIO_ENGINE_TYPE = {\n    worklet: 'worklet',\n    script: 'script', // default\n    active: 'active' //\n}\n\n\nexport const CONTROL_BUTTON_OPTIONS = {\n    name: '',\n    index: 0,\n    icon: '',\n    iconHover: '',\n    iconTitle: '',\n    activeIcon: '',\n    activeIconHover: '',\n    activeIconTitle: '',\n    click: null,\n    activeClick: null,\n}\n\nexport const MENU_ITEM_OPTIONS = {\n    content: '',\n    click: null,\n    index: 0\n}\n\n\n// multi options\nexport const DEFAULT_MULTI_OPTIONS = {\n    container: '',\n    maxSplit: 4, // 最大分屏数\n    split: 1, // 默认分屏数\n    draggable: false,// 是否支持拖拽\n    showSelectedBorder: true, // 是否显示选中边框\n    supportDblclickContainerFullscreen: false, // 是否支持双击全屏\n    supportMousemoveEvent: false,\n    style: {\n        border: \"#343434\",\n        borderSelect: \"#FFCC00\",\n        background: \"#000\",\n    }\n}\n\n//\nexport const MULTI_EVENTS = {\n    multiFullscreen: 'multiFullscreen',\n    dblSelected: 'multiDblSelected', // 双击选中窗口\n    selected: 'multiSelected', // 选中窗口\n    mouseover: 'multiMouseover', // 鼠标移入\n    mouseout: 'multiMouseout', // 鼠标移出\n    mouseup: 'multiMouseup', // 鼠标mouseUp事件\n    mousedown: 'multiMousedown', // 鼠标mouseDown事件\n    mousemove: 'multiMousemove', // 鼠标mouseMove事件\n    dragstart: 'multiDragstart', // 拖拽开始\n    dragenter: 'multiDragenter', // 拖拽进入\n    dragleave: 'multiDragleave', // 拖拽离开\n    drop: 'multiDrop', // 拖拽放下\n}\n\nexport const MULTI_SHOW_SPECIAL_TYPE = {\n    special1: '3-1', // 九宫格- 左上合并了四个。\n    special2: '4-1', // 十六宫格- 左上合并了九个。\n    special3: '1-1',// 两宫格- 左边一个，右边一个。\n    special4: '3-4',// 十二宫格\n    special5: '' // 十宫格,左上四个合并，右下四个合并\n}\n\n\nexport const WATERMARK_REFERENCE = {\n    container: 'container',\n    video: 'video'\n}\n\n\nexport const VIDEO_FRAME_TYPE = {\n    keyFrame: 1,//\n    interFrame: 2,//\n}\n\nexport const VIDEO_PACKET_TYPE = {\n    sequenceHeader: 0, //\n    nalu: 1, //\n}\n\n//  default audio player options\nexport const DEFAULT_AUDIO_PLAYER_OPTIONS = {\n    playType: PLAY_TYPE.playerAudio, // inner\n    timeout: 10, // timeout\n    loadingTimeout: 10, // loading timeout\n    heartTimeout: 10,  // heart timeout\n    debug: false, // debug log\n    debugLevel: DEBUG_LEVEL.warn, // debug level\n    protocol: PLAYER_PLAY_PROTOCOL.fetch, // 内部参数\n    demuxType: DEMUX_TYPE.flv, // 内部参数\n    isFlv: false, // is flv\n    isNotMute: false, // is not mute\n    videoBuffer: 1 * 1000, // 1* 1000ms == 1 second\n    videoBufferDelay: 1 * 1000, // 1* 1000ms == 1 second\n    videoBufferMax: 5 * 1000, // 5* 1000ms == 5 second\n    loadingTimeoutReplay: true, // loading timeout replay\n    heartTimeoutReplay: true,// heart timeout replay。\n    loadingTimeoutReplayTimes: 3, // loading timeout replay fail times\n    heartTimeoutReplayTimes: 3, // heart timeout replay fail times\n    decoder: 'decoder-pro-audio-player.js', // default pcm\n    isDecoderUseCDN: false,\n    weiXinInAndroidAudioBufferSize: 4800,\n    audioEngine: null, // 音频引擎\n    supportLockScreenPlayAudio: true,// 是否支持锁屏播放音频（mobile,ipad 端）\n}\n\n\nexport const HLS_EVENTS = {\n    SUBTITLE_SEGMENTS: 'subtitle-segments',\n    HLS_MANIFEST_LOADED: 'hls-manifest-loaded', // 主从m3u8格式时，master m3u8文件加载并解析完成后\n    HLS_LEVEL_LOADED: 'hls-level-loaded', // 二级m3u8加载并解析完成后，抛出解析后的结构\n    DEMUXED_TRACK: 'demuxed-track',\n    FLV_SCRIPT_DATA: 'flv-script-data',\n    METADATA_PARSED: 'metadata-parsed', // 视频元数据被第一次解析到时触发参数被分为两种类型 video 和 audio\n    TTFB: 'ttfb', // 分片请求开始到接收到请求响应\n\n    LOAD_RETRY: 'load-retry', // 请求发生重试时触发\n    LOAD_START: 'load-start', // 分片在发送请求之前触发\n    SPEED: 'speed', // 当收集到网络速度统计时触发\n    LOAD_COMPLETE: 'load-complete', // 在请求完成后触发\n    LOAD_RESPONSE_HEADERS: 'load-response-headers', // 接收到请求响应头时触发\n\n    SEI: 'sei', // 当解析到视频 sei 时触发\n    SEI_IN_TIME: 'sei-in-time', // 根据当前视频播放时间抛出 sei，触发该事件表示该 sei 将在当前时间点展示。\n\n    NO_AUDIO_TRACK: 'no-audio-track',\n\n    REMOVE_BUFFER: 'remove-buffer',\n\n    BUFFEREOS: 'buffereos',\n\n    SOURCEBUFFER_CREATED: 'sourcebuffer-created',\n\n    SWITCH_URL_FAILED: 'switch-url-failed', // switchURL 方法调用后，切换 url 失败后触发。\n\n    SWITCH_URL_SUCCESS: 'switch-url-success', // switchURL 方法调用后，切换 url 成功后触发。\n\n    SUBTITLE_PLAYLIST: 'subtitle-playlist',\n\n    STREAM_PARSED: 'stream-parsed',\n\n    ERROR: 'error',\n}\n\nexport const AI_FACE_DETECTOR_LEVEL = [0, 160, 240, 320, 480, 640];\n\nexport const AI_OBJECT_DETECTOR_LEVEL = [0, 160, 240, 320, 480, 640];\n\nexport const CPU_LEVEL = ['轻松', '正常', '较高', '高'];\n\n\nexport const LOADER_STATUS = {\n    idle: 'idle', //\n    connecting: 'connecting', //\n    buffering: 'buffering', //\n    error: 'error', //\n    complete: 'complete', //\n}\n\n\nexport const VIDEO_ERROR_CODE_DESC = {\n    1: 'MEDIA_ERR_ABORTED', // media err aborted 取回过程被用户中止\n    2: 'MEDIA_ERR_NETWORK', // media err network 当下载时发生错误\n    3: 'MEDIA_ERR_DECODE', // media err decode 当解码时发生错误\n    4: 'MEDIA_ERR_SRC_NOT_SUPPORTED', // media err src not supported 不支持音频/视频\n}\n\nexport const VIDEO_ERROR_MESSAGE = {\n    videoDecoderInitializationFailed: 'video decoder initialization failed',\n    audioDecoderError: 'audio packet'\n}\n\n\nexport const AV_TRACK_ID = {\n    video: 1,\n    audio: 2,\n}\n\n//  rtmp 2023 spec\nexport const FRAME_HEADER_EX = 0x80\n\n\nexport const PACKET_TYPE_EX = {\n    PACKET_TYPE_SEQ_START: 0,\n    PACKET_TYPE_FRAMES: 1,\n    PACKET_TYPE_SEQ_END: 2,\n    PACKET_TYPE_FRAMESX: 3, // PACKETTYPE_FRAMESX is an optimization to avoid sending composition time offsets of 0. See Enhanced RTMP spec.\n    PACKET_TYPE_METADATA: 4,\n};\n\nexport const FRAME_TYPE_EX = {\n    FT_KEY: 0x10,\n    FT_INTER: 0x20\n};\n\n\nexport const WEBRTC_STATS_TYPE = {\n    CandidatePair: \"candidate-pair\", // todo\n    Certificate: \"certificate\", // todo\n    Codec: \"codec\", //  todo\n    Csrc: \"csrc\",\n    DataCahnnel: \"data-channel\",\n    InboundRtp: \"inbound-rtp\", // todo\n    LocalCandidate: \"local-candidate\", // todo\n    OutboundRtp: \"outbound-rtp\",\n    PeerConnection: \"peer-connection\",\n    Receiver: \"receiver\",\n    RemoteCandidate: \"remote-candidate\", // todo\n    RemoteInboundRtp: \"remote-inbound-rtp\",\n    RemoteOutboundRtp: \"remote-outbound-rtp\",\n    Sender: \"sender\",\n    Stream: \"stream\",\n    Track: \"track\",\n    Transport: \"transport\", // todo\n    MediaSource: \"media-source\",\n}\n\n\nexport const TS_LARGE_AV_FIRST_FRAME_GAP = 90000 / 2 // 500ms\nexport const TS_AUDIO_GAP_OVERLAP_THRESHOLD_COUNT = 3\nexport const TS_MAX_SILENT_FRAME_DURATION = 90000 // 1s\nexport const TS_AUDIO_EXCETION_LOG_EMIT_DURATION = 5 * 90000 // 5s\nexport const TS_MAX_VIDEO_FRAME_DURATION = 90000 // 1s\nexport const TS_MAX_DTS_DELTA_WITH_NEXT_CHUNK = 90000 / 2 // 500ms\n\n\nexport const RETRY_TYPE = {\n    ws1006: 'ws1006',\n    mseDecodeError: 'mseDecodeError',\n    wcsDecodeError: 'wcsDecodeError'\n}\n","/*!\n* screenfull\n* v5.1.0 - 2020-12-24\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\n\tvar fn = (function () {\n\t\tvar val;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// New WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// Old WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0; i < val.length; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar eventNameMap = {\n\t\tchange: fn.fullscreenchange,\n\t\terror: fn.fullscreenerror\n\t};\n\n\tvar screenfull = {\n\t\trequest: function (element, options) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar onFullScreenEntered = function () {\n\t\t\t\t\tthis.off('change', onFullScreenEntered);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenEntered);\n\n\t\t\t\telement = element || document.documentElement;\n\n\t\t\t\tvar returnPromise = element[fn.requestFullscreen](options);\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenEntered).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\texit: function () {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tif (!this.isFullscreen) {\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar onFullScreenExit = function () {\n\t\t\t\t\tthis.off('change', onFullScreenExit);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenExit);\n\n\t\t\t\tvar returnPromise = document[fn.exitFullscreen]();\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenExit).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\ttoggle: function (element, options) {\n\t\t\treturn this.isFullscreen ? this.exit() : this.request(element, options);\n\t\t},\n\t\tonchange: function (callback) {\n\t\t\tthis.on('change', callback);\n\t\t},\n\t\tonerror: function (callback) {\n\t\t\tthis.on('error', callback);\n\t\t},\n\t\ton: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.addEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\toff: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.removeEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = {isEnabled: false};\n\t\t} else {\n\t\t\twindow.screenfull = {isEnabled: false};\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tisEnabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n","import {\n    MP4_CODECS,\n    FILE_SUFFIX,\n    H264_NAL_TYPE,\n    VIDEO_ENC_TYPE_SHOW,\n    H265_NAL_TYPE,\n    AUDIO_ENC_TYPE,\n    AUDIO_ENC_CODE_SHOW,\n    AUDIO_ENC_CODE,\n    DEFAULT_JESSIBUCA_OPTIONS,\n    DEFAULT_PLAYER_OPTIONS,\n    DEFAULT_TALK_OPTIONS,\n    CONTROL_BUTTON_OPTIONS,\n    MENU_ITEM_OPTIONS,\n    DEFAULT_MULTI_OPTIONS,\n    FRAME_TYPE,\n    AVC_PACKET_TYPE,\n    WATERMARK_REFERENCE,\n    DEFAULT_AUDIO_PLAYER_OPTIONS\n} from \"../constant\";\nimport screenfull from \"screenfull\";\nimport {isAacCodecPacket} from \"./aac\";\nimport {parseAvcC} from \"./nalu\";\n\nexport function noop() {\n}\n\n\nexport function supportOffscreen($canvas) {\n    return typeof $canvas.transferControlToOffscreen === 'function';\n}\n\n\nexport function supportOffscreenV2() {\n    return typeof OffscreenCanvas !== \"undefined\";\n}\n\n\nexport function createContextGL($canvas) {\n    let gl = null;\n\n    const validContextNames = [\"webgl\", \"experimental-webgl\", \"moz-webgl\", \"webkit-3d\"];\n    let nameIndex = 0;\n\n    while (!gl && nameIndex < validContextNames.length) {\n        const contextName = validContextNames[nameIndex];\n\n        try {\n            let contextOptions = {preserveDrawingBuffer: true};\n            gl = $canvas.getContext(contextName, contextOptions);\n        } catch (e) {\n            console.error(e);\n            gl = null;\n        }\n\n        if (!gl || typeof gl.getParameter !== \"function\") {\n            gl = null;\n        }\n\n        ++nameIndex;\n    }\n\n\n    return gl;\n}\n\n\nexport function createContextGL2($canvas) {\n    let gl2 = null;\n    gl2 = $canvas.getContext(\"webgl2\");\n    return gl2;\n}\n\nexport function audioContextUnlock(context) {\n    context.resume();\n    const source = context.createBufferSource();\n    source.buffer = context.createBuffer(1, 1, 22050);\n    source.connect(context.destination);\n    if (source.noteOn) {\n        source.noteOn(0);\n    } else {\n        source.start(0);\n    }\n}\n\nexport function dataURLToFile(dataURL = '') {\n    const arr = dataURL.split(\",\");\n    const bstr = atob(arr[1]);\n    const type = arr[0].replace(\"data:\", \"\").replace(\";base64\", \"\")\n    let n = bstr.length, u8arr = new Uint8Array(n);\n    while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n    }\n    return new File([u8arr], 'file', {type});\n}\n\nexport function downloadFile(file, fileName) {\n    if (file instanceof Blob || file instanceof File) {\n        file = new Blob([file]);\n    }\n    const aLink = document.createElement(\"a\");\n    aLink.download = fileName;\n    aLink.href = file;\n    aLink.click();\n}\n\n\nexport function downloadImg(content, fileName) {\n    const aLink = document.createElement(\"a\");\n    aLink.download = fileName;\n    const href = URL.createObjectURL(content);\n    aLink.href = href;\n    aLink.click();\n    setTimeout(() => {\n        URL.revokeObjectURL(href);\n    }, isIOS() ? 1000 : 0)\n}\n\nexport function checkFull() {\n    let isFull = document.fullscreenElement || window.webkitFullscreenElement || document.msFullscreenElement;\n    if (isFull === undefined) isFull = false;\n    return !!isFull;\n}\n\nexport function now() {\n    return new Date().getTime();\n}\n\nexport const supportedWasm = (() => {\n    try {\n        if (typeof WebAssembly === \"object\"\n            && typeof WebAssembly.instantiate === \"function\") {\n            const module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));\n            if (module instanceof WebAssembly.Module)\n                return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;\n        }\n    } catch (e) {\n    }\n    return false;\n})();\n\nexport function clamp(num, a, b) {\n    return Math.max(Math.min(num, Math.max(a, b)), Math.min(a, b));\n}\n\nexport function setStyle(element, key, value) {\n    if (!element) {\n        return\n    }\n    if (typeof key === 'object') {\n        Object.keys(key).forEach(item => {\n            setStyle(element, item, key[item]);\n        });\n    }\n    element.style[key] = value;\n    return element;\n}\n\n\nexport function getStyle(element, key, numberType = true) {\n    if (!element) {\n        return 0\n    }\n\n    const value = getComputedStyle(element, null).getPropertyValue(key);\n    return numberType ? parseFloat(value) : value;\n}\n\nexport function getNowTime() {\n    if (performance && typeof performance.now === 'function') {\n        return performance.now();\n    }\n    return Date.now();\n}\n\nexport function calculationRate(callback) {\n    let totalSize = 0;\n    let lastTime = getNowTime();\n    return size => {\n        if (!isNumber(size)) {\n            return;\n        }\n        totalSize += size;\n        const thisTime = getNowTime();\n        const diffTime = thisTime - lastTime;\n        if (diffTime >= 1000) {\n            callback((totalSize / diffTime) * 1000);\n            lastTime = thisTime;\n            totalSize = 0;\n        }\n    };\n}\n\nexport function downloadRecord(blob, name, suffix) {\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = (name || now()) + '.' + (suffix || FILE_SUFFIX.webm);\n    a.click();\n    setTimeout(() => {\n        window.URL.revokeObjectURL(url);\n    }, isIOS() ? 1000 : 0)\n}\n\nexport const env = '__ENV__';\nexport const version = '__VERSION__'\nexport const proVersionTime = '__BUILD_DAY__'\nexport const isDev = env === '\"development\"';\nexport const isProd = env === '\"production\"';\nexport const isRelease = env === '\"release\"';\nexport const experienceTimeout = '__TIMEOUT__';\n\nexport function isMobile() {\n    return (/iphone|ipod|android.*mobile|windows.*phone|blackberry.*mobile/i.test(window.navigator.userAgent.toLowerCase()));\n}\n\nexport function isNoSleepMobile() {\n    return /(iphone|ipad|ipod|ios|android)/i.test(window.navigator.userAgent.toLowerCase())\n}\n\nexport function isPad() {\n    return (/ipad|android(?!.*mobile)|tablet|kindle|silk/i.test(window.navigator.userAgent.toLowerCase()));\n}\n\nexport function isPc() {\n    return !(isMobile() || isPad())\n}\n\nexport function isAndroid() {\n    const UA = window.navigator.userAgent.toLowerCase();\n    return (/android/i.test(UA));\n}\n\nexport function isFirefox() {\n    const UA = window.navigator.userAgent.toLowerCase();\n    return (/firefox/i.test(UA));\n}\n\nexport function getBrowser() {\n    const UserAgent = window.navigator.userAgent.toLowerCase() || '';\n    const browserInfo = {\n        type: '',\n        version: ''\n    };\n    const browserArray = {\n        IE: window.ActiveXObject || \"ActiveXObject\" in window, // IE\n        Chrome: UserAgent.indexOf('chrome') > -1 && UserAgent.indexOf('safari') > -1, // Chrome浏览器\n        Firefox: UserAgent.indexOf('firefox') > -1, // 火狐浏览器\n        Opera: UserAgent.indexOf('opera') > -1, // Opera浏览器\n        Safari: UserAgent.indexOf('safari') > -1 && UserAgent.indexOf('chrome') == -1, // safari浏览器\n        Edge: UserAgent.indexOf('edge') > -1, // Edge浏览器\n        QQBrowser: /qqbrowser/.test(UserAgent), // qq浏览器\n        WeixinBrowser: /MicroMessenger/i.test(UserAgent) // 微信浏览器\n    };\n    // console.log(browserArray)\n    for (let i in browserArray) {\n        if (browserArray[i]) {\n            let versions = '';\n            if (i === 'IE') {\n                const versionArray = UserAgent.match(/(msie\\s|trident.*rv:)([\\w.]+)/)\n                if (versionArray && versionArray.length > 2) {\n                    versions = UserAgent.match(/(msie\\s|trident.*rv:)([\\w.]+)/)[2];\n                }\n            } else if (i === 'Chrome') {\n                for (let mt in navigator.mimeTypes) {\n                    //检测是否是360浏览器(测试只有pc端的360才起作用)\n                    if (navigator.mimeTypes[mt]['type'] === 'application/360softmgrplugin') {\n                        i = '360';\n                    }\n                }\n                const versionArray = UserAgent.match(/chrome\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            } else if (i === 'Firefox') {\n                const versionArray = UserAgent.match(/firefox\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            } else if (i === 'Opera') {\n                const versionArray = UserAgent.match(/opera\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            } else if (i === 'Safari') {\n                const versionArray = UserAgent.match(/version\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            } else if (i === 'Edge') {\n                const versionArray = UserAgent.match(/edge\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            } else if (i === 'QQBrowser') {\n                const versionArray = UserAgent.match(/qqbrowser\\/([\\d.]+)/);\n                if (versionArray && versionArray.length > 1) {\n                    versions = versionArray[1];\n                }\n            }\n            browserInfo.type = i;\n            browserInfo.version = parseInt(versions);\n        }\n    }\n    return browserInfo;\n}\n\nexport function isIOS() {\n    const UA = window.navigator.userAgent.toLowerCase();\n    return UA && /iphone|ipad|ipod|ios/.test(UA);\n}\n\nexport function isSafari() {\n    const ua = window.navigator.userAgent;\n    return !ua.match(/Chrome/gi) && !!ua.match(/Safari/gi);\n}\n\nexport function isEdge() {\n    // new edge ua is like\n    // 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36 Edg/116.0.1938.62'\n    const ua = window.navigator.userAgent;\n    return ua.indexOf('Edg') !== -1;\n}\n\nexport function parseTime(time, cFormat) {\n    if (arguments.length === 0) {\n        return null\n    }\n    var format = cFormat || '{y}-{m}-{d} {h}:{i}:{s}'\n    var date;\n    if (typeof time === 'object') {\n        date = time\n    } else {\n        if (('' + time).length === 10) time = parseInt(time) * 1000;\n        time = +time; // 转成int 型\n        date = new Date(time)\n    }\n    var formatObj = {\n        y: date.getFullYear(),\n        m: date.getMonth() + 1,\n        d: date.getDate(),\n        h: date.getHours(),\n        i: date.getMinutes(),\n        s: date.getSeconds(),\n        a: date.getDay()\n    };\n    var time_str = format.replace(/{(y|m|d|h|i|s|a)+}/g, (result, key) => {\n        var value = formatObj[key]\n        if (key === 'a') return ['一', '二', '三', '四', '五', '六', '日'][value - 1]\n        if (result.length > 0 && value < 10) {\n            value = '0' + value\n        }\n        return value || 0\n    });\n    return time_str\n}\n\n// 是否支持 webcodecs\nexport function supportWCS() {\n    return \"VideoEncoder\" in window;\n}\n\nexport function wcsIsConfigSupported(config) {\n    return new Promise((resolve, reject) => {\n        if (!supportWCS()) {\n            return reject('VideoEncoder is not supported')\n        }\n\n        if (!VideoEncoder.isConfigSupported) {\n            return reject('VideoEncoder.isConfigSupported is not a function')\n        }\n\n        VideoEncoder.isConfigSupported(config).then((result) => {\n            if (result.supported) {\n                resolve()\n            } else {\n                reject('VideoEncoder.isConfigSupported() result is not supported');\n            }\n        })\n    })\n\n}\n\nexport function supportWasmUseVideoRender() {\n    return 'VideoFrame' in window;\n}\n\nexport function toNumber(value) {\n    if (typeof value !== 'string') {\n        return value;\n    } else {\n        // 转换成 number 类型\n        var parsed = Number(value);\n        return isNaN(parsed) ? value : parsed;\n    }\n}\n\nexport function uuid16() {\n    return 'xxxxxxxxxxxx4xxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8)\n        return v.toString(16)\n    })\n}\n\nexport function throttle(callback, delay) {\n    let isThrottled = false;\n    let args;\n    let context;\n\n    function fn(...args2) {\n        if (isThrottled) {\n            args = args2;\n            context = this;\n            return;\n        }\n\n        isThrottled = true;\n        callback.apply(this, args2);\n        setTimeout(() => {\n            isThrottled = false;\n            if (args) {\n                fn.apply(context, args);\n                args = null;\n                context = null;\n            }\n        }, delay);\n    }\n\n    return fn;\n}\n\n\nexport function isDef(v) {\n    return v !== undefined && v !== null;\n}\n\nexport function formatVideoDecoderConfigure(avcC) {\n\n}\n\nexport function formatAvcVideoDecoderConfigure(avcC) {\n    let codecArray = avcC.subarray(1, 4);\n    let codecString = \"avc1.\";\n    for (let j = 0; j < 3; j++) {\n        let h = codecArray[j].toString(16);\n        if (h.length < 2) {\n            h = \"0\" + h\n        }\n        codecString += h\n    }\n    return {\n        codec: codecString,\n        description: avcC\n    }\n}\n\nexport function formatHevcVideoDecoderConfigure(hecvC) {\n    // The codec string begins with the prefix \"hev1.\" or \"hvc1.\", with a suffix of four dot-separated fields as described\n    // 'hvc1.2.4.L93.B0', //'hev1.1.6.H120.B0'\n    let codecArray = hecvC.subarray(1, 4);\n    //\n    // let codecString = \"hvc1.2.4.L93.B0\";\n    // hvc1.1.6.L120.90 这个是hls.js 用的编码格式。\n    let codecString = 'hev1.1.6.L120.90';\n    // for (let j = 0; j < 3; j++) {\n    //     let h = codecArray[j].toString(16);\n    //     if (h.length < 2) {\n    //         h = \"0\" + h\n    //     }\n    //     codecString += h\n    // }\n\n    return {\n        codec: codecString,\n        description: hecvC\n    }\n}\n\n\nexport function isFullScreen() {\n    // return document.isFullScreen || document.mozIsFullScreen || document.webkitIsFullScreen;\n    return screenfull.isFullscreen\n}\n\n//\nexport function bpsSize(value) {\n    if (null == value || value === '') {\n        return \"0 KB/s\";\n    }\n    let size = parseFloat(value);\n    size = size.toFixed(2);\n    return size + 'KB/s';\n}\n\nexport function bpsSize$2(value) {\n    if (null == value || value === '' || parseFloat(value) === 0 || value === 'NaN') {\n        return \"0 KB/s\";\n    }\n    const unitArr = [\"KB/s\", \"MB/s\", \"GB/s\", \"TB/s\", \"PB/s\", \"EB/s\", \"ZB/s\", \"YB/s\"];\n    let index = 0;\n    const srcsize = parseFloat(value);\n    index = Math.floor(Math.log(srcsize) / Math.log(1024));\n    let size = srcsize / Math.pow(1024, index);\n    size = size.toFixed(2);//\n    return size + (unitArr[index] || unitArr[0]);\n}\n\nexport function formatFileSize(value) {\n    if (null == value || value == '') {\n        return \"0 Bytes\";\n    }\n    const unitArr = new Array(\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\");\n    let index = 0;\n    const srcsize = parseFloat(value);\n    index = Math.floor(Math.log(srcsize) / Math.log(1024));\n    var size = srcsize / Math.pow(1024, index);\n    size = size.toFixed(2);//保留的小数位数\n    return size + unitArr[index];\n}\n\nexport function isNumber(value) {\n    const toString = Object.prototype.toString;\n    return toString.call(value) === \"[object Number]\";\n}\n\n\nexport function fpsStatus(fps, metaDataFps) {\n    let result = 3; // 流畅\n    const baseFps = metaDataFps || 25;\n    if (fps < (baseFps * 0.33)) {\n        result = 0;// 非常卡顿\n    } else if (fps < baseFps * 0.5) {\n        result = 1; // 卡顿\n    } else if (fps < baseFps * 0.83) {\n        result = 2; // 稍微卡顿\n    }\n\n    return result;\n}\n\nexport function createEmptyImageBitmap(width, height) {\n    const $canvasElement = document.createElement(\"canvas\");\n    $canvasElement.width = width;\n    $canvasElement.height = height;\n    const imageBitmap = window.createImageBitmap($canvasElement, 0, 0, width, height);\n    // release canvas\n    $canvasElement.width = 0;\n    $canvasElement.height = 0;\n    return imageBitmap;\n}\n\n\nexport function supportMSE() {\n    let result = false;\n    if ('MediaSource' in self) {\n        result = true;\n    }\n    return result;\n}\n\nexport function supportIosMSE() {\n    let result = false;\n    if (!('MediaSource' in self) &&\n        'ManagedMediaSource' in self) {\n        result = true;\n    }\n    return result;\n\n}\n\n//\nexport function supportMSEDecodeHevc() {\n    let result = false;\n    if ('MediaSource' in self && (\n        self.MediaSource.isTypeSupported(MP4_CODECS.hev) ||\n        self.MediaSource.isTypeSupported(MP4_CODECS.hev2) ||\n        self.MediaSource.isTypeSupported(MP4_CODECS.hev3) ||\n        self.MediaSource.isTypeSupported(MP4_CODECS.hev4) ||\n        self.MediaSource.isTypeSupported(MP4_CODECS.hev5)\n    )) {\n        result = true;\n    }\n    return result;\n}\n\nexport function supportIosMSEDecodeHevc() {\n    let result = false;\n    if (!('MediaSource' in self) &&\n        'ManagedMediaSource' in self && (\n            self.ManagedMediaSource.isTypeSupported(MP4_CODECS.hev) ||\n            self.ManagedMediaSource.isTypeSupported(MP4_CODECS.hev2) ||\n            self.ManagedMediaSource.isTypeSupported(MP4_CODECS.hev3) ||\n            self.ManagedMediaSource.isTypeSupported(MP4_CODECS.hev4) ||\n            self.ManagedMediaSource.isTypeSupported(MP4_CODECS.hev5)\n        )) {\n        result = true;\n    }\n    return result;\n}\n\n\n// 查看是否webcodecs 支持 hevc解码\n// chrome 107\nexport function supportWCSDecodeHevc() {\n    const browserInfo = getBrowser();\n    return browserInfo.type.toLowerCase() === 'chrome' && browserInfo.version >= 107;\n}\n\nexport function supportMediaStreamTrack() {\n    let result = false;\n    if ('MediaStreamTrackGenerator' in window) {\n        result = true;\n    }\n    return result\n}\n\nexport function supportMediaStream() {\n    let result = false;\n    if ('MediaStream' in window) {\n        result = true;\n    }\n    return result;\n}\n\n\nexport function formatMp4VideoCodec(codec) {\n    return `video/mp4; codecs=\"${codec}\"`\n}\n\n\nexport function saveBlobToFile(fileName, blob) {\n    let url = window.URL.createObjectURL(blob);\n    let aLink = window.document.createElement('a');\n    aLink.download = fileName;\n    aLink.href = url;\n    //创建内置事件并触发\n    let evt = window.document.createEvent('MouseEvents');\n    evt.initEvent(\"click\", true, true); //initEvent 不加后两个参数在FF下会报错  事件类型，是否冒泡，是否阻止浏览器的默认行为\n    aLink.dispatchEvent(evt);\n    setTimeout(() => {\n        window.URL.revokeObjectURL(url);\n    }, isIOS() ? 1000 : 0)\n}\n\nexport function isEmpty(value) {\n    return value === null || value === undefined\n}\n\nexport function isBoolean(value) {\n    return value === true || value === false;\n}\n\nexport function isNotEmpty(value) {\n    return !isEmpty(value)\n}\n\nexport function isUndefined(value) {\n    return value === undefined;\n}\n\nexport function initPlayTimes() {\n    return {\n        playInitStart: '', //1\n        playStart: '', // 2\n        streamStart: '', //3\n        streamResponse: '', // 4\n        demuxStart: '', // 5\n        decodeStart: '', // 6\n        videoStart: '', // 7\n        playTimestamp: '',// playStart- playInitStart\n        streamTimestamp: '',// streamStart - playStart\n        streamResponseTimestamp: '',// streamResponse - streamStart\n        demuxTimestamp: '', // demuxStart - streamResponse\n        decodeTimestamp: '', // decodeStart - demuxStart\n        videoTimestamp: '',// videoStart - decodeStart\n        allTimestamp: '' // videoStart - playInitStart\n    }\n}\n\nexport function formatWatermarkOptions(options) {\n    let defaultConfig = {\n        left: '',\n        right: '',\n        top: '',\n        bottom: '',\n        opacity: 1,\n        backgroundColor: '',\n        image: {\n            src: '',\n            width: '100',\n            height: '60'\n        },\n        text: {\n            content: '',\n            fontSize: '14',\n            color: '#000',\n            width: '',\n            height: ''\n        },\n        rect: {\n            color: 'green', // border color\n            lineWidth: 2,\n            width: '',\n            height: '',\n            fill: '', // fill color\n            fillOpacity: 0.2, // fill opacity\n        },\n        line: {\n            x1: '',\n            y1: '',\n            x2: '',\n            y2: '',\n            color: 'green',\n            lineWidth: 2\n        },\n        // 多边形\n        polygon: {\n            color: 'green',\n            lineWidth: 2,\n            list: [],\n            fill: '', // fill color\n            fillOpacity: 0.2, // fill opacity\n        },\n        html: ''\n    }\n    const imageConfig = Object.assign(defaultConfig.image, options.image || {})\n    const textConfig = Object.assign(defaultConfig.text, options.text || {})\n    const rectConfig = Object.assign(defaultConfig.rect, options.rect || {})\n    const lineConfig = Object.assign(defaultConfig.line, options.line || {})\n    defaultConfig = Object.assign(defaultConfig, options, {\n        image: imageConfig,\n        text: textConfig,\n        rect: rectConfig,\n        line: lineConfig\n    })\n\n    return defaultConfig;\n}\n\n\nexport function formatFullscreenWatermarkOptions(container, options) {\n    let defaultConfig = {\n        container: container || '',\n        text: '', // 文本\n        opacity: '',// 透明度\n        angle: '',// 倾斜角度\n        color: '',// 字体颜色\n        fontSize: '',// 字体大小\n        fontFamily: '',// 字体\n    }\n    defaultConfig = Object.assign(defaultConfig, options)\n    return {\n        watermark_parent_node: defaultConfig.container,\n        watermark_alpha: defaultConfig.opacity,\n        watermark_angle: defaultConfig.angle,\n        watermark_fontsize: defaultConfig.fontSize,\n        watermark_color: defaultConfig.color,\n        watermark_font: defaultConfig.fontFamily,\n        watermark_txt: defaultConfig.text,\n    }\n}\n\n// create watermark\nexport function createWatermark(watermarkList, container) {\n    let defaultConfigList = watermarkList.map((itemOptions) => {\n        return formatWatermarkOptions(itemOptions);\n    })\n    const $container = container;\n\n    if (!$container) {\n        return\n    }\n\n\n    let shadowRoot = null;\n    const otDiv = document.createElement('div');\n    otDiv.setAttribute('style', 'pointer-events: none !important; display: block !important');\n\n    if (typeof otDiv.attachShadow === \"function\") {\n        shadowRoot = otDiv.attachShadow({mode: 'open'});\n    } else if (otDiv.shadowRoot) {\n        shadowRoot = otDiv.shadowRoot;\n    } else {\n        shadowRoot = otDiv;\n    }\n\n    const nodeList = $container.children;\n    const index = Math.floor(Math.random() * (nodeList.length - 1));\n\n    if (nodeList[index]) {\n        $container.insertBefore(otDiv, nodeList[index]);\n    } else {\n        $container.appendChild(otDiv);\n    }\n    // foreach\n    defaultConfigList.forEach((defaultConfig) => {\n        const maskDiv = document.createElement('div');\n        let innerDom = null;\n        if (defaultConfig.image && defaultConfig.image.src) {\n            innerDom = document.createElement('img');\n            innerDom.style.height = '100%';\n            innerDom.style.width = '100%';\n            innerDom.style.objectFit = 'contain';\n            innerDom.src = defaultConfig.image.src;\n        } else if (defaultConfig.text && defaultConfig.text.content) {\n            innerDom = document.createTextNode(defaultConfig.text.content);\n        } else if (defaultConfig.rect && defaultConfig.rect.color && defaultConfig.rect.width) {\n            innerDom = document.createElement('div');\n        } else if (defaultConfig.html) {\n            innerDom = document.createElement('div');\n        }\n\n        if (innerDom) {\n            maskDiv.appendChild(innerDom);\n\n            maskDiv.style.visibility = '';\n            maskDiv.style.position = \"absolute\";\n            maskDiv.style.display = 'block'\n            maskDiv.style['-ms-user-select'] = \"none\";\n            maskDiv.style['-moz-user-select'] = \"none\";\n            maskDiv.style['-webkit-user-select'] = \"none\";\n            maskDiv.style['-o-user-select'] = \"none\";\n            maskDiv.style['user-select'] = \"none\";\n            maskDiv.style['-webkit-touch-callout'] = \"none\";\n            maskDiv.style['-webkit-tap-highlight-color'] = \"rgba(0,0,0,0)\";\n            maskDiv.style['-webkit-text-size-adjust'] = \"none\";\n            maskDiv.style['-webkit-touch-callout'] = \"none\";\n            maskDiv.style.opacity = defaultConfig.opacity;\n            if (isNumber(defaultConfig.left)) {\n                maskDiv.style.left = defaultConfig.left + 'px';\n            }\n            if (isNumber(defaultConfig.right)) {\n                maskDiv.style.right = defaultConfig.right + 'px';\n            }\n            if (isNumber(defaultConfig.top)) {\n                maskDiv.style.top = defaultConfig.top + 'px';\n            }\n            if (isNumber(defaultConfig.bottom)) {\n                maskDiv.style.bottom = defaultConfig.bottom + 'px';\n            }\n            if (defaultConfig.backgroundColor) {\n                maskDiv.style.backgroundColor = defaultConfig.backgroundColor;\n            }\n            maskDiv.style.overflow = 'hidden';\n            maskDiv.style.zIndex = \"9999999\";\n            if (defaultConfig.image && defaultConfig.image.src) {\n                maskDiv.style.width = defaultConfig.image.width + 'px';\n                maskDiv.style.height = defaultConfig.image.height + 'px';\n            } else if (defaultConfig.text && defaultConfig.text.content) {\n                maskDiv.style.fontSize = defaultConfig.text.fontSize + 'px';\n                maskDiv.style.color = defaultConfig.text.color;\n            } else if (defaultConfig.rect && defaultConfig.rect.color && defaultConfig.rect.width) {\n                maskDiv.style.width = defaultConfig.rect.width + 'px';\n                maskDiv.style.height = defaultConfig.rect.height + 'px';\n                maskDiv.style.borderWidth = defaultConfig.rect.lineWidth + 'px';\n                maskDiv.style.borderStyle = 'solid';\n                maskDiv.style.borderColor = defaultConfig.rect.color;\n            } else if (defaultConfig.html) {\n                maskDiv.innerHTML = defaultConfig.html;\n                maskDiv.style.width = defaultConfig.width + 'px';\n                maskDiv.style.height = defaultConfig.height + 'px';\n            }\n\n            shadowRoot.appendChild(maskDiv)\n        }\n    })\n\n\n    // remove function\n    return () => {\n        $container.removeChild(otDiv);\n    }\n}\n\n// create image watermark\nexport function createImageWatermark(dataUrl, options) {\n    return new Promise((resolve, reject) => {\n        let defaultConfig = formatWatermarkOptions(options);\n\n        if (!defaultConfig.image.src && !defaultConfig.text.content) {\n            return resolve(dataUrl);\n        }\n\n\n        let canvas = document.createElement('canvas')\n        canvas.width = options.width;\n        canvas.height = options.height;\n        let ctx = canvas.getContext('2d')\n        let x = 0;\n        let y = 0;\n        if (isNumber(defaultConfig.left)) {\n            x = defaultConfig.left;\n        } else if (isNumber(defaultConfig.right)) {\n            x = canvas.width - defaultConfig.right\n        }\n\n        if (isNumber(defaultConfig.top)) {\n            y = defaultConfig.top;\n        } else if (isNumber(defaultConfig.bottom)) {\n            y = canvas.height - defaultConfig.bottom;\n        }\n        const imag = new Image();\n        imag.src = dataUrl;\n        imag.onload = () => {\n            ctx.drawImage(imag, 0, 0);\n            if (defaultConfig.image && defaultConfig.image.src) {\n                const tempImage = new Image();\n                tempImage.src = defaultConfig.image.src;\n                tempImage.setAttribute(\"crossOrigin\", 'Anonymous')\n                tempImage.onload = () => {\n                    x -= defaultConfig.image.width;\n                    // y -= defaultConfig.image.height;\n                    ctx.drawImage(tempImage, x, y, defaultConfig.image.width, defaultConfig.image.height);\n                    resolve(canvas.toDataURL(options.format, options.quality));\n                }\n                tempImage.onerror = (e) => {\n                    reject();\n                }\n            } else if (defaultConfig.text && defaultConfig.text.content) {\n                // 设置填充字号和字体，样式\n                ctx.font = defaultConfig.text.fontSize + \"px 宋体\";\n                // color\n                ctx.fillStyle = defaultConfig.text.color;\n                // 设置右对齐\n                ctx.textAlign = 'right';\n                // 在指定位置绘制文字，这里指定距离右下角20坐标的地方\n                ctx.fillText(defaultConfig.text.content, x, y)\n                resolve(canvas.toDataURL(options.format, options.quality))\n            }\n        }\n\n        imag.onerror = (e) => {\n            reject(e)\n        }\n    })\n}\n\nexport function formatTimeTips(time) {\n    var result;\n\n    //\n    if (time > -1) {\n        var hour = Math.floor(time / 3600);\n        var min = Math.floor(time / 60) % 60;\n        var sec = time % 60;\n\n        sec = Math.round(sec);\n\n        if (hour < 10) {\n            result = '0' + hour + \":\";\n        } else {\n            result = hour + \":\";\n        }\n\n        if (min < 10) {\n            result += \"0\";\n        }\n        result += min + \":\";\n        if (sec < 10) {\n            result += \"0\";\n        }\n        result += sec.toFixed(0);\n    }\n\n    return result;\n}\n\n\n//\nexport function createVideoFrame(arrayBuffer, init) {\n    return new VideoFrame(arrayBuffer, init)\n}\n\n\nexport function getLocationSearch() {\n    var url = window.location.search; //获取url中\"?\"符后的字串\n    var theRequest = {};\n    if (url.indexOf(\"?\") != -1) {\n        var str = url.substr(1);\n        var strs = str.split(\"&\");\n        for (var i = 0; i < strs.length; i++) {\n            theRequest[strs[i].split(\"=\")[0]] = unescape(strs[i].split(\"=\")[1]);\n        }\n    }\n    return theRequest;\n};\n\n// min timestamp\nexport function formatMinTimeTips(time, second) {\n    let result = '';\n\n    //\n    if (time > -1) {\n        const hour = Math.floor(time / 60) % 60;\n        let min = time % 60;\n\n        min = Math.round(min);\n\n        if (hour < 10) {\n            result = '0' + hour + \":\";\n        } else {\n            result = hour + \":\";\n        }\n\n        if (min < 10) {\n            result += \"0\";\n        }\n        result += min;\n\n        if (!isEmpty(second)) {\n            if (second < 10) {\n                second = '0' + second;\n            }\n            result += (':' + second);\n        }\n    }\n\n    return result;\n}\n\n// second timestamp\nexport function formatSecondTimeTips(time) {\n    let result = '';\n    if (time > -1) {\n        const hour = Math.floor(time / 60 / 60) % 60;\n        let min = Math.floor(time / 60) % 60;\n        let second = time % 60\n\n        min = Math.round(min);\n\n        if (hour < 10) {\n            result = '0' + hour + \":\";\n        } else {\n            result = hour + \":\";\n        }\n\n        if (min < 10) {\n            result += \"0\";\n        }\n        result += min + ':';\n\n        if (second < 10) {\n            result += '0'\n        }\n        result += second\n    }\n\n    return result;\n}\n\n\nexport function formatSecondTime(time) {\n    let result = {};\n    if (time > -1) {\n        const hour = Math.floor(time / 60 / 60) % 60;\n        let min = Math.floor(time / 60) % 60;\n        let second = time % 60\n        result = {\n            hour,\n            min,\n            second\n        }\n    }\n\n    return result;\n}\n\n/**\n *\n * @param time\n */\nexport function formatMinuteTimestamp(day, time) {\n    const hour = Math.floor(time / 60) % 60;\n    const min = Math.floor(time % 60);\n    const nowMinuteTimestamp = new Date(day).setHours(\n        hour,\n        min,\n        0,\n        0\n    );\n    return nowMinuteTimestamp;\n}\n\nexport function formatSecondTimestamp(day, time) {\n    const hour = Math.floor(time / 60 / 60) % 60;\n    const min = Math.floor(time / 60) % 60;\n    const second = time % 60\n    const nowSecondTimestamp = new Date(day).setHours(\n        hour,\n        min,\n        second,\n        0\n    );\n    return nowSecondTimestamp;\n}\n\nexport function getStrLength(value) {\n    return ('' + value).length\n}\n\n\nexport function isEmptyObject(obj) {\n    return (obj && Object.keys(obj).length === 0)\n}\n\nexport function isNotEmptyObject(obj) {\n    return !isEmptyObject(obj);\n}\n\n\nexport function isString(value) {\n    return typeof value === \"string\";\n}\n\n\nexport function isSupportSIMD() {\n    return WebAssembly.validate(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 5, 1, 96, 0, 1, 123, 3, 2, 1, 0, 10, 10, 1, 8, 0, 65, 0, 253, 15, 253, 98, 11]));\n}\n\nexport function isSupportSharedArrayBuffer() {\n    return typeof SharedArrayBuffer !== 'undefined';\n}\n\n\nexport const isWeChat = () => {\n    const userAgent = window.navigator.userAgent;\n    return /MicroMessenger/i.test(userAgent)\n};\n\nexport const isChrome = () => {\n    const userAgent = window.navigator.userAgent;\n    return /Chrome/i.test(userAgent)\n}\n\n//\nexport const isWeChatInAndroid = () => {\n    return isWeChat() && isAndroid();\n}\n\nexport function isChromeInIOS() {\n    return isChrome() && isIOS();\n}\n\nexport const isWeChatInIOS = () => {\n    return isWeChat() && isIOS();\n}\n\nexport const isMobileOrPad = () => {\n    return isMobile() || isPad();\n}\n\n\nexport function getTarget(e) {\n    const event = e || window.event;\n    const target = event.target || event.srcElement;\n    return target;\n}\n\nconst _mime = function (option, value) {\n    const mimeTypes = navigator.mimeTypes;\n    for (let mt in mimeTypes) {\n        if (mimeTypes[mt][option] == value) {\n            return true;\n        }\n    }\n    return false;\n};\n\nexport function isWindow() {\n    let isWindows = false;\n    const agent = navigator.userAgent.toLowerCase();\n    const isMac = /macintosh|mac os x/i.test(agent);\n    if (agent.indexOf(\"win32\") >= 0 || agent.indexOf(\"wow32\") >= 0) {\n        //your code\n        isWindows = true;\n    }\n    if (agent.indexOf(\"win64\") >= 0 || agent.indexOf(\"wow64\") >= 0) {\n        //your code\n        isWindows = true;\n    }\n    if (isMac) {\n        //your code\n        isWindows = false;\n    }\n\n    return isWindows;\n}\n\nexport function isMacOs() {\n    const userAgent = navigator.userAgent.toLowerCase();\n    return /macintosh|mac os x/i.test(userAgent);\n}\n\nexport function isMacOsFirefox() {\n    return isFirefox() && isMacOs();\n}\n\nexport function isWindow360() {\n    const userAgent = window.navigator.userAgent;\n    let is360 = userAgent.indexOf('QihooBrowser') > -1 ||\n        userAgent.indexOf('QHBrowser') > -1 ||\n        userAgent.indexOf('360EE') > -1 ||\n        userAgent.indexOf('360SE') > -1;\n\n    if (!is360) {\n        if (window.chrome) {\n            const chrome_version = userAgent.replace(/^.*Chrome\\/([\\d]+).*$/, '$1');\n            if (_mime(\"type\", \"application/360softmgrplugin\") || _mime(\"type\", \"application/mozilla-npqihooquicklogin\")) {\n                is360 = true;\n            } else if (chrome_version > 36 && window.showModalDialog) {\n                is360 = true;\n            } else if (chrome_version > 45) {\n                is360 = _mime(\"type\", \"application/vnd.chromium.remoting-viewer\");\n                if (!is360 && chrome_version >= 69) {\n                    is360 = _mime(\"type\", \"application/hwepass2001.installepass2001\") || _mime(\"type\", \"application/asx\");\n                }\n            }\n        }\n    }\n\n    return is360 && isWindow();\n}\n\n\nexport function isFunction(fn) {\n    return typeof fn === \"function\"\n}\n\n\nexport function isSupportOfflineAudioContext() {\n    let offlineAudioContext = new OfflineAudioContext(1, 1, 44100);\n    return Boolean(offlineAudioContext.audioWorklet && typeof offlineAudioContext.audioWorklet.addModule == \"function\")\n}\n\n\nexport function isWebglRenderSupport(width) {\n    return (width / 2) % 4 === 0\n}\n\n/**\n * is green yuv\n * @param arrayBuffer\n * @returns {boolean}\n */\nexport function isGreenYUV(arrayBuffer) {\n    let zeroNum = 0;\n    for (let i = 0; i < arrayBuffer.length; i++) {\n        let temp = arrayBuffer[i];\n        if (temp === 0) {\n            zeroNum += 1\n        }\n    }\n    const isGreen = zeroNum === arrayBuffer.length;\n    if (isGreen) {\n        console.log('green yuv', arrayBuffer)\n    }\n    return isGreen\n}\n\n/**\n *\n * @param event\n * @returns {{posX: number, posY: number}}\n */\nexport function getMousePosition(event) {\n    if (isMobile()) {\n        let clientX = 0;\n        let clientY = 0;\n        if (event.touches.length === 1) {\n            let clientObject = event.touches[0];\n            clientX = clientObject.clientX;\n            clientY = clientObject.clientY;\n        }\n        return {\n            posX: clientX,\n            posY: clientY\n        }\n    }\n    let posX = 0;\n    let posY = 0;\n    const e = event || window.event;  //标准化事件对象\n    if (e.pageX || e.pageY) {  //获取鼠标指针的当前坐标值\n        posX = e.pageX;\n        posY = e.pageY;\n    } else if (e.clientX || e.clientY) {\n        posX = event.clientX + document.documentElement.scrollLeft + document.body.scrollLeft;\n        posY = event.clientY + document.documentElement.scrollTop + document.body.scrollTop;\n    }\n    return {\n        posX,\n        posY\n    }\n}\n\nexport function canPlayAppleMpegurl() {\n    let video = document.createElement('video');\n    let result = video.canPlayType('application/vnd.apple.mpegurl')\n    video = null;\n    return result;\n}\n\n\nexport function isSupportGetUserMedia() {\n    let result = false;\n    const navigator = window.navigator;\n\n    if (navigator) {\n        result = !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia)\n\n        if (!result) {\n            result = !!(navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia)\n        }\n    }\n\n    return result;\n}\n\nexport function onlyMseOrWcsVideo(opt) {\n    let result = (isFalse(opt.hasAudio) &&\n            (opt.useMSE || (opt.useWCS && !opt.useOffscreen))) &&\n        isFalse(opt.demuxUseWorker)\n\n    //  check is mse play audio and video\n    if (isFalse(result) &&\n        (opt.useMSE && opt.mseDecodeAudio && isFalse(opt.demuxUseWorker))) {\n        return true\n    }\n\n    return result\n}\n\nexport function checkNaluType(naluBuffer) {\n    let result = null;\n    let type = naluBuffer[0] & 0b0001_1111;\n    if (type === H264_NAL_TYPE.sps || type === H264_NAL_TYPE.pps) {\n        result = VIDEO_ENC_TYPE_SHOW.h264;\n    }\n    if (!result) {\n        type = (naluBuffer[0] & 0x7E) >> 1;\n        if (type === H265_NAL_TYPE.vps || type === H265_NAL_TYPE.sps || type === H265_NAL_TYPE.pps) {\n            result = VIDEO_ENC_TYPE_SHOW.h265;\n        }\n    }\n\n    return result;\n}\n\n\nexport function checkAudioNaluType(naluBuffer) {\n    let result = null;\n    const codecId = naluBuffer[0] >> 4;\n\n    if (isAacCodecPacket(naluBuffer)) {\n        result = AUDIO_ENC_CODE_SHOW.AAC\n    } else if (codecId === AUDIO_ENC_CODE.ALAW) {\n        result = AUDIO_ENC_CODE_SHOW.ALAW\n    } else if (codecId === AUDIO_ENC_CODE.MULAW) {\n        result = AUDIO_ENC_CODE_SHOW.MULAW\n    }\n\n    return result;\n}\n\n\nexport function createWorkletModuleUrl(func) {\n\n    function functionToString(str) {\n        return str.trim().match(/^function\\s*\\w*\\s*\\([\\w\\s,]*\\)\\s*{([\\w\\W]*?)}$/)[1]\n    }\n\n    const funcStr = functionToString(func.toString());\n    const blob = new Blob([funcStr], {type: 'application/javascript'});\n    return URL.createObjectURL(blob);\n}\n\nexport function supportWritableStream() {\n    return typeof WritableStream !== 'undefined';\n}\n\n\nexport function closeVideoFrame(videoFrame) {\n    videoFrame.close()\n}\n\nexport function isInHttps() {\n    return window.location.protocol === 'https:' || window.location.hostname === 'localhost';\n}\n\nexport function errorToString(error) {\n    const nativeToString = Object.prototype.toString;\n\n    function isErrorLike(error) {\n        switch (nativeToString.call(error)) {\n            case '[object Error]':\n                return true;\n            case '[object Exception]':\n                return true;\n            case '[object DOMException]':\n                return true;\n            default:\n                try {\n                    return error instanceof Error;\n                } catch (e) {\n                    return false;\n                }\n        }\n    }\n\n    if (isErrorLike(error)) {\n        return error.message;\n    } else {\n        return error == null\n            ? '' :\n            typeof error === 'object'\n                ? JSON.stringify(error, null, 2)\n                : String(error)\n    }\n}\n\n\nexport function isInSampleHost(url) {\n    let result = false;\n\n\n    return result;\n}\n\n\nexport function calcStreamFpsByBufferList(bufferList, type) {\n\n    if (type) {\n        bufferList = bufferList.filter(item => item.type && item.type === type)\n    }\n\n    let firstItem = bufferList[0];\n    let oneSecondLength = null;\n    let nextIndex = 1;\n    if (bufferList.length > 0) {\n        let nextItem = bufferList[1];\n        if (nextItem && nextItem.ts - firstItem.ts > 100000) {\n            firstItem = nextItem;\n            nextIndex = 2;\n        }\n    }\n\n    if (firstItem) {\n        // next start\n        for (let i = nextIndex; i < bufferList.length; i++) {\n            let tempItem = bufferList[i];\n            if (type && tempItem.type && tempItem.type !== type) {\n                tempItem = null;\n            }\n            if (tempItem) {\n                const diff = tempItem.ts - firstItem.ts;\n                if (diff >= 1000) {\n                    const prevTempItem = bufferList[i - 1];\n                    const diff2 = prevTempItem.ts - firstItem.ts;\n                    if (diff2 < 1000) {\n                        oneSecondLength = i + 1;\n                    }\n                }\n            }\n        }\n    }\n\n    return oneSecondLength;\n}\n\n\nexport function isFetchSuccess(res) {\n    return (res.ok && (res.status >= 200 && res.status <= 299))\n}\n\n// stroke rect or text in canvas\nexport function strokeRectOrTextInCanvas({ctx, list}) {\n    ctx.save();\n    (list || []).forEach(item => {\n        if (item.type === 'text') {\n            ctx.font = `${item.fontSize || 12}px Arial`;\n            ctx.fillStyle = item.color || 'green';\n            ctx.fillText(item.text, item.x, item.y);\n        } else if (item.type === 'rect') {\n            ctx.strokeStyle = item.color || 'green';\n            ctx.lineWidth = item.lineWidth || 2;\n            ctx.strokeRect(item.x, item.y, item.width, item.height);\n        }\n    })\n    ctx.restore();\n}\n\nexport function hexToRgba(hex) {\n    const r = parseInt(hex.substring(1, 3), 16) / 255;\n    const g = parseInt(hex.substring(3, 5), 16) / 255;\n    const b = parseInt(hex.substring(5, 7), 16) / 255;\n    return [r, g, b, 1.0];\n}\n\nexport function createTransformMatrix(width, height) {\n    return [\n        2 / width, 0, 0,\n        0, -2 / height, 0,\n        -1, 1, 1\n    ];\n}\n\n\n// stroke text in canvas\nexport function strokeTextInCanvas({ctx, color, fontSize, text, x, y}) {\n    ctx.save();\n    ctx.font = `${fontSize || 12}px Arial`;\n    ctx.fillStyle = color || 'green';\n    ctx.fillText(text, x, y);\n    ctx.restore();\n}\n\n\nexport function getRandomInt(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n\nexport function getUrlRelativePath(href) {\n    const url = href || document.location.toString();\n    const arrUrl = url.split(\"//\");\n\n    const start = arrUrl[1].indexOf(\"/\");\n    let relUrl = arrUrl[1].substring(start);//stop省略，截取从start开始到结尾的所有字符\n\n    if (relUrl.indexOf(\"?\") != -1) {\n        relUrl = relUrl.split(\"?\")[0];\n    }\n    return relUrl;\n}\n\nexport function base64Decode(data) {\n    const utf8Decode = function (str_data) {\n        var tmp_arr = [], i = 0, ac = 0, c1 = 0, c2 = 0, c3 = 0;\n        // 变成string类型\n        str_data += '';\n\n        while (i < str_data.length) {\n            c1 = str_data.charCodeAt(i);\n            if (c1 < 128) {\n                tmp_arr[ac++] = String.fromCharCode(c1);\n                i++;\n            } else if (c1 > 191 && c1 < 224) {\n                c2 = str_data.charCodeAt(i + 1);\n                tmp_arr[ac++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\n                i += 2;\n            } else {\n                c2 = str_data.charCodeAt(i + 1);\n                c3 = str_data.charCodeAt(i + 2);\n                tmp_arr[ac++] = String.fromCharCode(((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n                i += 3;\n            }\n        }\n\n        return tmp_arr.join('');\n    };\n\n    const b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n    let o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, dec = \"\", tmp_arr = [];\n    if (!data) {\n        return data;\n    }\n    data += '';\n    do {\n        h1 = b64.indexOf(data.charAt(i++));\n        h2 = b64.indexOf(data.charAt(i++));\n        h3 = b64.indexOf(data.charAt(i++));\n        h4 = b64.indexOf(data.charAt(i++));\n        bits = h1 << 18 | h2 << 12 | h3 << 6 | h4;\n        o1 = bits >> 16 & 0xff;\n        o2 = bits >> 8 & 0xff;\n        o3 = bits & 0xff;\n        if (h3 == 64) {\n            tmp_arr[ac++] = String.fromCharCode(o1);\n        } else if (h4 == 64) {\n            tmp_arr[ac++] = String.fromCharCode(o1, o2);\n        } else {\n            tmp_arr[ac++] = String.fromCharCode(o1, o2, o3);\n        }\n    } while (i < data.length);\n    dec = tmp_arr.join('');\n    dec = utf8Decode(dec);\n    return dec;\n}\n\nexport function b64toUin8(base64String) {\n    var padding = '='.repeat((4 - base64String.length % 4) % 4);\n    var base64 = (base64String + padding)\n        .replace(/\\-/g, '+')\n        .replace(/_/g, '/');\n\n    var rawData = window.atob(base64);\n    var outputArray = new Uint8Array(rawData.length);\n\n    for (var i = 0; i < rawData.length; ++i) {\n        outputArray[i] = rawData.charCodeAt(i);\n    }\n    return outputArray;\n}\n\nexport function base64ToString(base64String) {\n    const padding = '='.repeat((4 - base64String.length % 4) % 4);\n    const base64 = (base64String + padding)\n        .replace(/\\-/g, '+')\n        .replace(/_/g, '/');\n\n    const rawData = window.atob(base64);\n    let result = '';\n\n    for (let i = 0; i < rawData.length; ++i) {\n        result += rawData.charCodeAt(i);\n    }\n    return result;\n}\n\n\nexport function resolveUrl(url) {\n    const msie = /(msie|trident)/i.test(navigator.userAgent);\n    const urlParsingNode = document.createElement('a');\n    let href = url;\n\n    if (msie) {\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n    }\n\n    urlParsingNode.setAttribute('href', href);\n\n\n    return {\n        origin: urlParsingNode.origin,\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n    };\n}\n\n\nexport function uuid4() {\n    return 'xxxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8)\n        return v.toString(16)\n    })\n}\n\nexport function clone(obj) {\n    let result = '';\n    //\n    if (typeof obj === 'object') {\n        try {\n            result = JSON.stringify(obj);\n            result = JSON.parse(result);\n        } catch (e) {\n            result = obj;\n        }\n    } else {\n        result = obj;\n    }\n\n    return result;\n}\n\n/**\n *\n * @returns {object:DEFAULT_JESSIBUCA_OPTIONS}\n */\nexport function getDefaultJessibucaOptions() {\n    return clone(DEFAULT_JESSIBUCA_OPTIONS);\n}\n\n/**\n *\n * @returns {object:DEFAULT_PLAYER_OPTIONS}\n */\nexport function getDefaultPlayerOptions() {\n    return clone(DEFAULT_PLAYER_OPTIONS);\n}\n\n/**\n *\n * @returns {object:DEFAULT_TALK_OPTIONS}\n */\nexport function getDefaultTalkOptions() {\n    return clone(DEFAULT_TALK_OPTIONS);\n}\n\n\n/**\n *\n * @returns {object:CONTROL_BUTTON_OPTIONS}\n */\nexport function getDefaultButtonOptions() {\n    return clone(CONTROL_BUTTON_OPTIONS);\n}\n\n\n/**\n *\n * @returns {object:MENU_ITEM_OPTIONS}\n */\nexport function getDefaultMenuOptions() {\n    return clone(MENU_ITEM_OPTIONS);\n}\n\n\n/**\n *\n * @returns {object:DEFAULT_MULTI_OPTIONS}\n */\nexport function getDefaultMultiOptions() {\n    return clone(DEFAULT_MULTI_OPTIONS);\n}\n\n/**\n *\n * @returns {object:DEFAULT_AUDIO_PLAYER_OPTIONS}\n */\nexport function getDefaultAudioPlayerOptions() {\n    return clone(DEFAULT_AUDIO_PLAYER_OPTIONS);\n}\n\n\nexport function base64ToBlob(base64Data) {\n    const byteString = atob(base64Data.split(\",\")[1]);\n    const mimeType = base64Data.match(/:(.*?);/)[1];\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for (let i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([ab], {type: mimeType});\n}\n\nexport function createCanvasImage(base64Data) {\n    return new Promise((resolve, reject) => {\n        const canvas = document.createElement(\"canvas\");\n        const context = canvas.getContext(\"2d\");\n\n        const image = new Image();\n        image.onload = () => {\n            canvas.width = image.width;\n            canvas.height = image.height;\n            context.drawImage(image, 0, 0);\n            const posterUrl = canvas.toDataURL(\"image/png\");\n            // clear\n            context.clearRect(0, 0, canvas.width, canvas.height);\n            canvas.width = 0;\n            canvas.height = 0;\n            //\n            resolve(posterUrl);\n        };\n        image.onerror = (e) => {\n            reject(e)\n        }\n        image.src = base64Data;\n    })\n}\n\n\nexport function isVideoSequenceHeader(payload) {\n    return (payload[0] >> 4) === FRAME_TYPE.keyFrame && payload[1] === AVC_PACKET_TYPE.sequenceHeader;\n}\n\n\nexport function isTrue(value) {\n    return value === true || value === 'true';\n}\n\nexport function isFalse(value) {\n    return value !== true && value !== 'true';\n}\n\nexport function isWebGpuSupport() {\n    let result = false;\n    if ('gpu' in navigator) {\n        result = true;\n    }\n    return result;\n}\n\n\nexport function toString(value) {\n    return value == null ? '' : '' + value;\n\n}\n\nexport function sleep(t = 0) {\n    return new Promise((resolve) => setTimeout(resolve, t))\n}\n\n\nexport function setElementDataset(element, key, value) {\n    if (!element) {\n        return;\n    }\n\n    if (element.dataset) {\n        element.dataset[key] = value;\n    } else {\n        element.setAttribute('data-' + key, value);\n    }\n}\n\nexport function getElementDataset(element, key) {\n    if (!element) {\n        return '';\n    }\n\n    if (element.dataset) {\n        return element.dataset[key];\n    }\n    return element.getAttribute('data-' + key);\n}\n\nexport function removeElementDataset(element, key) {\n    if (!element) {\n        return;\n    }\n\n    if (element.dataset) {\n        delete element.dataset[key];\n    } else {\n        element.removeAttribute('data-' + key);\n    }\n}\n\nexport function convertToCamelCase(str) {\n    return str.replace(/-([a-z])/g, function (match, letter) {\n        return letter.toUpperCase();\n    });\n}\n\n\nexport function isHlsSupported() {\n\n}\n\n//  是否iphone 手机端\nexport function isIphone() {\n    return /iphone/i.test(navigator.userAgent);\n}\n\n//\nexport function getPerformanceMemory() {\n    if (window.performance && window.performance.memory) {\n        return window.performance.memory;\n    }\n    return null;\n}\n\n\nexport function arraysEqual(array1, array2) {\n    if (array1.length !== array2.length) {\n        return false;\n    }\n    for (let i = 0; i < array1.length; i++) {\n        if (array1[i] !== array2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nexport function getArrayBufferBytes(arrayBuffer, start, end) {\n    const result = [];\n    for (let i = start; i < end; i++) {\n        result.push(arrayBuffer[i]);\n    }\n    return result;\n}\n\n\nexport function dropSpecialMp4Box(arrayBuffer) {\n    const newBuffer = new Uint8Array(32);\n    newBuffer.set(arrayBuffer.slice(arrayBuffer.byteLength - 32));\n    const tempBuffer = getArrayBufferBytes(newBuffer, 4, 8);\n    if (arraysEqual([101, 103, 119, 99], tempBuffer)) {\n        return arrayBuffer.slice(0, arrayBuffer.byteLength - 32);\n    }\n\n    return arrayBuffer;\n}\n\n\nexport function isWebGL2Supported() {\n    try {\n        var canvas = document.createElement('canvas');\n        return !!(\n            window.WebGL2RenderingContext &&\n            canvas.getContext('webgl2')\n        );\n    } catch (e) {\n        return false;\n    }\n}\n\n\nexport function isWebGLSupported() {\n    try {\n        var canvas = document.createElement('canvas');\n        return !!(\n            window.WebGLRenderingContext &&\n            (canvas.getContext('webgl') || canvas.getContext('experimental-webgl'))\n        );\n    } catch (e) {\n        return false;\n    }\n}\n\nexport function function2String(fun) {\n    return fun.trim().match(/^function\\s*\\w*\\s*\\([\\w\\s,]*\\)\\s*{([\\w\\W]*?)}$/)[1]\n}\n\n\nexport function supportVideoFrameCallback() {\n    let result = false;\n    if (\"requestVideoFrameCallback\" in HTMLVideoElement.prototype) {\n        result = true;\n    }\n\n    return result;\n}\n\n//\nexport function blobToArrayBuffer(blob) {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = function (e) {\n            resolve(e.target.result);\n        }\n        reader.onerror = function (e) {\n            reject(e);\n        }\n        reader.readAsArrayBuffer(blob);\n    })\n}\n\n\n/**\n * 将一帧图像划分为两部分，上下各一半；然后在其中一般随机选择10*10的部分进行检测，如果检测到绿色像素点超过200个，则认为是绿屏\n * @param arraybuffer\n * @param width\n * @param height\n * @returns {boolean}\n */\nexport function checkGreenScreen(arraybuffer, width, height) {\n    if (!arraybuffer || width <= 0 || height <= 0) {\n        return true;\n    }\n    const x1 = Math.random() % (width - 9);\n    const y1 = Math.random() % (height / 2 - 9);\n\n    const x2 = Math.random() % (width - 9);\n    const y2 = Math.random() % (height / 2 - 9) + height / 2;\n\n    let zeroCount = 0;\n    for (let j = y1; j < y1 + 10; j++) {\n        for (let i = x1; i < x1 + 10; i++) {\n            const index = j * width + i;\n            if (arraybuffer[index] === 0) {\n                zeroCount += 1;\n            }\n        }\n    }\n\n    for (let j = y2; j < y2 + 10; j++) {\n        for (let i = x2; i < x2 + 10; i++) {\n            const index = j * width + i;\n            if (arraybuffer[index] === 0) {\n                zeroCount += 1;\n            }\n        }\n    }\n\n    if (zeroCount > 200) {\n        return true;\n    }\n\n    return false;\n}\n\n\nexport function supportPressureObserver() {\n    let result = false;\n    //  or use 'globalThis' support\n    if ('PressureObserver' in window) {\n        result = true;\n    }\n    return result;\n}\n\n\nexport function removeMaxAndMin(arr) {\n    // 寻找最大值和最小值\n    const max = Math.max(...arr);\n    const min = Math.min(...arr);\n\n    // 使用filter过滤掉最大值和最小值\n    // 注意：这将仅删除第一个遇到的最大值和最小值\n    return arr.filter(value => value !== max && value !== min);\n}\n\n\nexport function supportMSEForWorker() {\n    return (self.Worker &&\n        self.MediaSource &&\n        ('canConstructInDedicatedWorker' in self.MediaSource) &&\n        self.MediaSource['canConstructInDedicatedWorker'] === true) ? true : false;\n}\n\n\nexport function hasUnitTypeIDR(payload, isHevc) {\n    const units = parseAvcC(payload.slice(5));\n    let hasIDR = false;\n    units.forEach((unit) => {\n        const type = isHevc ? (unit[0] >>> 1) & 0x3f : unit[0] & 0x1f;\n        //  IDR IRAP\n        if ((isHevc && (type === H265_NAL_TYPE.iFrame || type === H265_NAL_TYPE.nLp || type === H265_NAL_TYPE.craNut)) ||\n            (isFalse(isHevc) && type === H264_NAL_TYPE.iFrame)) {\n            hasIDR = true;\n        }\n    })\n    return hasIDR;\n}\n","export default class Resampler {\n    constructor(options) {\n        const {fromSampleRate, toSampleRate, channels, inputBufferSize} = options;\n\n        if (!fromSampleRate || !toSampleRate || !channels) {\n            throw(new Error(\"Invalid settings specified for the resampler.\"));\n        }\n        this.resampler = null;\n        this.fromSampleRate = fromSampleRate;\n        this.toSampleRate = toSampleRate;\n        this.channels = channels || 0;\n        this.inputBufferSize = inputBufferSize;\n        this.initialize()\n    }\n\n    initialize() {\n        if (this.fromSampleRate == this.toSampleRate) {\n\n            // Setup resampler bypass - Resampler just returns what was passed through\n            this.resampler = (buffer) => {\n                return buffer\n            };\n            this.ratioWeight = 1;\n\n        } else {\n\n            if (this.fromSampleRate < this.toSampleRate) {\n\n                // Use generic linear interpolation if upsampling,\n                // as linear interpolation produces a gradient that we want\n                // and works fine with two input sample points per output in this case.\n                this.linearInterpolation();\n                this.lastWeight = 1;\n\n            } else {\n\n                // Custom resampler I wrote that doesn't skip samples\n                // like standard linear interpolation in high downsampling.\n                // This is more accurate than linear interpolation on downsampling.\n                this.multiTap();\n                this.tailExists = false;\n                this.lastWeight = 0;\n            }\n\n            // Initialize the internal buffer:\n            this.initializeBuffers();\n            this.ratioWeight = this.fromSampleRate / this.toSampleRate;\n        }\n    }\n\n    bufferSlice(sliceAmount) {\n\n        //Typed array and normal array buffer section referencing:\n        try {\n            return this.outputBuffer.subarray(0, sliceAmount);\n        } catch (error) {\n            try {\n                //Regular array pass:\n                this.outputBuffer.length = sliceAmount;\n                return this.outputBuffer;\n            } catch (error) {\n                //Nightly Firefox 4 used to have the subarray function named as slice:\n                return this.outputBuffer.slice(0, sliceAmount);\n            }\n        }\n    }\n\n    initializeBuffers() {\n        this.outputBufferSize = (Math.ceil(this.inputBufferSize * this.toSampleRate / this.fromSampleRate / this.channels * 1.000000476837158203125) + this.channels) + this.channels;\n        try {\n            this.outputBuffer = new Float32Array(this.outputBufferSize);\n            this.lastOutput = new Float32Array(this.channels);\n        } catch (error) {\n            this.outputBuffer = [];\n            this.lastOutput = [];\n        }\n    }\n\n    linearInterpolation() {\n        this.resampler = (buffer) => {\n            let bufferLength = buffer.length,\n                channels = this.channels,\n                outLength,\n                ratioWeight,\n                weight,\n                firstWeight,\n                secondWeight,\n                sourceOffset,\n                outputOffset,\n                outputBuffer,\n                channel;\n\n            if ((bufferLength % channels) !== 0) {\n                throw(new Error(\"Buffer was of incorrect sample length.\"));\n            }\n            if (bufferLength <= 0) {\n                return [];\n            }\n\n            outLength = this.outputBufferSize;\n            ratioWeight = this.ratioWeight;\n            weight = this.lastWeight;\n            firstWeight = 0;\n            secondWeight = 0;\n            sourceOffset = 0;\n            outputOffset = 0;\n            outputBuffer = this.outputBuffer;\n\n            for (; weight < 1; weight += ratioWeight) {\n                secondWeight = weight % 1;\n                firstWeight = 1 - secondWeight;\n                this.lastWeight = weight % 1;\n                for (channel = 0; channel < this.channels; ++channel) {\n                    outputBuffer[outputOffset++] = (this.lastOutput[channel] * firstWeight) + (buffer[channel] * secondWeight);\n                }\n            }\n            weight -= 1;\n            for (bufferLength -= channels, sourceOffset = Math.floor(weight) * channels; outputOffset < outLength && sourceOffset < bufferLength;) {\n                secondWeight = weight % 1;\n                firstWeight = 1 - secondWeight;\n                for (channel = 0; channel < this.channels; ++channel) {\n                    outputBuffer[outputOffset++] = (buffer[sourceOffset + ((channel > 0) ? (channel) : 0)] * firstWeight) + (buffer[sourceOffset + (channels + channel)] * secondWeight);\n                }\n                weight += ratioWeight;\n                sourceOffset = Math.floor(weight) * channels;\n            }\n            for (channel = 0; channel < channels; ++channel) {\n                this.lastOutput[channel] = buffer[sourceOffset++];\n            }\n            return this.bufferSlice(outputOffset);\n        };\n    }\n\n    multiTap() {\n        this.resampler = (buffer) => {\n            let bufferLength = buffer.length,\n                outLength,\n                output_variable_list,\n                channels = this.channels,\n                ratioWeight,\n                weight,\n                channel,\n                actualPosition,\n                amountToNext,\n                alreadyProcessedTail,\n                outputBuffer,\n                outputOffset,\n                currentPosition;\n\n            if ((bufferLength % channels) !== 0) {\n                throw(new Error(\"Buffer was of incorrect sample length.\"));\n            }\n            if (bufferLength <= 0) {\n                return [];\n            }\n\n            outLength = this.outputBufferSize;\n            output_variable_list = [];\n            ratioWeight = this.ratioWeight;\n            weight = 0;\n            actualPosition = 0;\n            amountToNext = 0;\n            alreadyProcessedTail = !this.tailExists;\n            this.tailExists = false;\n            outputBuffer = this.outputBuffer;\n            outputOffset = 0;\n            currentPosition = 0;\n\n            for (channel = 0; channel < channels; ++channel) {\n                output_variable_list[channel] = 0;\n            }\n\n            do {\n                if (alreadyProcessedTail) {\n                    weight = ratioWeight;\n                    for (channel = 0; channel < channels; ++channel) {\n                        output_variable_list[channel] = 0;\n                    }\n                } else {\n                    weight = this.lastWeight;\n                    for (channel = 0; channel < channels; ++channel) {\n                        output_variable_list[channel] = this.lastOutput[channel];\n                    }\n                    alreadyProcessedTail = true;\n                }\n                while (weight > 0 && actualPosition < bufferLength) {\n                    amountToNext = 1 + actualPosition - currentPosition;\n                    if (weight >= amountToNext) {\n                        for (channel = 0; channel < channels; ++channel) {\n                            output_variable_list[channel] += buffer[actualPosition++] * amountToNext;\n                        }\n                        currentPosition = actualPosition;\n                        weight -= amountToNext;\n                    } else {\n                        for (channel = 0; channel < channels; ++channel) {\n                            output_variable_list[channel] += buffer[actualPosition + ((channel > 0) ? channel : 0)] * weight;\n                        }\n                        currentPosition += weight;\n                        weight = 0;\n                        break;\n                    }\n                }\n\n                if (weight === 0) {\n                    for (channel = 0; channel < channels; ++channel) {\n                        outputBuffer[outputOffset++] = output_variable_list[channel] / ratioWeight;\n                    }\n                } else {\n                    this.lastWeight = weight;\n                    for (channel = 0; channel < channels; ++channel) {\n                        this.lastOutput[channel] = output_variable_list[channel];\n                    }\n                    this.tailExists = true;\n                    break;\n                }\n            } while (actualPosition < bufferLength && outputOffset < outLength);\n            return this.bufferSlice(outputOffset);\n        };\n    }\n\n    resample(buffer) {\n        if (this.fromSampleRate == this.toSampleRate) {\n            this.ratioWeight = 1;\n        } else {\n            if (this.fromSampleRate < this.toSampleRate) {\n                this.lastWeight = 1;\n            } else {\n                this.tailExists = false;\n                this.lastWeight = 0;\n            }\n            this.initializeBuffers();\n            this.ratioWeight = this.fromSampleRate / this.toSampleRate;\n        }\n        return this.resampler(buffer)\n    }\n}\n","/**\n * 将无符号Float32Array数组转化成有符号的Int16Array数组\n * @param {Float32Array} input unsinged Float32Array\n * @return {Int16Array} singed int16\n */\nexport function floatTo16BitPCM(input) {\n    let i = input.length;\n    let output = new Int16Array(i);\n    while (i--) {\n        let s = Math.max(-1, Math.min(1, input[i]));\n        output[i] = (s < 0 ? s * 0x8000 : s * 0x7FFF);\n    }\n    return output;\n}\n\n/**\n * 将有符号的Int16Array数组转化成无符号Float32Array数组\n * @param {Int16Array} input singed int16\n * @return {Float32Array}  // unsinged float32\n */\nexport function int16ToFloat32BitPCM(input) {\n    let i = input.length;\n    let output = new Float32Array(i);\n    while (i--) {\n        let int = input[i];\n        output[i] = (int >= 0x8000) ? -(0x10000 - int) / 0x8000 : int / 0x7FFF;\n    }\n    return output;\n}\n\n/**\n * 将无符号Float32Array数组转化成有符号的Int8Array数组\n * @param {Float32Array} input unsinged Float32Array\n * @return {Int8Array} singed int8\n */\nexport function floatTo8BitPCM(input) {\n    let i = input.length;\n    let output = new Int8Array(i);\n    while (i--) {\n        let s = Math.max(-1, Math.min(1, input[i]));\n        const temp = (s < 0 ? s * 0x8000 : s * 0x7FFF);\n        output[i] = parseInt(255 / (65535 / (32768 + temp)), 10)\n    }\n    return output;\n}\n\n/**\n * 将有符号的Int8Array数组转化成无符号Float32Array数组\n * @param {Int8Array} singed int8\n * @return {Float32Array}  // unsinged float32\n */\nexport function int8ToFloat32BitPCM(input) {\n    let i = input.length;\n    let output = new Float32Array(i);\n\n    return output;\n}\n\n/**\n * 将24位PCM转换为8位PCM：\n * @param input\n * @returns {Uint8Array}\n */\nexport function int24ToUnit8BitPCM(input) {\n    let pcm8Data = new Uint8Array(input.length / 3);\n\n    for (let i = 0, j = 0; i < input.length; i += 3, j++) {\n        // 只取每个24位样本的最高8位\n        pcm8Data[j] = input[i + 2];\n    }\n\n    return pcm8Data;\n}\n\n/**\n * 将24位PCM转换为8位PCM：v2 版本\n * @param input\n * @returns {Uint8Array}\n */\nexport function int24ToUnit8BitPCM$2(input) {\n    const pcm8 = new Uint8Array(input.length / 3);\n    for (let i = 0, j = 0; j < input.length; i++) {\n        //24bit pcm转成浮点数\n        let n = ((input[j++] | (input[j++] << 8) | (input[j++] << 16)) << 8) >> 8;\n        n = n / 16777216;\n        //浮点数转成8位\n        pcm8[i] = ((n * 0x7FFF) >> 8) + 128;\n    }\n\n    return pcm8;\n}\n\n/**\n * 将24位PCM转换为16位PCM：\n *\n * @param input\n * @returns {Uint16Array}\n */\nexport function int24ToInt16BitPcm(input) {\n    const pcm16Data = new Uint16Array(input.length / 3 * 2);\n\n    for (let i = 0, j = 0; i < input.length; i += 3, j += 2) {\n        // 取每个24位样本的最高16位，低位在前，高位在后\n        pcm16Data[j] = input[i + 1] | (input[i + 2] << 8);\n    }\n\n    return pcm16Data;\n}\n\n/**\n * 将24位PCM转换为16位PCM v2 版本\n * @param input\n * @returns {Int16Array}\n */\nexport function int24ToInt16BitPcm$2(input) {\n    const pcm16 = new Int16Array(input.length / 3);\n    for (let i = 0, j = 0; j < input.length; i++) {\n        //24bit pcm转成浮点数\n        let n = ((input[j++] | (input[j++] << 8) | (input[j++] << 16)) << 8) >> 8;\n        n = n / 16777216;\n        //浮点数转成16位\n        pcm16[i] = n * 0x7FFF;\n    }\n\n    return pcm16;\n}\n\n\n/**\n *\n * @param input\n */\nexport function int8ToInt24BitPcm(input) {\n    const pcm24 = new Uint8Array(input.length * 3);\n    for (let i = 0, j = 0; i < input.length; i++) {\n        const n = ((input[i] - 128) << 8) / 0x7FFF * 16777216; //8位的多一步先转成16位\n\n        pcm24[j++] = n & 0xff;\n        pcm24[j++] = (n & 0xff00) >> 8;\n        pcm24[j++] = (n & 0xff0000) >> 16;\n    }\n    return pcm24;\n}\n\n/**\n *\n * @param input\n */\nexport function int16ToInt24BitPcm(input) {\n    const pcm24 = new Uint8Array(input.length * 3);\n    for (let i = 0, j = 0; i < input.length; i++) {\n        const n = input[i] / 0x7FFF * 16777216;\n        pcm24[j++] = n & 0xff;\n        pcm24[j++] = (n & 0xff00) >> 8;\n        pcm24[j++] = (n & 0xff0000) >> 16;\n    }\n    return pcm24;\n}\n\n\n\nexport function readBig32 (data, i = 0) {\n    return (data[i] << 24 >>> 0) + (data[i + 1] << 16) + (data[i + 2] << 8) + (data[i + 3] || 0)\n}\n","import {AUDIO_ENC_CODE} from \"../constant\";\n\nconst SIGN_BIT = 0x80;\nconst QUANT_MASK = 0xf;\nconst NSEGS = 8;\nconst SEG_SHIFT = 4;\nconst SEG_MASK = 0x70;\nconst BIAS = 0x84;\nconst segEnd = [0xFF, 0x1FF, 0x3FF, 0x7FF, 0xFFF, 0x1FFF, 0x3FFF, 0x7FFF]\n\n\nfunction _search(val, table, size) {\n    for (let i = 0; i < size; i++) {\n        if (val <= table[i]) {\n            return i;\n        }\n    }\n    return size\n}\n\n// alaw\nfunction _linear2alaw(pcmVal) {\n    let mask;\n    let seg;\n    let aval;\n    if (pcmVal >= 0) {\n        mask = 0xD5\n    } else {\n        mask = 0x55\n\n        // pcmVal = -pcmVal - 8;\n        pcmVal = (-pcmVal - 1)\n        if (pcmVal < 0) {\n            pcmVal = 32767\n        }\n    }\n    /* Convert the scaled magnitude to segment number. */\n    seg = _search(pcmVal, segEnd, 8)\n\n    if (seg >= 8) {\n        return (0x7F ^ mask);\n    } else {\n        aval = (seg << SEG_SHIFT);\n\n        if (seg < 2) {\n            aval |= ((pcmVal >> 4) & QUANT_MASK);\n        } else {\n            aval |= ((pcmVal >> (seg + 3)) & QUANT_MASK);\n        }\n        return (aval ^ mask)\n    }\n}\n\nfunction _alaw2linear(aVal) {\n    let t;\n    let seg;\n\n    aVal ^= 0x55;\n    t = ((aVal & QUANT_MASK) << 4)\n    seg = ((aVal & SEG_MASK) >> SEG_SHIFT);\n    switch (seg) {\n        case 0:\n            t += 8;\n            break;\n        case 1:\n            t += 0x108;\n            break;\n        default:\n            t += 0x108;\n            t <<= seg - 1;\n    }\n    return ((aVal & SIGN_BIT) != 0 ? t : -t);\n}\n\n\n// ulaw\nfunction _linear2ulaw(pcmVal) {\n    let mask = 0;\n    if (pcmVal < 0) {\n        pcmVal = BIAS - pcmVal;\n        mask = 0x7F;\n    } else {\n        pcmVal += BIAS;\n        mask = 0xFF;\n    }\n    let seg = _search(pcmVal, segEnd, 8)\n    if (seg >= 8) {\n        return (0x7F ^ mask)\n    } else {\n        let uval = (seg << 4) | ((pcmVal >> (seg + 3)) & 0xF)\n        return (uval ^ mask)\n    }\n}\n\nfunction _ulaw2linear(uVal) {\n    uVal = ~uVal;\n    let t = ((uVal & QUANT_MASK) << 3) + BIAS;\n    t <<= ((uVal & SEG_MASK) >> SEG_SHIFT)\n    return ((uVal & SIGN_BIT) ? (BIAS - t) : (t - BIAS));\n}\n\n// pcm to g711a\nexport function g711aEncoder(typedArray) {\n    const g711Array = [];\n    const tempArray = Array.prototype.slice.call(typedArray);\n    tempArray.forEach((i, index) => {\n        g711Array[index] = _linear2alaw(i)\n    })\n    return g711Array;\n}\n\n// g711a to pcm(float32Array)\nexport function g711aDecoder(array) {\n    const pcmArray = [];\n    array.forEach((i) => {\n        pcmArray[i] = _alaw2linear(i)\n    })\n    //\n    return pcmArray;\n}\n\n// g711u\nexport function g711uEncoder(typedArray) {\n    const g711Array = [];\n    const tempArray = Array.prototype.slice.call(typedArray);\n    tempArray.forEach((i, index) => {\n        g711Array[index] = _linear2ulaw(i)\n    })\n    return g711Array;\n}\n\n// g711u\nexport function g711uDecoder(array) {\n    const pcmArray = [];\n    array.forEach((i) => {\n        pcmArray[i] = _ulaw2linear(i)\n    })\n    //\n    return pcmArray;\n}\n\nexport function g711EncoderNalePacket(arrayItem) {\n    return arrayItem;\n}\n\nexport function isG711CodecPacket(payload) {\n    const codecId = (payload[0] >> 4)\n    return codecId === AUDIO_ENC_CODE.ALAW || codecId === AUDIO_ENC_CODE.MULAW\n}\n","import {DEBUG_LEVEL} from \"../constant\";\n\nexport default class Debug {\n    constructor(master) {\n        this.log = (name, ...args) => {\n            if (master._opt.debug && master._opt.debugLevel == DEBUG_LEVEL.debug) {\n                const prefix = master._opt.debugUuid ? `[${master._opt.debugUuid}]` : '';\n                console.log(`JbPro${prefix}[\\u2705\\u2705\\u2705][${name}]`, ...args);\n            }\n        };\n\n        this.warn = (name, ...args) => {\n            if (master._opt.debug && (master._opt.debugLevel == DEBUG_LEVEL.debug || master._opt.debugLevel == DEBUG_LEVEL.warn)) {\n                const prefix = master._opt.debugUuid ? `[${master._opt.debugUuid}]` : '';\n                console.log(`JbPro${prefix}[\\u2757\\u2757\\u2757][${name}]`, ...args);\n            }\n        };\n\n        this.error = (name, ...args) => {\n            const prefix = master._opt.debugUuid ? `[${master._opt.debugUuid}]` : '';\n            console.error(`JbPro${prefix}[\\u274C\\u274C\\u274C][${name}]`, ...args);\n\n            // if (master.addMemoryLog) {\n            //     master.addMemoryLog(`[${name}]`, ...args);\n            // }\n        };\n    }\n}\n","import {isFunction} from \"./index\";\n\nexport default class Events {\n    constructor(master) {\n        this.destroys = [];\n        this.proxy = this.proxy.bind(this);\n        this.master = master;\n    }\n\n    proxy(target, name, callback, option = {}) {\n        if (!target) {\n            return;\n        }\n        if (Array.isArray(name)) {\n            return name.map(item => this.proxy(target, item, callback, option));\n        }\n        target.addEventListener(name, callback, option);\n        const destroy = () => {\n            if (isFunction(target.removeEventListener)) {\n                target.removeEventListener(name, callback, option)\n            }\n        };\n        this.destroys.push(destroy);\n        return destroy;\n    }\n\n    destroy() {\n        this.master.debug && this.master.debug.log(`Events`, 'destroy');\n        this.destroys.forEach(event => event());\n        this.destroys = [];\n    }\n}\n","import Emitter from \"../utils/emitter\";\nimport {\n    clamp,\n    createWorkletModuleUrl,\n    getDefaultTalkOptions,\n    isEmpty, isPc,\n    isSupportGetUserMedia, isTrue,\n    now,\n    uuid16\n} from \"../utils\";\nimport {\n    DEFAULT_TALK_OPTIONS,\n    EVENTS,\n    EVENTS_ERROR,\n    RTP_PAYLOAD_TYPE,\n    TALK_ENC_TYPE, TALK_ENGINE, TALK_PACKAGE_TCP_SEND_TYPE,\n    TALK_PACKET_TYPE, URL_OBJECT_CLEAR_TIME,\n    WEBSOCKET_EVENTS,\n    WEBSOCKET_STATUS\n} from \"../constant\";\nimport Resampler from \"../utils/resampler\";\nimport {floatTo16BitPCM, floatTo8BitPCM} from \"../utils/arraybuffer\";\nimport {g711aEncoder, g711uEncoder} from \"../utils/g711\";\nimport Debug from \"../utils/debug\";\nimport Events from \"../utils/events\";\n\n\nexport default class Talk extends Emitter {\n    constructor(player, options = {}) {\n        super()\n        /**@type {import('./constant').DEFAULT_TALK_OPTIONS}*/\n        this._opt = {};\n\n        if (player) {\n            this.player = player;\n        }\n        this.tag = 'talk';\n        const defaultOptions = getDefaultTalkOptions();\n\n        this._opt = Object.assign({}, defaultOptions, options);\n\n        this._opt.sampleRate = parseInt(this._opt.sampleRate, 10);\n        this._opt.sampleBitsWidth = parseInt(this._opt.sampleBitsWidth, 10);\n        this.audioContext = null;\n        this.gainNode = null;\n        this.recorder = null;\n        this.workletRecorder = null;\n        this.biquadFilter = null;\n        this.userMediaStream = null;\n        this.clearWorkletUrlTimeout = null;\n        // buffersize\n        this.bufferSize = 512; //\n        this._opt.audioBufferLength = this.calcAudioBufferLength();\n        this.audioBufferList = [];\n        // socket\n        this.socket = null;\n        this.socketStatus = WEBSOCKET_STATUS.notConnect;\n\n        //\n        this.mediaStreamSource = null;\n        this.heartInterval = null;\n        this.checkGetUserMediaTimeout = null;\n        this.wsUrl = null;\n        this.startTimestamp = 0;\n\n        // 报文数据\n        this.sequenceId = 0;\n        this.tempTimestamp = null;\n        this.tempRtpBufferList = [];\n        this.events = new Events(this);\n\n        this._initTalk();\n        //\n        if (!this.player) {\n            this.debug = new Debug(this)\n        }\n\n        if ((this._opt.encType === TALK_ENC_TYPE.g711a || this._opt.encType === TALK_ENC_TYPE.g711u) &&\n            !(this._opt.sampleRate === 8000 && this._opt.sampleBitsWidth === 16)) {\n            this.warn(this.tag, `\n            encType is ${this._opt.encType} and sampleBitsWidth is ${this._opt.sampleBitsWidth}, set sampleBitsWidth to ${this._opt.sampleBitsWidth}。\n            ${this._opt.encType} only support sampleRate 8000 and sampleBitsWidth 16`);\n        }\n\n\n        this.log(this.tag, 'init', JSON.stringify(this._opt))\n    }\n\n    destroy() {\n\n        if (this.clearWorkletUrlTimeout) {\n            clearTimeout(this.clearWorkletUrlTimeout);\n            this.clearWorkletUrlTimeout = null;\n        }\n\n        //\n        if (this.userMediaStream) {\n            this.userMediaStream.getTracks && this.userMediaStream.getTracks().forEach((track) => {\n                track.stop()\n            })\n            this.userMediaStream = null;\n        }\n\n        if (this.mediaStreamSource) {\n            this.mediaStreamSource.disconnect();\n            this.mediaStreamSource = null;\n        }\n        if (this.recorder) {\n            this.recorder.disconnect();\n            this.recorder.onaudioprocess = null;\n            this.recorder = null;\n        }\n\n        if (this.biquadFilter) {\n            this.biquadFilter.disconnect();\n            this.biquadFilter = null;\n        }\n\n        if (this.gainNode) {\n            this.gainNode.disconnect();\n            this.gainNode = null;\n        }\n\n        if (this.workletRecorder) {\n            this.workletRecorder.disconnect();\n            this.workletRecorder = null;\n        }\n\n        if (this.socket) {\n            if (this.socketStatus === WEBSOCKET_STATUS.open) {\n                this._sendClose();\n            }\n            this.socket.close();\n            this.socket = null;\n        }\n        this._stopHeartInterval();\n        this._stopCheckGetUserMediaTimeout();\n        this.audioContext = null;\n        this.gainNode = null;\n        this.recorder = null;\n        this.audioBufferList = [];\n        this.sequenceId = 0;\n        this.wsUrl = null;\n        this.tempTimestamp = null;\n        this.tempRtpBufferList = [];\n        this.startTimestamp = 0;\n\n        this.log('talk', 'destroy');\n    }\n\n    addRtpToBuffer(rtp) {\n        const len = rtp.length + this.tempRtpBufferList.length;\n        const buffer = new Uint8Array(len);\n        buffer.set(this.tempRtpBufferList, 0);\n        buffer.set(rtp, this.tempRtpBufferList.length);\n        this.tempRtpBufferList = buffer;\n        //console.log('addRtpToBuffer length and byteLength ', this.tempRtpBufferList.length, this.tempRtpBufferList.byteLength)\n    }\n\n    downloadRtpFile() {\n        const blob = new Blob([this.tempRtpBufferList]);\n        try {\n            const oa = document.createElement('a');\n            oa.href = window.URL.createObjectURL(blob);\n            oa.download = Date.now() + '.rtp';\n            oa.click();\n            window.URL.revokeObjectURL(oa.href);\n        } catch (e) {\n            console.error('downloadRtpFile', e);\n        }\n    }\n\n    calcAudioBufferLength() {\n        const {sampleRate, sampleBitsWidth} = this._opt;\n        //  默认走的是 20ms 8000 采样率 16 位精度\n        return ((sampleRate * 8) * (20 / 1000)) / 8;\n    }\n\n    get socketStatusOpen() {\n        return this.socketStatus === WEBSOCKET_STATUS.open;\n    }\n\n    log(...args) {\n        this._log('log', ...args)\n    }\n\n    warn(...args) {\n        this._log('warn', ...args)\n    }\n\n    error(...args) {\n        this._log('error', ...args)\n    }\n\n    _log(type, ...args) {\n        if (this.player) {\n            this.player.debug[type](...args);\n\n        } else if (this.debug) {\n            this.debug[type](...args);\n        } else {\n            console[type](...args);\n        }\n    }\n\n    _getSequenceId() {\n        return ++this.sequenceId\n    }\n\n    _createWebSocket() {\n        return new Promise((resolve, reject) => {\n            const proxy = this.events.proxy;\n            this.socket = new WebSocket(this.wsUrl);\n            this.socket.binaryType = 'arraybuffer';\n            this.emit(EVENTS.talkStreamStart);\n\n            proxy(this.socket, WEBSOCKET_EVENTS.open, () => {\n                this.socketStatus = WEBSOCKET_STATUS.open;\n                this.log(this.tag, 'websocket open -> do talk');\n                this.emit(EVENTS.talkStreamOpen);\n                resolve();\n                this._doTalk();\n            })\n\n            proxy(this.socket, WEBSOCKET_EVENTS.message, (event) => {\n                this.log(this.tag, 'websocket message', event.data);\n            })\n\n            proxy(this.socket, WEBSOCKET_EVENTS.close, (e) => {\n                this.socketStatus = WEBSOCKET_STATUS.close;\n                this.warn(this.tag, 'websocket close -> reject', e);\n                this.emit(EVENTS.talkStreamClose);\n                reject(e);\n            })\n            proxy(this.socket, WEBSOCKET_EVENTS.error, (error) => {\n                this.socketStatus = WEBSOCKET_STATUS.error;\n                this.error(this.tag, 'websocket error -> reject', error)\n                this.emit(EVENTS.talkStreamError, error);\n                reject(error);\n            })\n        })\n    }\n\n    _sendClose() {\n\n    }\n\n\n    _initTalk() {\n\n        this._initMethods();\n        if (this._opt.engine === TALK_ENGINE.worklet) {\n            this._initWorklet();\n        } else if (this._opt.engine === TALK_ENGINE.script) {\n            this._initScriptProcessor();\n        }\n        this.log(this.tag, 'audioContext samplerate', this.audioContext.sampleRate)\n    }\n\n    _initMethods() {\n        //\n        this.audioContext = new (window.AudioContext || window.webkitAudioContext)({sampleRate: 48000})\n        this.gainNode = this.audioContext.createGain();\n        // default 1\n        this.gainNode.gain.value = 1;\n\n        // 消音器\n        this.biquadFilter = this.audioContext.createBiquadFilter();\n        this.biquadFilter.type = \"lowpass\";\n        this.biquadFilter.frequency.value = 3000;\n\n        this.resampler = new Resampler({\n            fromSampleRate: this.audioContext.sampleRate,\n            toSampleRate: this._opt.sampleRate,\n            channels: this._opt.numberChannels,\n            inputBufferSize: this.bufferSize\n        })\n    }\n\n    _initScriptProcessor() {\n        //\n        const createScript = this.audioContext.createScriptProcessor || this.audioContext.createJavaScriptNode;\n        this.recorder = createScript.apply(this.audioContext, [this.bufferSize, this._opt.numberChannels, this._opt.numberChannels])\n        this.recorder.onaudioprocess = (e) => this._onaudioprocess(e);\n    }\n\n    _initWorklet() {\n        function workletProcess() {\n            class TalkProcessor extends AudioWorkletProcessor {\n                constructor(options) {\n                    super();\n                    this._cursor = 0;\n                    this._bufferSize = options.processorOptions.bufferSize;\n                    this._buffer = new Float32Array(this._bufferSize);\n                }\n\n                process(inputs, outputs, parameters) {\n                    if (!inputs.length || !inputs[0].length) {\n                        return true;\n                    }\n                    for (let i = 0; i < inputs[0][0].length; i++) {\n                        this._cursor += 1;\n                        if (this._cursor === this._bufferSize) {\n                            this._cursor = 0;\n                            this.port.postMessage({\n                                eventType: 'data',\n                                buffer: this._buffer\n                            });\n                        }\n                        this._buffer[this._cursor] = inputs[0][0][i];\n                    }\n\n                    return true;\n                }\n            }\n\n            registerProcessor('talk-processor', TalkProcessor)\n        }\n\n        const workletUrl = createWorkletModuleUrl(workletProcess);\n        this.audioContext.audioWorklet && this.audioContext.audioWorklet.addModule(workletUrl).then(() => {\n            const workletNode = new AudioWorkletNode(this.audioContext, 'talk-processor', {\n                processorOptions: {\n                    bufferSize: this.bufferSize\n                }\n            })\n            workletNode.connect(this.gainNode);\n            workletNode.port.onmessage = (e) => {\n                if (e.data.eventType === 'data') {\n                    this._encodeAudioData(e.data.buffer);\n                }\n            }\n            this.workletRecorder = workletNode;\n        })\n\n        this.clearWorkletUrlTimeout = setTimeout(() => {\n            URL.revokeObjectURL(workletUrl);\n            this.clearWorkletUrlTimeout = null;\n        }, URL_OBJECT_CLEAR_TIME)\n    }\n\n\n    _onaudioprocess(e) {\n        // 数组里的每个数字都是32位的单精度浮点数\n        // 默认是单精度\n        const float32Array = e.inputBuffer.getChannelData(0);\n        // send 出去。\n        this._encodeAudioData(new Float32Array(float32Array));\n    }\n\n    _encodeAudioData(float32Array) {\n        // 没有说话\n        if (float32Array[0] === 0 && float32Array[1] === 0) {\n            this.log(this.tag, 'empty audio data')\n            return;\n        }\n\n        const resampleBuffer = this.resampler.resample(float32Array);\n        // default 32Bit\n        let tempArrayBuffer = resampleBuffer;\n        if (this._opt.sampleBitsWidth === 16) {\n            tempArrayBuffer = floatTo16BitPCM(resampleBuffer);\n        } else if (this._opt.sampleBitsWidth === 8) {\n            tempArrayBuffer = floatTo8BitPCM(resampleBuffer);\n        }\n\n        if (tempArrayBuffer.buffer !== null) {\n            let typedArray = null;\n            if (this._opt.encType === TALK_ENC_TYPE.g711a) {\n                typedArray = g711aEncoder(tempArrayBuffer)\n            } else if (this._opt.encType === TALK_ENC_TYPE.g711u) {\n                typedArray = g711uEncoder(tempArrayBuffer)\n            } else if (this._opt.encType === TALK_ENC_TYPE.pcm) {\n                typedArray = tempArrayBuffer;\n            }\n            // 变成了8位 array 了\n            const unit8Array = new Uint8Array(typedArray);\n            for (let i = 0; i < unit8Array.length; i++) {\n                let audioBufferLength = this.audioBufferList.length;\n                this.audioBufferList[audioBufferLength++] = unit8Array[i];\n                if (this.audioBufferList.length === this._opt.audioBufferLength) {\n                    this._sendTalkMsg(new Uint8Array(this.audioBufferList));\n                    this.audioBufferList = [];\n                }\n            }\n        }\n    }\n\n    _parseAudioMsg(typedArray) {\n        let typeArray2 = null;\n        // rtp reumx just support g711a or g711u or opus\n        if (this._opt.packetType === TALK_PACKET_TYPE.rtp &&\n            (this._opt.encType === TALK_ENC_TYPE.g711a || this._opt.encType === TALK_ENC_TYPE.g711u)) {\n            typeArray2 = this.rtpPacket(typedArray);\n        } else if (this._opt.packetType === TALK_PACKET_TYPE.empty) {\n            // 默认\n            typeArray2 = typedArray;\n        }\n\n        return typeArray2;\n    }\n\n    rtpPacket(typedArray) {\n        const rtpHeader = [];\n        //2 bits RTP的版本，这里统一为2\n        const version = 2;\n        //1 bit 如果置1，在packet的末尾被填充，填充有时是方便一些针对固定长度的算法的封装\n        const padding = 0;\n        //1 bit 如果置1，在RTP Header会跟着一个header extension\n        const extension = 0;\n        //4 bits 表示头部后 特约信源 的个数\n        const csrcCount = 0;\n        //1 bit 不同的有效载荷有不同的含义，marker=1; 对于视频，标记一帧的结束；对于音频，标记会话的开始。\n        const marker = 1;\n        //7 bits 表示所传输的多媒体的类型，\n        let playloadType = 0;\n        //16 bits 每个RTP packet的sequence number会自动加一，以便接收端检测丢包情况\n        let sequenceNumber = 0;\n        //32 bits 时间戳\n        let timestamp = 0;\n        //32 bits 同步源的id，每两个同步源的id不能相同\n        const ssrc = this._opt.rtpSsrc;\n        //\n        const frameLen = typedArray.length;\n\n        if (this._opt.encType === TALK_ENC_TYPE.g711a) {\n            playloadType = RTP_PAYLOAD_TYPE.g711a;\n        } else if (this._opt.encType === TALK_ENC_TYPE.g711u) {\n            playloadType = RTP_PAYLOAD_TYPE.g711u;\n        } else if (this._opt.encType === TALK_ENC_TYPE.opus) {\n            playloadType = RTP_PAYLOAD_TYPE.opus\n        }\n\n        if (!this.startTimestamp) {\n            this.startTimestamp = now();\n        }\n        timestamp = now() - this.startTimestamp;\n        sequenceNumber = this._getSequenceId();\n\n        // frame length\n        // 需要在rtp头前面加两个字节，表示数据包长度（整个rtp包长度）\n        // 国标流udp不需要两个字节长度\n        // 国标流tcp需要两个字节长度\n        // websocket目前是按照tcp的做法做的\n        let index = 0;\n\n        if (this._opt.packetTcpSendType === TALK_PACKAGE_TCP_SEND_TYPE.tcp) {\n            const rtpFrameLen = frameLen + 12;\n            //  0\n            rtpHeader[index++] = 0xFF & (rtpFrameLen >> 8);\n            //  1\n            rtpHeader[index++] = 0xFF & (rtpFrameLen >> 0);\n        }\n\n        rtpHeader[index++] = ((version << 6) + (padding << 5) + (extension << 4) + csrcCount);\n        rtpHeader[index++] = ((marker << 7) + playloadType);\n        rtpHeader[index++] = (sequenceNumber / (0xff + 1));\n        rtpHeader[index++] = (sequenceNumber % (0xff + 1));\n        rtpHeader[index++] = ((timestamp / (0xffff + 1)) / (0xff + 1));\n        rtpHeader[index++] = ((timestamp / (0xffff + 1)) % (0xff + 1));\n        rtpHeader[index++] = ((timestamp % (0xffff + 1)) / (0xff + 1));\n        rtpHeader[index++] = ((timestamp % (0xffff + 1)) % (0xff + 1));\n        rtpHeader[index++] = ((ssrc / (0xffff + 1)) / (0xff + 1));\n        rtpHeader[index++] = ((ssrc / (0xffff + 1)) % (0xff + 1));\n        rtpHeader[index++] = ((ssrc % (0xffff + 1)) / (0xff + 1));\n        rtpHeader[index++] = ((ssrc % (0xffff + 1)) % (0xff + 1));\n\n        let typeArray2 = rtpHeader.concat([...typedArray]);\n\n        let binary = new Uint8Array(typeArray2.length);\n        for (let ii = 0; ii < typeArray2.length; ii++) {\n            binary[ii] = typeArray2[ii];\n        }\n\n        return binary;\n    }\n\n\n    opusPacket(typedArray) {\n        //TODO:待完成\n\n        return typedArray;\n    }\n\n    _sendTalkMsg(typedArray) {\n        if (this.tempTimestamp === null) {\n            this.tempTimestamp = now();\n        }\n        const timestamp = now();\n        const diff = timestamp - this.tempTimestamp;\n        const typedArray2 = this._parseAudioMsg(typedArray)\n        this.log(this.tag, `'send talk msg and diff is ${diff} and byteLength is ${typedArray2.byteLength} and length is ${typedArray2.length}, and g711 length is ${typedArray.length}`);\n\n        if (isTrue(this._opt.saveRtpToFile)) {\n            if (this._opt.packetType === TALK_PACKET_TYPE.rtp) {\n                this.addRtpToBuffer(typedArray2);\n            }\n        }\n\n\n        if (typedArray2) {\n            if (this.socketStatusOpen) {\n                this.socket.send(typedArray2.buffer);\n            } else {\n                this.emit(EVENTS_ERROR.tallWebsocketClosedByError);\n            }\n        }\n        this.tempTimestamp = timestamp;\n    }\n\n    _doTalk() {\n        this._getUserMedia();\n        // this._getUserMedia2();\n        // this._getUserMedia3();\n    }\n\n    _getUserMedia() {\n        this.log(this.tag, 'getUserMedia')\n        // 老的浏览器可能根本没有实现 mediaDevices，所以我们可以先设置一个空的对象\n        if (window.navigator.mediaDevices === undefined) {\n            window.navigator.mediaDevices = {};\n        }\n\n        // 一些浏览器部分支持 mediaDevices。我们不能直接给对象设置 getUserMedia\n        // 因为这样可能会覆盖已有的属性。这里我们只会在没有 getUserMedia 属性的时候添加它。\n        if (window.navigator.mediaDevices.getUserMedia === undefined) {\n            this.log(this.tag, 'window.navigator.mediaDevices.getUserMedia is undefined and init function')\n            window.navigator.mediaDevices.getUserMedia = function (constraints) {\n                // 首先，如果有 getUserMedia 的话，就获得它\n                var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n\n                // 一些浏览器根本没实现它 - 那么就返回一个 error 到 promise 的 reject 来保持一个统一的接口\n                // 由于受浏览器的限制，navigator.mediaDevices.getUserMedia在https协议下是可以正常使用的，\n                // 而在http协议下只允许localhost/127.0.0.1这两个域名访问，\n                // 因此在开发时应做好容灾处理，上线时则需要确认生产环境是否处于https协议下。\n                if (!getUserMedia) {\n                    return Promise.reject(new Error('getUserMedia is not implemented in this browser'));\n                }\n\n                // 否则，为老的 navigator.getUserMedia 方法包裹一个 Promise\n                return new Promise(function (resolve, reject) {\n                    getUserMedia.call(navigator, constraints, resolve, reject);\n                });\n            }\n        }\n\n        if (this._opt.checkGetUserMediaTimeout) {\n            this._startCheckGetUserMediaTimeout();\n        }\n        //  最后经过反复测试，只有noiseSuppression+echoCancellation同时生效时，打开录音后再播放音频，系统音量一定会变小，\n        //  很惨的是getUserMedia只要你没有配置这两个参数，默认就是同时开启的；只要你给这两参数任意一个设为false，或者都设为false，\n        //  就不会影响手机系统音量。\n        window.navigator.mediaDevices.getUserMedia({\n            audio: this._opt.audioConstraints,\n            video: false\n        }).then((stream) => {\n            this.log(this.tag, 'getUserMedia success')\n            this.userMediaStream = stream;\n            this.mediaStreamSource = this.audioContext.createMediaStreamSource(stream)\n            this.mediaStreamSource.connect(this.biquadFilter);\n            if (this.recorder) {\n                this.biquadFilter.connect(this.recorder)\n                this.recorder.connect(this.gainNode);\n            } else if (this.workletRecorder) {\n                this.biquadFilter.connect(this.workletRecorder)\n                this.workletRecorder.connect(this.gainNode);\n            }\n\n            this.gainNode.connect(this.audioContext.destination);\n            this.emit(EVENTS.talkGetUserMediaSuccess);\n\n            // check stream inactive\n            if (stream.oninactive === null) {\n                stream.oninactive = (e) => {\n                    this._handleStreamInactive(e);\n                }\n            }\n        }).catch((e) => {\n            this.error(this.tag, 'getUserMedia error', e.toString());\n            this.emit(EVENTS.talkGetUserMediaFail, e.toString());\n        }).finally(() => {\n            this.log(this.tag, 'getUserMedia finally');\n            this._stopCheckGetUserMediaTimeout();\n        })\n    }\n\n\n    _getUserMedia2() {\n        this.log(this.tag, 'getUserMedia')\n        navigator.mediaDevices ?\n            navigator.mediaDevices.getUserMedia(\n                {audio: true}).then(\n                (stream) => {\n                    this.log(this.tag, 'getUserMedia2 success')\n                }\n            ) :\n            navigator.getUserMedia(\n                {audio: true},\n                this.log(this.tag, 'getUserMedia2 success'),\n                this.log(this.tag, 'getUserMedia2 fail')\n            );\n    }\n\n    async _getUserMedia3() {\n        this.log(this.tag, 'getUserMedia3')\n        try {\n            const stream = await navigator.mediaDevices.getUserMedia({\n                audio: {\n                    latency: true,\n                    noiseSuppression: true,\n                    autoGainControl: true,\n                    echoCancellation: true,\n                    sampleRate: 48000,\n                    channelCount: 1\n                },\n                video: false\n            });\n            console.log('getUserMedia() got stream:', stream);\n            this.log(this.tag, 'getUserMedia3 success')\n        } catch (e) {\n            this.log(this.tag, 'getUserMedia3 fail')\n        }\n    }\n\n    _handleStreamInactive(e) {\n        if (this.userMediaStream) {\n            this.warn(this.tag, 'stream oninactive', e)\n            this.emit(EVENTS.talkStreamInactive);\n        }\n    }\n\n    _startCheckGetUserMediaTimeout() {\n        this._stopCheckGetUserMediaTimeout();\n        this.checkGetUserMediaTimeout = setTimeout(() => {\n            this.log(this.tag, 'check getUserMedia timeout')\n            this.emit(EVENTS.talkGetUserMediaTimeout);\n        }, this._opt.getUserMediaTimeout)\n    }\n\n    _stopCheckGetUserMediaTimeout() {\n        if (this.checkGetUserMediaTimeout) {\n            this.log(this.tag, 'stop checkGetUserMediaTimeout')\n            clearTimeout(this.checkGetUserMediaTimeout);\n            this.checkGetUserMediaTimeout = null;\n        }\n    }\n\n    _startHeartInterval() {\n        // 定时发送心跳，\n        this.heartInterval = setInterval(() => {\n            this.log(this.tag, 'heart interval');\n            let data = [0x23, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00];\n            data = new Uint8Array(data);\n            this.socket.send(data.buffer);\n        }, 15 * 1000);\n    }\n\n    _stopHeartInterval() {\n        if (this.heartInterval) {\n            this.log(this.tag, 'stop heart interval');\n            clearInterval(this.heartInterval);\n            this.heartInterval = null;\n        }\n    }\n\n\n    startTalk(wsUrl) {\n        return new Promise((resolve, reject) => {\n            if (!isSupportGetUserMedia()) {\n                return reject('not support getUserMedia');\n            }\n            this.wsUrl = wsUrl;\n\n            if (this._opt.testMicrophone) {\n                this._doTalk();\n            } else {\n                if (!this.wsUrl) {\n                    return reject('wsUrl is null');\n                }\n\n                this._createWebSocket().catch((e) => {\n                    reject(e)\n                });\n            }\n            // reject\n            this.once(EVENTS.talkGetUserMediaFail, () => {\n                reject('getUserMedia fail');\n            })\n            // only get user media success and resolve\n            this.once(EVENTS.talkGetUserMediaSuccess, () => {\n                resolve()\n            })\n        })\n\n    }\n\n    setVolume(volume) {\n        volume = parseFloat(volume).toFixed(2);\n        if (isNaN(volume)) {\n            return;\n        }\n        volume = clamp(volume, 0, 1);\n        this.gainNode.gain.value = volume;\n    }\n\n    getOption() {\n        return this._opt;\n    }\n\n    get volume() {\n        return this.gainNode ? parseFloat(this.gainNode.gain.value * 100).toFixed(0) : null;\n    }\n}\n","import Emitter from \"./utils/emitter\";\nimport {EVENTS, TALK_EVENTS} from \"./constant\";\nimport Talk from \"./talk\";\nimport Debug from \"./utils/debug\";\nimport {clone, getDefaultTalkOptions} from \"./utils\";\n\n\nclass JessibucaProTalk extends Emitter {\n\n    constructor(options = {}) {\n        super();\n        this.talk = null;\n        /**@type {import('./constant').DEFAULT_TALK_OPTIONS}*/\n        this._opt = options;\n        this.LOG_TAG = 'JbProTalk';\n\n        this.debug = new Debug(this);\n        this.debug.log(this.LOG_TAG, 'init', JSON.stringify(options));\n    }\n\n    destroy() {\n        this.debug.log(this.LOG_TAG, 'destroy()');\n        this.off();\n        if (this.talk) {\n            this.talk.destroy();\n            this.talk = null;\n        }\n        this.debug.log(this.LOG_TAG, 'destroy');\n    }\n\n\n    _initTalk(options = {}) {\n        if (this.talk) {\n            this.debug.log(this.LOG_TAG, '_initTalk this.talk is not null and destroy');\n            this.talk.destroy();\n            this.talk = null;\n        }\n\n        const opt = Object.assign({}, clone(this._opt), options);\n        this.talk = new Talk(null, opt)\n        this.debug.log(this.LOG_TAG, '_initTalk', this.talk.getOption())\n        this._bindTalkEvents();\n    }\n\n    _bindTalkEvents() {\n        // 对外的事件\n        Object.keys(TALK_EVENTS).forEach((key) => {\n            this.talk.on(TALK_EVENTS[key], (value) => {\n                this.emit(key, value)\n            })\n        })\n    }\n\n    /**\n     *\n     * @param wsUrl\n     * @param options\n     * @returns {Promise<unknown>}\n     */\n    startTalk(wsUrl, options = {}) {\n        return new Promise((resolve, reject) => {\n            this.debug.log(this.LOG_TAG, 'startTalk', wsUrl, JSON.stringify(options));\n            this._initTalk(options)\n\n            this.talk.startTalk(wsUrl).then(() => {\n                resolve()\n\n                this.talk.once(EVENTS.talkStreamClose, () => {\n                    this.debug.warn(this.LOG_TAG, 'talkStreamClose -> stopTalk');\n                    this.stopTalk().catch((e) => {\n                        this.debug.warn(this.LOG_TAG, 'talkStreamClose stopTalk', e);\n                    }).finally(() => {\n                        this.emit(EVENTS.talkFailedAndStop, EVENTS.talkStreamClose);\n                    });\n                })\n                this.talk.once(EVENTS.talkStreamError, (e) => {\n                    this.debug.error(this.LOG_TAG, 'talkStreamError -> stopTalk');\n                    this.stopTalk().catch((e) => {\n                        this.debug.warn(this.LOG_TAG, 'talkStreamError stopTalk', e);\n                    }).finally(() => {\n                        this.emit(EVENTS.talkFailedAndStop, EVENTS.talkStreamError);\n                    });\n                })\n\n                this.talk.once(EVENTS.talkStreamInactive, () => {\n                    this.debug.warn(this.LOG_TAG, 'talkStreamInactive -> stopTalk');\n                    this.stopTalk().catch((e) => {\n                        this.debug.warn(this.LOG_TAG, 'talkStreamInactive stopTalk', e);\n                    }).finally(() => {\n                        this.emit(EVENTS.talkFailedAndStop, EVENTS.talkStreamInactive);\n                    });\n                })\n\n                this.talk.once(EVENTS.talkGetUserMediaTimeout, () => {\n                    this.debug.warn(this.LOG_TAG, 'talkGetUserMediaTimeout -> stopTalk');\n                    this.stopTalk().catch((e) => {\n                        this.debug.warn(this.LOG_TAG, 'talkGetUserMediaTimeout stopTalk', e);\n                    }).finally(() => {\n                        this.emit(EVENTS.talkFailedAndStop, EVENTS.talkGetUserMediaTimeout);\n                    });\n                })\n\n            }).catch((e) => {\n                reject(e)\n            })\n        })\n    }\n\n\n    /**\n     *\n     * @returns {Promise<unknown>}\n     */\n    stopTalk() {\n        return new Promise((resolve, reject) => {\n            this.debug.log(this.LOG_TAG, 'stopTalk()');\n            if (!this.talk) {\n                reject('talk is not init');\n            }\n            this.talk.destroy();\n            this.talk = null;\n            resolve();\n        })\n    }\n\n    /**\n     *\n     * @returns {Promise<unknown>}\n     */\n    getTalkVolume() {\n        return new Promise((resolve, reject) => {\n            if (!this.talk) {\n                reject('talk is not init')\n            }\n            let result = this.talk.volume;\n            resolve(result);\n        })\n    }\n\n    /**\n     *\n     * @param volume\n     * @returns {Promise<unknown>}\n     */\n    setTalkVolume(volume) {\n        return new Promise((resolve, reject) => {\n            this.debug.log(this.LOG_TAG, 'setTalkVolume', volume);\n            if (!this.talk) {\n                reject('talk is not init')\n            }\n            this.talk.setVolume(volume / 100);\n            resolve();\n        })\n    }\n\n    downloadTempRtpFile() {\n        return new Promise((resolve, reject) => {\n            if (this.talk) {\n                this.talk.downloadRtpFile();\n                resolve();\n            } else {\n                reject('talk is not init')\n            }\n        })\n\n    }\n}\n\nJessibucaProTalk.EVENTS = TALK_EVENTS;\n\nwindow.JessibucaProTalk = JessibucaProTalk;\nwindow.JbProTalk = JessibucaProTalk;\nwindow.WebPlayerProTalk = JessibucaProTalk;\n"],"names":["Emitter","on","name","fn","ctx","e","push","once","self","listener","off","args","apply","_","emit","evtArr","slice","data","i","length","callback","Object","keys","forEach","key","evts","liveEvents","len","DEBUG_LEVEL","debug","warn","URL_OBJECT_CLEAR_TIME","EVENTS","fullscreen","webFullscreen","decoderWorkerInit","play","playing","pause","mute","load","loading","zooming","videoInfo","timeUpdate","audioInfo","log","error","kBps","timeout","delayTimeout","delayTimeoutRetryEnd","loadingTimeout","loadingTimeoutRetryEnd","stats","performance","videoSmooth","faceDetectActive","objectDetectActive","occlusionDetectActive","imageDetectActive","record","recording","recordingTimestamp","recordStart","recordEnd","recordCreateError","recordBlob","buffer","videoFrame","videoSEI","start","metadata","resize","volumechange","destroy","beforeDestroy","streamEnd","streamRate","streamAbps","streamVbps","streamDts","streamSuccess","streamMessage","streamError","streamStats","mseSourceOpen","mseSourceClose","mseSourceended","mseSourceStartStreaming","mseSourceEndStreaming","mseSourceBufferError","mseAddSourceBufferError","mseSourceBufferBusy","mseSourceBufferFull","videoWaiting","videoTimeUpdate","videoSyncAudio","playToRenderTimes","playbackTime","playbackTimestamp","playbackTimeScroll","playbackPrecision","playbackShowPrecisionChange","playbackJustTime","playbackStats","playbackSeek","playbackPause","playbackPauseOrResume","playbackRateChange","playbackPreRateChange","ptz","streamQualityChange","visibilityChange","netBuf","close","networkDelayTimeout","togglePerformancePanel","viewResizeChange","flvDemuxBufferSizeTooLarge","talkGetUserMediaSuccess","talkGetUserMediaFail","talkGetUserMediaTimeout","talkStreamStart","talkStreamOpen","talkStreamClose","talkStreamError","talkStreamInactive","webrtcDisconnect","webrtcFailed","webrtcClosed","webrtcOnConnectionStateChange","webrtcOnIceConnectionStateChange","crashLog","focus","blur","visibilityHiddenTimeout","websocketOpen","websocketClose","websocketError","websocketMessage","aiObjectDetectorInfo","aiFaceDetectorInfo","aiOcclusionDetectResult","aiImageDetectResult","playFailedAndPaused","audioResumeState","webrtcStreamH265","flvMetaData","talkFailedAndStop","removeLoadingBgImage","memoryLog","downloadMemoryLog","pressureObserverCpu","currentPts","TALK_EVENTS","TALK_EVENTS_ERROR","EVENTS_ERROR","playError","fetchError","webcodecsH265NotSupport","webcodecsDecodeError","webcodecsUnsupportedConfigurationError","webcodecsDecodeConfigureError","mediaSourceH265NotSupport","mediaSourceAudioG711NotSupport","mediaSourceAudioInitTimeout","mediaSourceAudioNoDataTimeout","mediaSourceDecoderConfigurationError","mediaSourceFull","mediaSourceAppendBufferError","mediaSourceTsIsMaxDiff","mediaSourceUseCanvasRenderPlayFailed","mediaSourceBufferedIsZeroError","wasmDecodeError","wasmUseVideoRenderError","hlsError","webrtcError","webrtcIceCandidateError","webglAlignmentError","wasmWidthOrHeightChange","mseWidthOrHeightChange","wcsWidthOrHeightChange","widthOrHeightChange","tallWebsocketClosedByError","wasmDecodeVideoNoResponseError","audioChannelError","simdH264DecodeVideoWidthIsTooLarge","simdDecodeError","webglContextLostError","videoElementPlayingFailed","videoElementPlayingFailedForWebrtc","decoderWorkerInitError","videoInfoError","videoCodecIdError","aliyunRtcError","WEBSOCKET_STATUS","notConnect","open","TALK_ENC_TYPE","g711a","g711u","pcm","opus","RTP_PAYLOAD_TYPE","pcma","pcmu","jpeg","h264","h265","aac","TALK_PACKET_TYPE","empty","rtp","TALK_PACKAGE_TCP_SEND_TYPE","tcp","udp","WEBSOCKET_EVENTS","message","TALK_ENGINE","worklet","script","DEFAULT_TALK_OPTIONS","encType","packetType","packetTcpSendType","rtpSsrc","numberChannels","sampleRate","sampleBitsWidth","sendInterval","debugLevel","testMicrophone","saveRtpToFile","audioBufferLength","engine","checkGetUserMediaTimeout","getUserMediaTimeout","audioConstraints","latency","noiseSuppression","autoGainControl","echoCancellation","channelCount","now","Date","getTime","WebAssembly","instantiate","module","Module","Uint8Array","of","Instance","clamp","num","a","b","Math","max","min","isFunction","isSupportGetUserMedia","result","navigator","window","mediaDevices","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","createWorkletModuleUrl","func","functionToString","str","trim","match","funcStr","toString","blob","Blob","type","URL","createObjectURL","clone","obj","JSON","stringify","parse","getDefaultTalkOptions","isTrue","value","Resampler","constructor","options","fromSampleRate","toSampleRate","channels","inputBufferSize","Error","resampler","initialize","ratioWeight","linearInterpolation","lastWeight","multiTap","tailExists","initializeBuffers","bufferSlice","sliceAmount","outputBuffer","subarray","outputBufferSize","ceil","Float32Array","lastOutput","bufferLength","outLength","weight","firstWeight","secondWeight","sourceOffset","outputOffset","channel","floor","output_variable_list","actualPosition","amountToNext","alreadyProcessedTail","currentPosition","resample","floatTo16BitPCM","input","output","Int16Array","s","floatTo8BitPCM","Int8Array","temp","parseInt","QUANT_MASK","SEG_SHIFT","BIAS","segEnd","_search","val","table","size","_linear2alaw","pcmVal","mask","seg","aval","_linear2ulaw","uval","g711aEncoder","typedArray","g711Array","tempArray","Array","prototype","call","index","g711uEncoder","Debug","master","_opt","prefix","debugUuid","console","Events","destroys","proxy","bind","target","option","isArray","map","item","addEventListener","removeEventListener","event","Talk","player","tag","defaultOptions","assign","audioContext","gainNode","recorder","workletRecorder","biquadFilter","userMediaStream","clearWorkletUrlTimeout","bufferSize","calcAudioBufferLength","audioBufferList","socket","socketStatus","mediaStreamSource","heartInterval","wsUrl","startTimestamp","sequenceId","tempTimestamp","tempRtpBufferList","events","_initTalk","clearTimeout","getTracks","track","stop","disconnect","onaudioprocess","_sendClose","_stopHeartInterval","_stopCheckGetUserMediaTimeout","addRtpToBuffer","set","downloadRtpFile","oa","document","createElement","href","download","click","revokeObjectURL","socketStatusOpen","_log","_getSequenceId","_createWebSocket","Promise","resolve","reject","WebSocket","binaryType","_doTalk","_initMethods","_initWorklet","_initScriptProcessor","AudioContext","webkitAudioContext","createGain","gain","createBiquadFilter","frequency","createScript","createScriptProcessor","createJavaScriptNode","_onaudioprocess","workletProcess","TalkProcessor","AudioWorkletProcessor","_cursor","_bufferSize","processorOptions","_buffer","process","inputs","outputs","parameters","port","postMessage","eventType","registerProcessor","workletUrl","audioWorklet","addModule","then","workletNode","AudioWorkletNode","connect","onmessage","_encodeAudioData","setTimeout","float32Array","inputBuffer","getChannelData","resampleBuffer","tempArrayBuffer","unit8Array","_sendTalkMsg","_parseAudioMsg","typeArray2","rtpPacket","rtpHeader","version","padding","extension","csrcCount","marker","playloadType","sequenceNumber","timestamp","ssrc","frameLen","rtpFrameLen","concat","binary","ii","opusPacket","diff","typedArray2","byteLength","send","_getUserMedia","undefined","constraints","_startCheckGetUserMediaTimeout","audio","video","stream","createMediaStreamSource","destination","oninactive","_handleStreamInactive","catch","finally","_getUserMedia2","_getUserMedia3","_startHeartInterval","setInterval","clearInterval","startTalk","setVolume","volume","parseFloat","toFixed","isNaN","getOption","JessibucaProTalk","talk","LOG_TAG","opt","_bindTalkEvents","stopTalk","getTalkVolume","setTalkVolume","downloadTempRtpFile","JbProTalk","WebPlayerProTalk"],"mappings":";;;;;IAAe,MAAMA,OAAO,CAAC;IACzBC,EAAAA,EAAE,CAACC,IAAI,EAAEC,EAAE,EAAEC,GAAG,EAAE;IACd,IAAA,MAAMC,CAAC,GAAG,IAAI,CAACA,CAAC,KAAK,IAAI,CAACA,CAAC,GAAG,EAAE,CAAC,CAAA;IACjC,IAAA,CAACA,CAAC,CAACH,IAAI,CAAC,KAAKG,CAAC,CAACH,IAAI,CAAC,GAAG,EAAE,CAAC,EAAEI,IAAI,CAAC;UAACH,EAAE;IAAEC,MAAAA,GAAAA;IAAG,KAAC,CAAC,CAAA;IAC3C,IAAA,OAAO,IAAI,CAAA;IACf,GAAA;IAEAG,EAAAA,IAAI,CAACL,IAAI,EAAEC,EAAE,EAAEC,GAAG,EAAE;QAChB,MAAMI,IAAI,GAAG,IAAI,CAAA;IAEjB,IAAA,SAASC,QAAQ,GAAU;IACvBD,MAAAA,IAAI,CAACE,GAAG,CAACR,IAAI,EAAEO,QAAQ,CAAC,CAAA;IAAC,MAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EADRE,IAAI,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;YAAJA,IAAI,CAAA,IAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA,CAAA;IAAA,OAAA;IAErBR,MAAAA,EAAE,CAACS,KAAK,CAACR,GAAG,EAAEO,IAAI,CAAC,CAAA;IACvB,KAAA;QAEAF,QAAQ,CAACI,CAAC,GAAGV,EAAE,CAAA;QACf,OAAO,IAAI,CAACF,EAAE,CAACC,IAAI,EAAEO,QAAQ,EAAEL,GAAG,CAAC,CAAA;IACvC,GAAA;MAEAU,IAAI,CAACZ,IAAI,EAAW;QAChB,MAAMa,MAAM,GAAG,CAAC,CAAC,IAAI,CAACV,CAAC,KAAK,IAAI,CAACA,CAAC,GAAG,EAAE,CAAC,EAAEH,IAAI,CAAC,IAAI,EAAE,EAAEc,KAAK,EAAE,CAAA;IAAC,IAAA,KAAA,IAAA,KAAA,GAAA,SAAA,CAAA,MAAA,EADrDC,IAAI,GAAA,IAAA,KAAA,CAAA,KAAA,GAAA,CAAA,GAAA,KAAA,GAAA,CAAA,GAAA,CAAA,CAAA,EAAA,KAAA,GAAA,CAAA,EAAA,KAAA,GAAA,KAAA,EAAA,KAAA,EAAA,EAAA;UAAJA,IAAI,CAAA,KAAA,GAAA,CAAA,CAAA,GAAA,SAAA,CAAA,KAAA,CAAA,CAAA;IAAA,KAAA;IAEd,IAAA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,MAAM,CAACI,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;IACvCH,MAAAA,MAAM,CAACG,CAAC,CAAC,CAACf,EAAE,CAACS,KAAK,CAACG,MAAM,CAACG,CAAC,CAAC,CAACd,GAAG,EAAEa,IAAI,CAAC,CAAA;IAC3C,KAAA;IACA,IAAA,OAAO,IAAI,CAAA;IACf,GAAA;IAEAP,EAAAA,GAAG,CAACR,IAAI,EAAEkB,QAAQ,EAAE;IAChB,IAAA,MAAMf,CAAC,GAAG,IAAI,CAACA,CAAC,KAAK,IAAI,CAACA,CAAC,GAAG,EAAE,CAAC,CAAA;QAEjC,IAAI,CAACH,IAAI,EAAE;UACPmB,MAAM,CAACC,IAAI,CAACjB,CAAC,CAAC,CAACkB,OAAO,CAAEC,GAAG,IAAK;YAC5B,OAAOnB,CAAC,CAACmB,GAAG,CAAC,CAAA;IACjB,OAAC,CAAC,CAAA;UACF,OAAO,IAAI,CAACnB,CAAC,CAAA;IACb,MAAA,OAAA;IACJ,KAAA;IAEA,IAAA,MAAMoB,IAAI,GAAGpB,CAAC,CAACH,IAAI,CAAC,CAAA;QACpB,MAAMwB,UAAU,GAAG,EAAE,CAAA;QACrB,IAAID,IAAI,IAAIL,QAAQ,EAAE;IAClB,MAAA,KAAK,IAAIF,CAAC,GAAG,CAAC,EAAES,GAAG,GAAGF,IAAI,CAACN,MAAM,EAAED,CAAC,GAAGS,GAAG,EAAET,CAAC,IAAI,CAAC,EAAE;IAChD,QAAA,IAAIO,IAAI,CAACP,CAAC,CAAC,CAACf,EAAE,KAAKiB,QAAQ,IAAIK,IAAI,CAACP,CAAC,CAAC,CAACf,EAAE,CAACU,CAAC,KAAKO,QAAQ,EAAEM,UAAU,CAACpB,IAAI,CAACmB,IAAI,CAACP,CAAC,CAAC,CAAC,CAAA;IACtF,OAAA;IACJ,KAAA;QACA,IAAIQ,UAAU,CAACP,MAAM,EAAE;IACnBd,MAAAA,CAAC,CAACH,IAAI,CAAC,GAAGwB,UAAU,CAAA;IACxB,KAAC,MAAM;UACH,OAAOrB,CAAC,CAACH,IAAI,CAAC,CAAA;IAClB,KAAA;IACA,IAAA,OAAO,IAAI,CAAA;IACf,GAAA;IACJ;;ICpDA;IAkFO,MAAM0B,WAAW,GAAG;IACvBC,EAAAA,KAAK,EAAE,OAAO;IACdC,EAAAA,IAAI,EAAE,MAAA;IACV,CAAC,CAAA;;IA+CM,MAAMC,qBAAqB,GAAG,EAAE,GAAG,IAAI,CAAC;;IA6b/C;IACO,MAAMC,MAAM,GAAG;IAClBC,EAAAA,UAAU,EAAE,cAAc;IAC1BC,EAAAA,aAAa,EAAE,eAAe;IAC9BC,EAAAA,iBAAiB,EAAE,mBAAmB;IACtCC,EAAAA,IAAI,EAAE,MAAM;IACZC,EAAAA,OAAO,EAAE,SAAS;IAClBC,EAAAA,KAAK,EAAE,OAAO;IACdC,EAAAA,IAAI,EAAE,MAAM;IACZC,EAAAA,IAAI,EAAE,MAAM;IACZC,EAAAA,OAAO,EAAE,SAAS;IAClBC,EAAAA,OAAO,EAAE,SAAS;IAClBC,EAAAA,SAAS,EAAE,WAAW;IACtBC,EAAAA,UAAU,EAAE,YAAY;IACxBC,EAAAA,SAAS,EAAE,WAAW;IACtBC,EAAAA,GAAG,EAAE,KAAK;IACVC,EAAAA,KAAK,EAAE,OAAO;IACdC,EAAAA,IAAI,EAAE,MAAM;IACZC,EAAAA,OAAO,EAAE,SAAS;IAClBC,EAAAA,YAAY,EAAE,cAAc;IAC5BC,EAAAA,oBAAoB,EAAE,sBAAsB;IAC5CC,EAAAA,cAAc,EAAE,gBAAgB;IAChCC,EAAAA,sBAAsB,EAAE,wBAAwB;IAChDC,EAAAA,KAAK,EAAE,OAAO;IACdC,EAAAA,WAAW,EAAE,aAAa;IAC1BC,EAAAA,WAAW,EAAE,aAAa;IAC1BC,EAAAA,gBAAgB,EAAE,kBAAkB;IACpCC,EAAAA,kBAAkB,EAAE,oBAAoB;IACxCC,EAAAA,qBAAqB,EAAE,uBAAuB;IAC9CC,EAAAA,iBAAiB,EAAE,mBAAmB;IACtC;IACAC,EAAAA,MAAM,EAAE,QAAQ;IAChBC,EAAAA,SAAS,EAAE,WAAW;IACtBC,EAAAA,kBAAkB,EAAE,oBAAoB;IACxCC,EAAAA,WAAW,EAAE,aAAa;IAC1BC,EAAAA,SAAS,EAAE,WAAW;IACtBC,EAAAA,iBAAiB,EAAE,mBAAmB;IACtCC,EAAAA,UAAU,EAAE,YAAY;IAExBC,EAAAA,MAAM,EAAE,QAAQ;IAChBC,EAAAA,UAAU,EAAE,YAAY;IACxBC,EAAAA,QAAQ,EAAE,UAAU;IACpBC,EAAAA,KAAK,EAAE,OAAO;IACdC,EAAAA,QAAQ,EAAE,UAAU;IACpBC,EAAAA,MAAM,EAAE,QAAQ;IAChBC,EAAAA,YAAY,EAAE,cAAc;IAC5BC,EAAAA,OAAO,EAAE,SAAS;IAClBC,EAAAA,aAAa,EAAE,eAAe;IAE9B;IACAC,EAAAA,SAAS,EAAE,WAAW;IACtBC,EAAAA,UAAU,EAAE,YAAY;IACxBC,EAAAA,UAAU,EAAE,YAAY;IACxBC,EAAAA,UAAU,EAAE,YAAY;IACxBC,EAAAA,SAAS,EAAE,WAAW;IACtBC,EAAAA,aAAa,EAAE,eAAe;IAC9BC,EAAAA,aAAa,EAAE,eAAe;IAC9BC,EAAAA,WAAW,EAAE,aAAa;IAC1BC,EAAAA,WAAW,EAAE,aAAa;IAE1B;IACAC,EAAAA,aAAa,EAAE,eAAe;IAC9BC,EAAAA,cAAc,EAAE,gBAAgB;IAChCC,EAAAA,cAAc,EAAE,gBAAgB;IAChCC,EAAAA,uBAAuB,EAAE,yBAAyB;IAClDC,EAAAA,qBAAqB,EAAE,uBAAuB;IAC9CC,EAAAA,oBAAoB,EAAE,sBAAsB;IAC5CC,EAAAA,uBAAuB,EAAE,yBAAyB;IAClDC,EAAAA,mBAAmB,EAAE,qBAAqB;IAC1CC,EAAAA,mBAAmB,EAAE,qBAAqB;IAC1C;IACAC,EAAAA,YAAY,EAAE,cAAc;IAC5BC,EAAAA,eAAe,EAAE,iBAAiB;IAClCC,EAAAA,cAAc,EAAE,gBAAgB;IAChC;IACAC,EAAAA,iBAAiB,EAAE,mBAAmB;IACtCC,EAAAA,YAAY,EAAE,cAAc;IAC5BC,EAAAA,iBAAiB,EAAE,mBAAmB;IACtCC,EAAAA,kBAAkB,EAAE,oBAAoB;IACxCC,EAAAA,iBAAiB,EAAE,mBAAmB;IAAC;IACvCC,EAAAA,2BAA2B,EAAE,6BAA6B;IAC1DC,EAAAA,gBAAgB,EAAE,kBAAkB;IACpCC,EAAAA,aAAa,EAAE,eAAe;IAC9BC,EAAAA,YAAY,EAAE,cAAc;IAC5BC,EAAAA,aAAa,EAAE,eAAe;IAC9BC,EAAAA,qBAAqB,EAAE,uBAAuB;IAC9CC,EAAAA,kBAAkB,EAAE,oBAAoB;IACxCC,EAAAA,qBAAqB,EAAE,uBAAuB;IAE9CC,EAAAA,GAAG,EAAE,KAAK;IACVC,EAAAA,mBAAmB,EAAE,qBAAqB;IAC1CC,EAAAA,gBAAgB,EAAE,kBAAkB;IACpCC,EAAAA,MAAM,EAAE,QAAQ;IAChBC,EAAAA,KAAK,EAAE,OAAO;IACdC,EAAAA,mBAAmB,EAAE,qBAAqB;IAC1CC,EAAAA,sBAAsB,EAAE,wBAAwB;IAChDC,EAAAA,gBAAgB,EAAE,kBAAkB;IACpCC,EAAAA,0BAA0B,EAAE,4BAA4B;IACxD;IACAC,EAAAA,uBAAuB,EAAE,yBAAyB;IAClDC,EAAAA,oBAAoB,EAAE,sBAAsB;IAC5CC,EAAAA,uBAAuB,EAAE,yBAAyB;IAClDC,EAAAA,eAAe,EAAE,iBAAiB;IAClCC,EAAAA,cAAc,EAAE,gBAAgB;IAChCC,EAAAA,eAAe,EAAE,iBAAiB;IAClCC,EAAAA,eAAe,EAAE,iBAAiB;IAClCC,EAAAA,kBAAkB,EAAE,oBAAoB;IAExCC,EAAAA,gBAAgB,EAAE,kBAAkB;IACpCC,EAAAA,YAAY,EAAE,cAAc;IAC5BC,EAAAA,YAAY,EAAE,cAAc;IAC5BC,EAAAA,6BAA6B,EAAE,+BAA+B;IAC9DC,EAAAA,gCAAgC,EAAE,kCAAkC;IACpE;IACAC,EAAAA,QAAQ,EAAE,UAAU;IAEpB;IACAC,EAAAA,KAAK,EAAE,OAAO;IACdC,EAAAA,IAAI,EAAE,MAAM;IACZC,EAAAA,uBAAuB,EAAE,yBAAyB;IAElD;IACAC,EAAAA,aAAa,EAAE,eAAe;IAC9BC,EAAAA,cAAc,EAAE,gBAAgB;IAChCC,EAAAA,cAAc,EAAE,gBAAgB;IAChCC,EAAAA,gBAAgB,EAAE,kBAAkB;IAEpC;IACAC,EAAAA,oBAAoB,EAAE,sBAAsB;IAC5CC,EAAAA,kBAAkB,EAAE,oBAAoB;IACxCC,EAAAA,uBAAuB,EAAE,yBAAyB;IAClDC,EAAAA,mBAAmB,EAAE,qBAAqB;IAE1C;IACAC,EAAAA,mBAAmB,EAAE,qBAAqB;IAE1C;IACAC,EAAAA,gBAAgB,EAAE,kBAAkB;IAEpC;IACAC,EAAAA,gBAAgB,EAAE,kBAAkB;IAEpC;IACAC,EAAAA,WAAW,EAAE,aAAa;IAE1B;IACAC,EAAAA,iBAAiB,EAAE,mBAAmB;IAEtCC,EAAAA,oBAAoB,EAAE,sBAAsB;IAE5CC,EAAAA,SAAS,EAAE,WAAW;IAEtBC,EAAAA,iBAAiB,EAAE,mBAAmB;IAEtCC,EAAAA,mBAAmB,EAAE,qBAAqB;IAE1CC,EAAAA,UAAU,EAAE,YAAA;IAChB,CAAC,CAAA;IAmFM,MAAMC,WAAW,GAAG;MACvB9B,eAAe,EAAE7F,MAAM,CAAC6F,eAAe;MACvCC,eAAe,EAAE9F,MAAM,CAAC8F,eAAe;MACvCC,kBAAkB,EAAE/F,MAAM,CAAC+F,kBAAkB;MAC7CL,uBAAuB,EAAE1F,MAAM,CAAC0F,uBAAuB;MACvD2B,iBAAiB,EAAErH,MAAM,CAACqH,iBAAAA;IAC9B,CAAC,CAAA;IA+BM,MAAMO,iBAAiB,GAAG;MAC7B9B,eAAe,EAAE9F,MAAM,CAAC8F,eAAe;MACvCD,eAAe,EAAE7F,MAAM,CAAC6F,eAAAA;IAC5B,CAAC,CAAA;IAEM,MAAMgC,YAAY,GAAG;IACxBC,EAAAA,SAAS,EAAE,2BAA2B;IACtCC,EAAAA,UAAU,EAAE,YAAY;IACxBpB,EAAAA,cAAc,EAAE,gBAAgB;IAChCqB,EAAAA,uBAAuB,EAAE,yBAAyB;IAClDC,EAAAA,oBAAoB,EAAE,sBAAsB;IAC5CC,EAAAA,sCAAsC,EAAE,wCAAwC;IAChFC,EAAAA,6BAA6B,EAAE,+BAA+B;IAC9DC,EAAAA,yBAAyB,EAAE,2BAA2B;IACtDC,EAAAA,8BAA8B,EAAE,gCAAgC;IAChEC,EAAAA,2BAA2B,EAAE,6BAA6B;IAC1DC,EAAAA,6BAA6B,EAAE,+BAA+B;IAC9DC,EAAAA,oCAAoC,EAAE,sCAAsC;MAC5EC,eAAe,EAAEzI,MAAM,CAAC8D,mBAAmB;MAC3CH,oBAAoB,EAAE3D,MAAM,CAAC2D,oBAAoB;MACjDC,uBAAuB,EAAE5D,MAAM,CAAC4D,uBAAuB;IACvD8E,EAAAA,4BAA4B,EAAE,8BAA8B;IAC5DC,EAAAA,sBAAsB,EAAE,wBAAwB;IAChDC,EAAAA,oCAAoC,EAAE,sCAAsC;IAC5EC,EAAAA,8BAA8B,EAAE,gCAAgC;IAChEC,EAAAA,eAAe,EAAE,iBAAiB;IAClCC,EAAAA,uBAAuB,EAAE,yBAAyB;IAClDC,EAAAA,QAAQ,EAAE,UAAU;IACpBC,EAAAA,WAAW,EAAE,aAAa;MAC1B/C,YAAY,EAAElG,MAAM,CAACkG,YAAY;IACjCgD,EAAAA,uBAAuB,EAAE,yBAAyB;IAClDC,EAAAA,mBAAmB,EAAE,qBAAqB;IAC1CC,EAAAA,uBAAuB,EAAE,yBAAyB;IAClDC,EAAAA,sBAAsB,EAAE,wBAAwB;IAChDC,EAAAA,sBAAsB,EAAE,wBAAwB;IAChDC,EAAAA,mBAAmB,EAAE,qBAAqB;IAC1CC,EAAAA,0BAA0B,EAAE,4BAA4B;MACxDjE,0BAA0B,EAAEvF,MAAM,CAACuF,0BAA0B;IAC7DkE,EAAAA,8BAA8B,EAAE,gCAAgC;IAChEC,EAAAA,iBAAiB,EAAE,mBAAmB;IACtCC,EAAAA,kCAAkC,EAAE,oCAAoC;IACxEC,EAAAA,eAAe,EAAE,iBAAiB;IAClCC,EAAAA,qBAAqB,EAAE,uBAAuB;IAC9CC,EAAAA,yBAAyB,EAAE,2BAA2B;IACtDC,EAAAA,kCAAkC,EAAE,oCAAoC;IACxEC,EAAAA,sBAAsB,EAAE,wBAAwB;IAChDC,EAAAA,cAAc,EAAE,gBAAgB;IAChCC,EAAAA,iBAAiB,EAAE,mBAAmB;MACtCrH,SAAS,EAAE7C,MAAM,CAAC6C,SAAS;MAC3B3B,YAAY,EAAElB,MAAM,CAACkB,YAAY;MACjCE,cAAc,EAAEpB,MAAM,CAACoB,cAAc;MACrCgE,mBAAmB,EAAEpF,MAAM,CAACoF,mBAAmB;IAE/C+E,EAAAA,cAAc,EAAE,gBAAgB;MAEhC,GAAGvC,iBAAAA;IACP,CAAC,CAAA;IAEM,MAAMwC,gBAAgB,GAAG;IAC5BC,EAAAA,UAAU,EAAE,YAAY;IACxBC,EAAAA,IAAI,EAAE,MAAM;IACZnF,EAAAA,KAAK,EAAE,OAAO;IACdpE,EAAAA,KAAK,EAAE,OAAA;IACX,CAAC,CAAA;IAqQM,MAAMwJ,aAAa,GAAG;IACzBC,EAAAA,KAAK,EAAE,OAAO;IACdC,EAAAA,KAAK,EAAE,OAAO;IACdC,EAAAA,GAAG,EAAE,KAAK;IACVC,EAAAA,IAAI,EAAE,MAAA;IACV,CAAC,CAAA;;IAyED;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACO,MAAMC,gBAAgB,GAAG;IAC5BC,EAAAA,IAAI,EAAE,CAAC;IACPL,EAAAA,KAAK,EAAE,CAAC;IACRM,EAAAA,IAAI,EAAE,CAAC;IACPL,EAAAA,KAAK,EAAE,CAAC;IACRM,EAAAA,IAAI,EAAE,EAAE;IACRC,EAAAA,IAAI,EAAE,EAAE;IACRC,EAAAA,IAAI,EAAE,EAAE;IACRN,EAAAA,IAAI,EAAE,EAAE;IACRO,EAAAA,GAAG,EAAE,EAAA;IACT,CAAC,CAAA;IAGM,MAAMC,gBAAgB,GAAG;IAC5BC,EAAAA,KAAK,EAAE,OAAO;IAAE;IAChBC,EAAAA,GAAG,EAAE,KAAA;IACT,CAAC,CAAA;IAEM,MAAMC,0BAA0B,GAAG;IACtCC,EAAAA,GAAG,EAAE,KAAK;IACVC,EAAAA,GAAG,EAAE,KAAA;IACT,CAAC,CAAA;IASM,MAAMC,gBAAgB,GAAG;IAC5BnB,EAAAA,IAAI,EAAE,MAAM;IACZnF,EAAAA,KAAK,EAAE,OAAO;IACdpE,EAAAA,KAAK,EAAE,OAAO;IACd2K,EAAAA,OAAO,EAAE,SAAA;IACb,CAAC,CAAA;IAEM,MAAMC,WAAW,GAAG;IACvBC,EAAAA,OAAO,EAAE,SAAS;IAClBC,EAAAA,MAAM,EAAE,QAAA;IACZ,CAAC,CAAA;;IAED;IACO,MAAMC,oBAAoB,GAAG;MAChCC,OAAO,EAAExB,aAAa,CAACC,KAAK;MAC5BwB,UAAU,EAAEb,gBAAgB,CAACE,GAAG;IAAE;MAClCY,iBAAiB,EAAEX,0BAA0B,CAACC,GAAG;IAAE;IACnDW,EAAAA,OAAO,EAAE,YAAY;IAAE;IACvBC,EAAAA,cAAc,EAAE,CAAC;IAAE;IACnBC,EAAAA,UAAU,EAAE,IAAI;IAAE;IAClBC,EAAAA,eAAe,EAAE,EAAE;IAAE;IACrBC,EAAAA,YAAY,EAAE,EAAE;IAAE;IAClBzM,EAAAA,KAAK,EAAE,KAAK;MACZ0M,UAAU,EAAE3M,WAAW,CAACE,IAAI;IAAE;IAC9B0M,EAAAA,cAAc,EAAE,KAAK;IAAE;IACvBC,EAAAA,aAAa,EAAE,KAAK;IAAE;IACtBC,EAAAA,iBAAiB,EAAE,GAAG;IAAE;MACxBC,MAAM,EAAEhB,WAAW,CAACC,OAAO;IAAE;IAC7BgB,EAAAA,wBAAwB,EAAE,KAAK;IAAE;MACjCC,mBAAmB,EAAE,EAAE,GAAG,IAAI;IAAE;IAChCC,EAAAA,gBAAgB,EAAE;IACd;IACAC,IAAAA,OAAO,EAAE,IAAI;IAAC;IACdC,IAAAA,gBAAgB,EAAE,IAAI;IAAE;IACxBC,IAAAA,eAAe,EAAE,IAAI;IACrBC,IAAAA,gBAAgB,EAAE,IAAI;IAAE;IACxBd,IAAAA,UAAU,EAAE,KAAK;IACjBe,IAAAA,YAAY,EAAE,CAAA;IAClB,GAAA;IACJ,CAAC;;;;;;;IC1zCD;IACA;IACA;IACA;IACA;IACA,CAAC,YAAY;AAEb;IACA,CAAC,IAAI,QAAQ,GAAG,OAAO,MAAM,KAAK,WAAW,IAAI,OAAO,MAAM,CAAC,QAAQ,KAAK,WAAW,GAAG,MAAM,CAAC,QAAQ,GAAG,EAAE,CAAC;IAC/G,CAAC,IAAI,UAAU,GAAoC,MAAM,CAAC,OAAO,CAAC;AAClE;IACA,CAAC,IAAI,EAAE,GAAG,CAAC,YAAY;IACvB,EAAE,IAAI,GAAG,CAAC;AACV;IACA,EAAE,IAAI,KAAK,GAAG;IACd,GAAG;IACH,IAAI,mBAAmB;IACvB,IAAI,gBAAgB;IACpB,IAAI,mBAAmB;IACvB,IAAI,mBAAmB;IACvB,IAAI,kBAAkB;IACtB,IAAI,iBAAiB;IACrB,IAAI;IACJ;IACA,GAAG;IACH,IAAI,yBAAyB;IAC7B,IAAI,sBAAsB;IAC1B,IAAI,yBAAyB;IAC7B,IAAI,yBAAyB;IAC7B,IAAI,wBAAwB;IAC5B,IAAI,uBAAuB;AAC3B;IACA,IAAI;IACJ;IACA,GAAG;IACH,IAAI,yBAAyB;IAC7B,IAAI,wBAAwB;IAC5B,IAAI,gCAAgC;IACpC,IAAI,wBAAwB;IAC5B,IAAI,wBAAwB;IAC5B,IAAI,uBAAuB;AAC3B;IACA,IAAI;IACJ,GAAG;IACH,IAAI,sBAAsB;IAC1B,IAAI,qBAAqB;IACzB,IAAI,sBAAsB;IAC1B,IAAI,sBAAsB;IAC1B,IAAI,qBAAqB;IACzB,IAAI,oBAAoB;IACxB,IAAI;IACJ,GAAG;IACH,IAAI,qBAAqB;IACzB,IAAI,kBAAkB;IACtB,IAAI,qBAAqB;IACzB,IAAI,qBAAqB;IACzB,IAAI,oBAAoB;IACxB,IAAI,mBAAmB;IACvB,IAAI;IACJ,GAAG,CAAC;AACJ;IACA,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;IACZ,EAAE,IAAI,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC;IACvB,EAAE,IAAI,GAAG,GAAG,EAAE,CAAC;AACf;IACA,EAAE,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;IACrB,GAAG,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;IAClB,GAAG,IAAI,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,QAAQ,EAAE;IAClC,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;IACrC,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;IAC/B,KAAK;IACL,IAAI,OAAO,GAAG,CAAC;IACf,IAAI;IACJ,GAAG;AACH;IACA,EAAE,OAAO,KAAK,CAAC;IACf,EAAE,GAAG,CAAC;AACN;IACA,CAAC,IAAI,YAAY,GAAG;IACpB,EAAE,MAAM,EAAE,EAAE,CAAC,gBAAgB;IAC7B,EAAE,KAAK,EAAE,EAAE,CAAC,eAAe;IAC3B,EAAE,CAAC;AACH;IACA,CAAC,IAAI,UAAU,GAAG;IAClB,EAAE,OAAO,EAAE,UAAU,OAAO,EAAE,OAAO,EAAE;IACvC,GAAG,OAAO,IAAI,OAAO,CAAC,UAAU,OAAO,EAAE,MAAM,EAAE;IACjD,IAAI,IAAI,mBAAmB,GAAG,YAAY;IAC1C,KAAK,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,mBAAmB,CAAC,CAAC;IAC7C,KAAK,OAAO,EAAE,CAAC;IACf,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACjB;IACA,IAAI,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,mBAAmB,CAAC,CAAC;AAC3C;IACA,IAAI,OAAO,GAAG,OAAO,IAAI,QAAQ,CAAC,eAAe,CAAC;AAClD;IACA,IAAI,IAAI,aAAa,GAAG,OAAO,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,OAAO,CAAC,CAAC;AAC/D;IACA,IAAI,IAAI,aAAa,YAAY,OAAO,EAAE;IAC1C,KAAK,aAAa,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IAC3D,KAAK;IACL,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACjB,GAAG;IACH,EAAE,IAAI,EAAE,YAAY;IACpB,GAAG,OAAO,IAAI,OAAO,CAAC,UAAU,OAAO,EAAE,MAAM,EAAE;IACjD,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;IAC5B,KAAK,OAAO,EAAE,CAAC;IACf,KAAK,OAAO;IACZ,KAAK;AACL;IACA,IAAI,IAAI,gBAAgB,GAAG,YAAY;IACvC,KAAK,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,gBAAgB,CAAC,CAAC;IAC1C,KAAK,OAAO,EAAE,CAAC;IACf,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACjB;IACA,IAAI,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,gBAAgB,CAAC,CAAC;AACxC;IACA,IAAI,IAAI,aAAa,GAAG,QAAQ,CAAC,EAAE,CAAC,cAAc,CAAC,EAAE,CAAC;AACtD;IACA,IAAI,IAAI,aAAa,YAAY,OAAO,EAAE;IAC1C,KAAK,aAAa,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IACxD,KAAK;IACL,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACjB,GAAG;IACH,EAAE,MAAM,EAAE,UAAU,OAAO,EAAE,OAAO,EAAE;IACtC,GAAG,OAAO,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;IAC3E,GAAG;IACH,EAAE,QAAQ,EAAE,UAAU,QAAQ,EAAE;IAChC,GAAG,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;IAC/B,GAAG;IACH,EAAE,OAAO,EAAE,UAAU,QAAQ,EAAE;IAC/B,GAAG,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;IAC9B,GAAG;IACH,EAAE,EAAE,EAAE,UAAU,KAAK,EAAE,QAAQ,EAAE;IACjC,GAAG,IAAI,SAAS,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC;IACvC,GAAG,IAAI,SAAS,EAAE;IAClB,IAAI,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;IAC1D,IAAI;IACJ,GAAG;IACH,EAAE,GAAG,EAAE,UAAU,KAAK,EAAE,QAAQ,EAAE;IAClC,GAAG,IAAI,SAAS,GAAG,YAAY,CAAC,KAAK,CAAC,CAAC;IACvC,GAAG,IAAI,SAAS,EAAE;IAClB,IAAI,QAAQ,CAAC,mBAAmB,CAAC,SAAS,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;IAC7D,IAAI;IACJ,GAAG;IACH,EAAE,GAAG,EAAE,EAAE;IACT,EAAE,CAAC;AACH;IACA,CAAC,IAAI,CAAC,EAAE,EAAE;IACV,EAAE,IAAI,UAAU,EAAE;IAClB,GAAG,cAAc,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;IACvC,GAAG,MAAM;IACT,GAAG,MAAM,CAAC,UAAU,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;IAC1C,GAAG;AACH;IACA,EAAE,OAAO;IACT,EAAE;AACF;IACA,CAAC,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE;IACrC,EAAE,YAAY,EAAE;IAChB,GAAG,GAAG,EAAE,YAAY;IACpB,IAAI,OAAO,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC;IACnD,IAAI;IACJ,GAAG;IACH,EAAE,OAAO,EAAE;IACX,GAAG,UAAU,EAAE,IAAI;IACnB,GAAG,GAAG,EAAE,YAAY;IACpB,IAAI,OAAO,QAAQ,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC;IAC1C,IAAI;IACJ,GAAG;IACH,EAAE,SAAS,EAAE;IACb,GAAG,UAAU,EAAE,IAAI;IACnB,GAAG,GAAG,EAAE,YAAY;IACpB;IACA,IAAI,OAAO,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC;IACnD,IAAI;IACJ,GAAG;IACH,EAAE,CAAC,CAAC;AACJ;IACA,CAAC,IAAI,UAAU,EAAE;IACjB,EAAE,MAAA,CAAA,OAAc,GAAG,UAAU,CAAC;IAC9B,EAAE,MAAM;IACR,EAAE,MAAM,CAAC,UAAU,GAAG,UAAU,CAAC;IACjC,EAAE;IACF,CAAC,GAAG,CAAA;;;;IC3DG,SAASC,GAAG,GAAG;IAClB,EAAA,OAAO,IAAIC,IAAI,EAAE,CAACC,OAAO,EAAE,CAAA;IAC/B,CAAA;IAE6B,CAAC,MAAM;MAChC,IAAI;QACA,IAAI,OAAOC,WAAW,KAAK,QAAQ,IAC5B,OAAOA,WAAW,CAACC,WAAW,KAAK,UAAU,EAAE;UAClD,MAAMC,MAAM,GAAG,IAAIF,WAAW,CAACG,MAAM,CAACC,UAAU,CAACC,EAAE,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAA;IACnG,MAAA,IAAIH,MAAM,YAAYF,WAAW,CAACG,MAAM,EACpC,OAAO,IAAIH,WAAW,CAACM,QAAQ,CAACJ,MAAM,CAAC,YAAYF,WAAW,CAACM,QAAQ,CAAA;IAC/E,KAAA;IACJ,GAAC,CAAC,OAAOxP,CAAC,EAAE,EACZ;IACA,EAAA,OAAO,KAAK,CAAA;IAChB,CAAC,IAAG;IAEG,SAASyP,KAAK,CAACC,GAAG,EAAEC,CAAC,EAAEC,CAAC,EAAE;IAC7B,EAAA,OAAOC,IAAI,CAACC,GAAG,CAACD,IAAI,CAACE,GAAG,CAACL,GAAG,EAAEG,IAAI,CAACC,GAAG,CAACH,CAAC,EAAEC,CAAC,CAAC,CAAC,EAAEC,IAAI,CAACE,GAAG,CAACJ,CAAC,EAAEC,CAAC,CAAC,CAAC,CAAA;IAClE,CAAA;IAyjCO,SAASI,UAAU,CAAClQ,EAAE,EAAE;MAC3B,OAAO,OAAOA,EAAE,KAAK,UAAU,CAAA;IACnC,CAAA;IA4EO,SAASmQ,qBAAqB,GAAG;MACpC,IAAIC,MAAM,GAAG,KAAK,CAAA;IAClB,EAAA,MAAMC,SAAS,GAAGC,MAAM,CAACD,SAAS,CAAA;IAElC,EAAA,IAAIA,SAAS,EAAE;IACXD,IAAAA,MAAM,GAAG,CAAC,EAAEC,SAAS,CAACE,YAAY,IAAIF,SAAS,CAACE,YAAY,CAACC,YAAY,CAAC,CAAA;QAE1E,IAAI,CAACJ,MAAM,EAAE;IACTA,MAAAA,MAAM,GAAG,CAAC,EAAEC,SAAS,CAACG,YAAY,IAAIH,SAAS,CAACI,kBAAkB,IAAIJ,SAAS,CAACK,eAAe,IAAIL,SAAS,CAACM,cAAc,CAAC,CAAA;IAChI,KAAA;IACJ,GAAA;IAEA,EAAA,OAAOP,MAAM,CAAA;IACjB,CAAA;IAiDO,SAASQ,sBAAsB,CAACC,IAAI,EAAE;MAEzC,SAASC,gBAAgB,CAACC,GAAG,EAAE;QAC3B,OAAOA,GAAG,CAACC,IAAI,EAAE,CAACC,KAAK,CAAC,gDAAgD,CAAC,CAAC,CAAC,CAAC,CAAA;IAChF,GAAA;MAEA,MAAMC,OAAO,GAAGJ,gBAAgB,CAACD,IAAI,CAACM,QAAQ,EAAE,CAAC,CAAA;MACjD,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACH,OAAO,CAAC,EAAE;IAACI,IAAAA,IAAI,EAAE,wBAAA;IAAwB,GAAC,CAAC,CAAA;IAClE,EAAA,OAAOC,GAAG,CAACC,eAAe,CAACJ,IAAI,CAAC,CAAA;IACpC,CAAA;IA0RO,SAASK,KAAK,CAACC,GAAG,EAAE;MACvB,IAAItB,MAAM,GAAG,EAAE,CAAA;IACf;IACA,EAAA,IAAI,OAAOsB,GAAG,KAAK,QAAQ,EAAE;QACzB,IAAI;IACAtB,MAAAA,MAAM,GAAGuB,IAAI,CAACC,SAAS,CAACF,GAAG,CAAC,CAAA;IAC5BtB,MAAAA,MAAM,GAAGuB,IAAI,CAACE,KAAK,CAACzB,MAAM,CAAC,CAAA;SAC9B,CAAC,OAAOlQ,CAAC,EAAE;IACRkQ,MAAAA,MAAM,GAAGsB,GAAG,CAAA;IAChB,KAAA;IACJ,GAAC,MAAM;IACHtB,IAAAA,MAAM,GAAGsB,GAAG,CAAA;IAChB,GAAA;IAEA,EAAA,OAAOtB,MAAM,CAAA;IACjB,CAAA;;IAkBA;IACA;IACA;IACA;IACO,SAAS0B,qBAAqB,GAAG;MACpC,OAAOL,KAAK,CAAC9D,oBAAoB,CAAC,CAAA;IACtC,CAAA;IAgFO,SAASoE,MAAM,CAACC,KAAK,EAAE;IAC1B,EAAA,OAAOA,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAK,MAAM,CAAA;IAC7C;;IChvDe,MAAMC,SAAS,CAAC;MAC3BC,WAAW,CAACC,OAAO,EAAE;QACjB,MAAM;UAACC,cAAc;UAAEC,YAAY;UAAEC,QAAQ;IAAEC,MAAAA,eAAAA;IAAe,KAAC,GAAGJ,OAAO,CAAA;QAEzE,IAAI,CAACC,cAAc,IAAI,CAACC,YAAY,IAAI,CAACC,QAAQ,EAAE;IAC/C,MAAA,MAAM,IAAIE,KAAK,CAAC,+CAA+C,CAAC,CAAA;IACpE,KAAA;QACA,IAAI,CAACC,SAAS,GAAG,IAAI,CAAA;QACrB,IAAI,CAACL,cAAc,GAAGA,cAAc,CAAA;QACpC,IAAI,CAACC,YAAY,GAAGA,YAAY,CAAA;IAChC,IAAA,IAAI,CAACC,QAAQ,GAAGA,QAAQ,IAAI,CAAC,CAAA;QAC7B,IAAI,CAACC,eAAe,GAAGA,eAAe,CAAA;QACtC,IAAI,CAACG,UAAU,EAAE,CAAA;IACrB,GAAA;IAEAA,EAAAA,UAAU,GAAG;IACT,IAAA,IAAI,IAAI,CAACN,cAAc,IAAI,IAAI,CAACC,YAAY,EAAE;IAE1C;IACA,MAAA,IAAI,CAACI,SAAS,GAAIxO,MAAM,IAAK;IACzB,QAAA,OAAOA,MAAM,CAAA;WAChB,CAAA;UACD,IAAI,CAAC0O,WAAW,GAAG,CAAC,CAAA;IAExB,KAAC,MAAM;IAEH,MAAA,IAAI,IAAI,CAACP,cAAc,GAAG,IAAI,CAACC,YAAY,EAAE;IAEzC;IACA;IACA;YACA,IAAI,CAACO,mBAAmB,EAAE,CAAA;YAC1B,IAAI,CAACC,UAAU,GAAG,CAAC,CAAA;IAEvB,OAAC,MAAM;IAEH;IACA;IACA;YACA,IAAI,CAACC,QAAQ,EAAE,CAAA;YACf,IAAI,CAACC,UAAU,GAAG,KAAK,CAAA;YACvB,IAAI,CAACF,UAAU,GAAG,CAAC,CAAA;IACvB,OAAA;;IAEA;UACA,IAAI,CAACG,iBAAiB,EAAE,CAAA;UACxB,IAAI,CAACL,WAAW,GAAG,IAAI,CAACP,cAAc,GAAG,IAAI,CAACC,YAAY,CAAA;IAC9D,KAAA;IACJ,GAAA;MAEAY,WAAW,CAACC,WAAW,EAAE;IAErB;QACA,IAAI;UACA,OAAO,IAAI,CAACC,YAAY,CAACC,QAAQ,CAAC,CAAC,EAAEF,WAAW,CAAC,CAAA;SACpD,CAAC,OAAOtQ,KAAK,EAAE;UACZ,IAAI;IACA;IACA,QAAA,IAAI,CAACuQ,YAAY,CAACnS,MAAM,GAAGkS,WAAW,CAAA;YACtC,OAAO,IAAI,CAACC,YAAY,CAAA;WAC3B,CAAC,OAAOvQ,KAAK,EAAE;IACZ;YACA,OAAO,IAAI,CAACuQ,YAAY,CAACtS,KAAK,CAAC,CAAC,EAAEqS,WAAW,CAAC,CAAA;IAClD,OAAA;IACJ,KAAA;IACJ,GAAA;IAEAF,EAAAA,iBAAiB,GAAG;IAChB,IAAA,IAAI,CAACK,gBAAgB,GAAItD,IAAI,CAACuD,IAAI,CAAC,IAAI,CAACf,eAAe,GAAG,IAAI,CAACF,YAAY,GAAG,IAAI,CAACD,cAAc,GAAG,IAAI,CAACE,QAAQ,GAAG,uBAAuB,CAAC,GAAG,IAAI,CAACA,QAAQ,GAAI,IAAI,CAACA,QAAQ,CAAA;QAC7K,IAAI;UACA,IAAI,CAACa,YAAY,GAAG,IAAII,YAAY,CAAC,IAAI,CAACF,gBAAgB,CAAC,CAAA;UAC3D,IAAI,CAACG,UAAU,GAAG,IAAID,YAAY,CAAC,IAAI,CAACjB,QAAQ,CAAC,CAAA;SACpD,CAAC,OAAO1P,KAAK,EAAE;UACZ,IAAI,CAACuQ,YAAY,GAAG,EAAE,CAAA;UACtB,IAAI,CAACK,UAAU,GAAG,EAAE,CAAA;IACxB,KAAA;IACJ,GAAA;IAEAZ,EAAAA,mBAAmB,GAAG;IAClB,IAAA,IAAI,CAACH,SAAS,GAAIxO,MAAM,IAAK;IACzB,MAAA,IAAIwP,YAAY,GAAGxP,MAAM,CAACjD,MAAM;YAC5BsR,QAAQ,GAAG,IAAI,CAACA,QAAQ;YACxBoB,SAAS;YACTf,WAAW;YACXgB,MAAM;YACNC,WAAW;YACXC,YAAY;YACZC,YAAY;YACZC,YAAY;YACZZ,YAAY;YACZa,OAAO,CAAA;IAEX,MAAA,IAAKP,YAAY,GAAGnB,QAAQ,KAAM,CAAC,EAAE;IACjC,QAAA,MAAM,IAAIE,KAAK,CAAC,wCAAwC,CAAC,CAAA;IAC7D,OAAA;UACA,IAAIiB,YAAY,IAAI,CAAC,EAAE;IACnB,QAAA,OAAO,EAAE,CAAA;IACb,OAAA;UAEAC,SAAS,GAAG,IAAI,CAACL,gBAAgB,CAAA;UACjCV,WAAW,GAAG,IAAI,CAACA,WAAW,CAAA;UAC9BgB,MAAM,GAAG,IAAI,CAACd,UAAU,CAAA;IACxBe,MAAAA,WAAW,GAAG,CAAC,CAAA;IACfC,MAAAA,YAAY,GAAG,CAAC,CAAA;IAChBC,MAAAA,YAAY,GAAG,CAAC,CAAA;IAChBC,MAAAA,YAAY,GAAG,CAAC,CAAA;UAChBZ,YAAY,GAAG,IAAI,CAACA,YAAY,CAAA;IAEhC,MAAA,OAAOQ,MAAM,GAAG,CAAC,EAAEA,MAAM,IAAIhB,WAAW,EAAE;YACtCkB,YAAY,GAAGF,MAAM,GAAG,CAAC,CAAA;YACzBC,WAAW,GAAG,CAAC,GAAGC,YAAY,CAAA;IAC9B,QAAA,IAAI,CAAChB,UAAU,GAAGc,MAAM,GAAG,CAAC,CAAA;IAC5B,QAAA,KAAKK,OAAO,GAAG,CAAC,EAAEA,OAAO,GAAG,IAAI,CAAC1B,QAAQ,EAAE,EAAE0B,OAAO,EAAE;IAClDb,UAAAA,YAAY,CAACY,YAAY,EAAE,CAAC,GAAI,IAAI,CAACP,UAAU,CAACQ,OAAO,CAAC,GAAGJ,WAAW,GAAK3P,MAAM,CAAC+P,OAAO,CAAC,GAAGH,YAAa,CAAA;IAC9G,SAAA;IACJ,OAAA;IACAF,MAAAA,MAAM,IAAI,CAAC,CAAA;UACX,KAAKF,YAAY,IAAInB,QAAQ,EAAEwB,YAAY,GAAG/D,IAAI,CAACkE,KAAK,CAACN,MAAM,CAAC,GAAGrB,QAAQ,EAAEyB,YAAY,GAAGL,SAAS,IAAII,YAAY,GAAGL,YAAY,GAAG;YACnII,YAAY,GAAGF,MAAM,GAAG,CAAC,CAAA;YACzBC,WAAW,GAAG,CAAC,GAAGC,YAAY,CAAA;IAC9B,QAAA,KAAKG,OAAO,GAAG,CAAC,EAAEA,OAAO,GAAG,IAAI,CAAC1B,QAAQ,EAAE,EAAE0B,OAAO,EAAE;IAClDb,UAAAA,YAAY,CAACY,YAAY,EAAE,CAAC,GAAI9P,MAAM,CAAC6P,YAAY,IAAKE,OAAO,GAAG,CAAC,GAAKA,OAAO,GAAI,CAAC,CAAC,CAAC,GAAGJ,WAAW,GAAK3P,MAAM,CAAC6P,YAAY,IAAIxB,QAAQ,GAAG0B,OAAO,CAAC,CAAC,GAAGH,YAAa,CAAA;IACxK,SAAA;IACAF,QAAAA,MAAM,IAAIhB,WAAW,CAAA;YACrBmB,YAAY,GAAG/D,IAAI,CAACkE,KAAK,CAACN,MAAM,CAAC,GAAGrB,QAAQ,CAAA;IAChD,OAAA;UACA,KAAK0B,OAAO,GAAG,CAAC,EAAEA,OAAO,GAAG1B,QAAQ,EAAE,EAAE0B,OAAO,EAAE;YAC7C,IAAI,CAACR,UAAU,CAACQ,OAAO,CAAC,GAAG/P,MAAM,CAAC6P,YAAY,EAAE,CAAC,CAAA;IACrD,OAAA;IACA,MAAA,OAAO,IAAI,CAACb,WAAW,CAACc,YAAY,CAAC,CAAA;SACxC,CAAA;IACL,GAAA;IAEAjB,EAAAA,QAAQ,GAAG;IACP,IAAA,IAAI,CAACL,SAAS,GAAIxO,MAAM,IAAK;IACzB,MAAA,IAAIwP,YAAY,GAAGxP,MAAM,CAACjD,MAAM;YAC5B0S,SAAS;YACTQ,oBAAoB;YACpB5B,QAAQ,GAAG,IAAI,CAACA,QAAQ;YACxBK,WAAW;YACXgB,MAAM;YACNK,OAAO;YACPG,cAAc;YACdC,YAAY;YACZC,oBAAoB;YACpBlB,YAAY;YACZY,YAAY;YACZO,eAAe,CAAA;IAEnB,MAAA,IAAKb,YAAY,GAAGnB,QAAQ,KAAM,CAAC,EAAE;IACjC,QAAA,MAAM,IAAIE,KAAK,CAAC,wCAAwC,CAAC,CAAA;IAC7D,OAAA;UACA,IAAIiB,YAAY,IAAI,CAAC,EAAE;IACnB,QAAA,OAAO,EAAE,CAAA;IACb,OAAA;UAEAC,SAAS,GAAG,IAAI,CAACL,gBAAgB,CAAA;IACjCa,MAAAA,oBAAoB,GAAG,EAAE,CAAA;UACzBvB,WAAW,GAAG,IAAI,CAACA,WAAW,CAAA;IAC9BgB,MAAAA,MAAM,GAAG,CAAC,CAAA;IACVQ,MAAAA,cAAc,GAAG,CAAC,CAAA;IAClBC,MAAAA,YAAY,GAAG,CAAC,CAAA;IAChBC,MAAAA,oBAAoB,GAAG,CAAC,IAAI,CAACtB,UAAU,CAAA;UACvC,IAAI,CAACA,UAAU,GAAG,KAAK,CAAA;UACvBI,YAAY,GAAG,IAAI,CAACA,YAAY,CAAA;IAChCY,MAAAA,YAAY,GAAG,CAAC,CAAA;IAChBO,MAAAA,eAAe,GAAG,CAAC,CAAA;UAEnB,KAAKN,OAAO,GAAG,CAAC,EAAEA,OAAO,GAAG1B,QAAQ,EAAE,EAAE0B,OAAO,EAAE;IAC7CE,QAAAA,oBAAoB,CAACF,OAAO,CAAC,GAAG,CAAC,CAAA;IACrC,OAAA;UAEA,GAAG;IACC,QAAA,IAAIK,oBAAoB,EAAE;IACtBV,UAAAA,MAAM,GAAGhB,WAAW,CAAA;cACpB,KAAKqB,OAAO,GAAG,CAAC,EAAEA,OAAO,GAAG1B,QAAQ,EAAE,EAAE0B,OAAO,EAAE;IAC7CE,YAAAA,oBAAoB,CAACF,OAAO,CAAC,GAAG,CAAC,CAAA;IACrC,WAAA;IACJ,SAAC,MAAM;cACHL,MAAM,GAAG,IAAI,CAACd,UAAU,CAAA;cACxB,KAAKmB,OAAO,GAAG,CAAC,EAAEA,OAAO,GAAG1B,QAAQ,EAAE,EAAE0B,OAAO,EAAE;gBAC7CE,oBAAoB,CAACF,OAAO,CAAC,GAAG,IAAI,CAACR,UAAU,CAACQ,OAAO,CAAC,CAAA;IAC5D,WAAA;IACAK,UAAAA,oBAAoB,GAAG,IAAI,CAAA;IAC/B,SAAA;IACA,QAAA,OAAOV,MAAM,GAAG,CAAC,IAAIQ,cAAc,GAAGV,YAAY,EAAE;IAChDW,UAAAA,YAAY,GAAG,CAAC,GAAGD,cAAc,GAAGG,eAAe,CAAA;cACnD,IAAIX,MAAM,IAAIS,YAAY,EAAE;gBACxB,KAAKJ,OAAO,GAAG,CAAC,EAAEA,OAAO,GAAG1B,QAAQ,EAAE,EAAE0B,OAAO,EAAE;kBAC7CE,oBAAoB,CAACF,OAAO,CAAC,IAAI/P,MAAM,CAACkQ,cAAc,EAAE,CAAC,GAAGC,YAAY,CAAA;IAC5E,aAAA;IACAE,YAAAA,eAAe,GAAGH,cAAc,CAAA;IAChCR,YAAAA,MAAM,IAAIS,YAAY,CAAA;IAC1B,WAAC,MAAM;gBACH,KAAKJ,OAAO,GAAG,CAAC,EAAEA,OAAO,GAAG1B,QAAQ,EAAE,EAAE0B,OAAO,EAAE;IAC7CE,cAAAA,oBAAoB,CAACF,OAAO,CAAC,IAAI/P,MAAM,CAACkQ,cAAc,IAAKH,OAAO,GAAG,CAAC,GAAIA,OAAO,GAAG,CAAC,CAAC,CAAC,GAAGL,MAAM,CAAA;IACpG,aAAA;IACAW,YAAAA,eAAe,IAAIX,MAAM,CAAA;IACzBA,YAAAA,MAAM,GAAG,CAAC,CAAA;IACV,YAAA,MAAA;IACJ,WAAA;IACJ,SAAA;YAEA,IAAIA,MAAM,KAAK,CAAC,EAAE;cACd,KAAKK,OAAO,GAAG,CAAC,EAAEA,OAAO,GAAG1B,QAAQ,EAAE,EAAE0B,OAAO,EAAE;gBAC7Cb,YAAY,CAACY,YAAY,EAAE,CAAC,GAAGG,oBAAoB,CAACF,OAAO,CAAC,GAAGrB,WAAW,CAAA;IAC9E,WAAA;IACJ,SAAC,MAAM;cACH,IAAI,CAACE,UAAU,GAAGc,MAAM,CAAA;cACxB,KAAKK,OAAO,GAAG,CAAC,EAAEA,OAAO,GAAG1B,QAAQ,EAAE,EAAE0B,OAAO,EAAE;gBAC7C,IAAI,CAACR,UAAU,CAACQ,OAAO,CAAC,GAAGE,oBAAoB,CAACF,OAAO,CAAC,CAAA;IAC5D,WAAA;cACA,IAAI,CAACjB,UAAU,GAAG,IAAI,CAAA;IACtB,UAAA,MAAA;IACJ,SAAA;IACJ,OAAC,QAAQoB,cAAc,GAAGV,YAAY,IAAIM,YAAY,GAAGL,SAAS,EAAA;IAClE,MAAA,OAAO,IAAI,CAACT,WAAW,CAACc,YAAY,CAAC,CAAA;SACxC,CAAA;IACL,GAAA;MAEAQ,QAAQ,CAACtQ,MAAM,EAAE;IACb,IAAA,IAAI,IAAI,CAACmO,cAAc,IAAI,IAAI,CAACC,YAAY,EAAE;UAC1C,IAAI,CAACM,WAAW,GAAG,CAAC,CAAA;IACxB,KAAC,MAAM;IACH,MAAA,IAAI,IAAI,CAACP,cAAc,GAAG,IAAI,CAACC,YAAY,EAAE;YACzC,IAAI,CAACQ,UAAU,GAAG,CAAC,CAAA;IACvB,OAAC,MAAM;YACH,IAAI,CAACE,UAAU,GAAG,KAAK,CAAA;YACvB,IAAI,CAACF,UAAU,GAAG,CAAC,CAAA;IACvB,OAAA;UACA,IAAI,CAACG,iBAAiB,EAAE,CAAA;UACxB,IAAI,CAACL,WAAW,GAAG,IAAI,CAACP,cAAc,GAAG,IAAI,CAACC,YAAY,CAAA;IAC9D,KAAA;IACA,IAAA,OAAO,IAAI,CAACI,SAAS,CAACxO,MAAM,CAAC,CAAA;IACjC,GAAA;IACJ;;IC3OA;IACA;IACA;IACA;IACA;IACO,SAASuQ,eAAe,CAACC,KAAK,EAAE;IACnC,EAAA,IAAI1T,CAAC,GAAG0T,KAAK,CAACzT,MAAM,CAAA;IACpB,EAAA,IAAI0T,MAAM,GAAG,IAAIC,UAAU,CAAC5T,CAAC,CAAC,CAAA;MAC9B,OAAOA,CAAC,EAAE,EAAE;QACR,IAAI6T,CAAC,GAAG7E,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEwE,KAAK,CAAC1T,CAAC,CAAC,CAAC,CAAC,CAAA;IAC3C2T,IAAAA,MAAM,CAAC3T,CAAC,CAAC,GAAI6T,CAAC,GAAG,CAAC,GAAGA,CAAC,GAAG,MAAM,GAAGA,CAAC,GAAG,MAAO,CAAA;IACjD,GAAA;IACA,EAAA,OAAOF,MAAM,CAAA;IACjB,CAAA;;IAiBA;IACA;IACA;IACA;IACA;IACO,SAASG,cAAc,CAACJ,KAAK,EAAE;IAClC,EAAA,IAAI1T,CAAC,GAAG0T,KAAK,CAACzT,MAAM,CAAA;IACpB,EAAA,IAAI0T,MAAM,GAAG,IAAII,SAAS,CAAC/T,CAAC,CAAC,CAAA;MAC7B,OAAOA,CAAC,EAAE,EAAE;QACR,IAAI6T,CAAC,GAAG7E,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEwE,KAAK,CAAC1T,CAAC,CAAC,CAAC,CAAC,CAAA;IAC3C,IAAA,MAAMgU,IAAI,GAAIH,CAAC,GAAG,CAAC,GAAGA,CAAC,GAAG,MAAM,GAAGA,CAAC,GAAG,MAAO,CAAA;IAC9CF,IAAAA,MAAM,CAAC3T,CAAC,CAAC,GAAGiU,QAAQ,CAAC,GAAG,IAAI,KAAK,IAAI,KAAK,GAAGD,IAAI,CAAC,CAAC,EAAE,EAAE,CAAC,CAAA;IAC5D,GAAA;IACA,EAAA,OAAOL,MAAM,CAAA;IACjB;;ICzCA,MAAMO,UAAU,GAAG,GAAG,CAAA;IAEtB,MAAMC,SAAS,GAAG,CAAC,CAAA;IAEnB,MAAMC,IAAI,GAAG,IAAI,CAAA;IACjB,MAAMC,MAAM,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC,CAAA;IAGzE,SAASC,OAAO,CAACC,GAAG,EAAEC,KAAK,EAAEC,IAAI,EAAE;MAC/B,KAAK,IAAIzU,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyU,IAAI,EAAEzU,CAAC,EAAE,EAAE;IAC3B,IAAA,IAAIuU,GAAG,IAAIC,KAAK,CAACxU,CAAC,CAAC,EAAE;IACjB,MAAA,OAAOA,CAAC,CAAA;IACZ,KAAA;IACJ,GAAA;IACA,EAAA,OAAOyU,IAAI,CAAA;IACf,CAAA;;IAEA;IACA,SAASC,YAAY,CAACC,MAAM,EAAE;IAC1B,EAAA,IAAIC,IAAI,CAAA;IACR,EAAA,IAAIC,GAAG,CAAA;IACP,EAAA,IAAIC,IAAI,CAAA;MACR,IAAIH,MAAM,IAAI,CAAC,EAAE;IACbC,IAAAA,IAAI,GAAG,IAAI,CAAA;IACf,GAAC,MAAM;IACHA,IAAAA,IAAI,GAAG,IAAI,CAAA;;IAEX;IACAD,IAAAA,MAAM,GAAI,CAACA,MAAM,GAAG,CAAE,CAAA;QACtB,IAAIA,MAAM,GAAG,CAAC,EAAE;IACZA,MAAAA,MAAM,GAAG,KAAK,CAAA;IAClB,KAAA;IACJ,GAAA;IACA;MACAE,GAAG,GAAGP,OAAO,CAACK,MAAM,EAAEN,MAAM,EAAE,CAAC,CAAC,CAAA;MAEhC,IAAIQ,GAAG,IAAI,CAAC,EAAE;QACV,OAAQ,IAAI,GAAGD,IAAI,CAAA;IACvB,GAAC,MAAM;QACHE,IAAI,GAAID,GAAG,IAAIV,SAAU,CAAA;QAEzB,IAAIU,GAAG,GAAG,CAAC,EAAE;IACTC,MAAAA,IAAI,IAAMH,MAAM,IAAI,CAAC,GAAIT,UAAW,CAAA;IACxC,KAAC,MAAM;IACHY,MAAAA,IAAI,IAAMH,MAAM,IAAKE,GAAG,GAAG,CAAE,GAAIX,UAAW,CAAA;IAChD,KAAA;QACA,OAAQY,IAAI,GAAGF,IAAI,CAAA;IACvB,GAAA;IACJ,CAAA;;IAwBA;IACA,SAASG,YAAY,CAACJ,MAAM,EAAE;MAC1B,IAAIC,IAAI,GAAG,CAAC,CAAA;MACZ,IAAID,MAAM,GAAG,CAAC,EAAE;QACZA,MAAM,GAAGP,IAAI,GAAGO,MAAM,CAAA;IACtBC,IAAAA,IAAI,GAAG,IAAI,CAAA;IACf,GAAC,MAAM;IACHD,IAAAA,MAAM,IAAIP,IAAI,CAAA;IACdQ,IAAAA,IAAI,GAAG,IAAI,CAAA;IACf,GAAA;MACA,IAAIC,GAAG,GAAGP,OAAO,CAACK,MAAM,EAAEN,MAAM,EAAE,CAAC,CAAC,CAAA;MACpC,IAAIQ,GAAG,IAAI,CAAC,EAAE;QACV,OAAQ,IAAI,GAAGD,IAAI,CAAA;IACvB,GAAC,MAAM;IACH,IAAA,IAAII,IAAI,GAAIH,GAAG,IAAI,CAAC,GAAMF,MAAM,IAAKE,GAAG,GAAG,CAAE,GAAI,GAAI,CAAA;QACrD,OAAQG,IAAI,GAAGJ,IAAI,CAAA;IACvB,GAAA;IACJ,CAAA;;IASA;IACO,SAASK,YAAY,CAACC,UAAU,EAAE;MACrC,MAAMC,SAAS,GAAG,EAAE,CAAA;MACpB,MAAMC,SAAS,GAAGC,KAAK,CAACC,SAAS,CAACxV,KAAK,CAACyV,IAAI,CAACL,UAAU,CAAC,CAAA;IACxDE,EAAAA,SAAS,CAAC/U,OAAO,CAAC,CAACL,CAAC,EAAEwV,KAAK,KAAK;IAC5BL,IAAAA,SAAS,CAACK,KAAK,CAAC,GAAGd,YAAY,CAAC1U,CAAC,CAAC,CAAA;IACtC,GAAC,CAAC,CAAA;IACF,EAAA,OAAOmV,SAAS,CAAA;IACpB,CAAA;;IAYA;IACO,SAASM,YAAY,CAACP,UAAU,EAAE;MACrC,MAAMC,SAAS,GAAG,EAAE,CAAA;MACpB,MAAMC,SAAS,GAAGC,KAAK,CAACC,SAAS,CAACxV,KAAK,CAACyV,IAAI,CAACL,UAAU,CAAC,CAAA;IACxDE,EAAAA,SAAS,CAAC/U,OAAO,CAAC,CAACL,CAAC,EAAEwV,KAAK,KAAK;IAC5BL,IAAAA,SAAS,CAACK,KAAK,CAAC,GAAGT,YAAY,CAAC/U,CAAC,CAAC,CAAA;IACtC,GAAC,CAAC,CAAA;IACF,EAAA,OAAOmV,SAAS,CAAA;IACpB;;IC/He,MAAMO,KAAK,CAAC;MACvBvE,WAAW,CAACwE,MAAM,EAAE;IAChB,IAAA,IAAI,CAAC/T,GAAG,GAAG,UAAC5C,IAAI,EAAc;IAC1B,MAAA,IAAI2W,MAAM,CAACC,IAAI,CAACjV,KAAK,IAAIgV,MAAM,CAACC,IAAI,CAACvI,UAAU,IAAI3M,WAAW,CAACC,KAAK,EAAE;IAClE,QAAA,MAAMkV,MAAM,GAAGF,MAAM,CAACC,IAAI,CAACE,SAAS,GAAI,CAAGH,CAAAA,EAAAA,MAAM,CAACC,IAAI,CAACE,SAAU,CAAA,CAAA,CAAE,GAAG,EAAE,CAAA;IAAC,QAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAF5DrW,IAAI,GAAA,IAAA,KAAA,CAAA,IAAA,GAAA,CAAA,GAAA,IAAA,GAAA,CAAA,GAAA,CAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;cAAJA,IAAI,CAAA,IAAA,GAAA,CAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA,CAAA;IAAA,SAAA;YAGjBsW,OAAO,CAACnU,GAAG,CAAE,CAAOiU,KAAAA,EAAAA,MAAO,CAAuB7W,qBAAAA,EAAAA,IAAK,CAAE,CAAA,CAAA,EAAE,GAAGS,IAAI,CAAC,CAAA;IACvE,OAAA;SACH,CAAA;IAED,IAAA,IAAI,CAACmB,IAAI,GAAG,UAAC5B,IAAI,EAAc;UAC3B,IAAI2W,MAAM,CAACC,IAAI,CAACjV,KAAK,KAAKgV,MAAM,CAACC,IAAI,CAACvI,UAAU,IAAI3M,WAAW,CAACC,KAAK,IAAIgV,MAAM,CAACC,IAAI,CAACvI,UAAU,IAAI3M,WAAW,CAACE,IAAI,CAAC,EAAE;IAClH,QAAA,MAAMiV,MAAM,GAAGF,MAAM,CAACC,IAAI,CAACE,SAAS,GAAI,CAAGH,CAAAA,EAAAA,MAAM,CAACC,IAAI,CAACE,SAAU,CAAA,CAAA,CAAE,GAAG,EAAE,CAAA;IAAC,QAAA,KAAA,IAAA,KAAA,GAAA,SAAA,CAAA,MAAA,EAF3DrW,IAAI,GAAA,IAAA,KAAA,CAAA,KAAA,GAAA,CAAA,GAAA,KAAA,GAAA,CAAA,GAAA,CAAA,CAAA,EAAA,KAAA,GAAA,CAAA,EAAA,KAAA,GAAA,KAAA,EAAA,KAAA,EAAA,EAAA;cAAJA,IAAI,CAAA,KAAA,GAAA,CAAA,CAAA,GAAA,SAAA,CAAA,KAAA,CAAA,CAAA;IAAA,SAAA;YAGlBsW,OAAO,CAACnU,GAAG,CAAE,CAAOiU,KAAAA,EAAAA,MAAO,CAAuB7W,qBAAAA,EAAAA,IAAK,CAAE,CAAA,CAAA,EAAE,GAAGS,IAAI,CAAC,CAAA;IACvE,OAAA;SACH,CAAA;IAED,IAAA,IAAI,CAACoC,KAAK,GAAG,UAAC7C,IAAI,EAAc;IAC5B,MAAA,MAAM6W,MAAM,GAAGF,MAAM,CAACC,IAAI,CAACE,SAAS,GAAI,CAAGH,CAAAA,EAAAA,MAAM,CAACC,IAAI,CAACE,SAAU,CAAA,CAAA,CAAE,GAAG,EAAE,CAAA;IAAC,MAAA,KAAA,IAAA,KAAA,GAAA,SAAA,CAAA,MAAA,EADtDrW,IAAI,GAAA,IAAA,KAAA,CAAA,KAAA,GAAA,CAAA,GAAA,KAAA,GAAA,CAAA,GAAA,CAAA,CAAA,EAAA,KAAA,GAAA,CAAA,EAAA,KAAA,GAAA,KAAA,EAAA,KAAA,EAAA,EAAA;YAAJA,IAAI,CAAA,KAAA,GAAA,CAAA,CAAA,GAAA,SAAA,CAAA,KAAA,CAAA,CAAA;IAAA,OAAA;UAEvBsW,OAAO,CAAClU,KAAK,CAAE,CAAOgU,KAAAA,EAAAA,MAAO,CAAuB7W,qBAAAA,EAAAA,IAAK,CAAE,CAAA,CAAA,EAAE,GAAGS,IAAI,CAAC,CAAA;;IAErE;IACA;IACA;SACH,CAAA;IACL,GAAA;IACJ;;ICzBe,MAAMuW,MAAM,CAAC;MACxB7E,WAAW,CAACwE,MAAM,EAAE;QAChB,IAAI,CAACM,QAAQ,GAAG,EAAE,CAAA;QAClB,IAAI,CAACC,KAAK,GAAG,IAAI,CAACA,KAAK,CAACC,IAAI,CAAC,IAAI,CAAC,CAAA;QAClC,IAAI,CAACR,MAAM,GAAGA,MAAM,CAAA;IACxB,GAAA;IAEAO,EAAAA,KAAK,CAACE,MAAM,EAAEpX,IAAI,EAAEkB,QAAQ,EAAe;QAAA,IAAbmW,MAAM,GAAG,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAA,EAAE,CAAA;QACrC,IAAI,CAACD,MAAM,EAAE;IACT,MAAA,OAAA;IACJ,KAAA;IACA,IAAA,IAAIf,KAAK,CAACiB,OAAO,CAACtX,IAAI,CAAC,EAAE;IACrB,MAAA,OAAOA,IAAI,CAACuX,GAAG,CAACC,IAAI,IAAI,IAAI,CAACN,KAAK,CAACE,MAAM,EAAEI,IAAI,EAAEtW,QAAQ,EAAEmW,MAAM,CAAC,CAAC,CAAA;IACvE,KAAA;QACAD,MAAM,CAACK,gBAAgB,CAACzX,IAAI,EAAEkB,QAAQ,EAAEmW,MAAM,CAAC,CAAA;QAC/C,MAAM5S,OAAO,GAAG,MAAM;IAClB,MAAA,IAAI0L,UAAU,CAACiH,MAAM,CAACM,mBAAmB,CAAC,EAAE;YACxCN,MAAM,CAACM,mBAAmB,CAAC1X,IAAI,EAAEkB,QAAQ,EAAEmW,MAAM,CAAC,CAAA;IACtD,OAAA;SACH,CAAA;IACD,IAAA,IAAI,CAACJ,QAAQ,CAAC7W,IAAI,CAACqE,OAAO,CAAC,CAAA;IAC3B,IAAA,OAAOA,OAAO,CAAA;IAClB,GAAA;IAEAA,EAAAA,OAAO,GAAG;IACN,IAAA,IAAI,CAACkS,MAAM,CAAChV,KAAK,IAAI,IAAI,CAACgV,MAAM,CAAChV,KAAK,CAACiB,GAAG,CAAE,CAAO,MAAA,CAAA,EAAE,SAAS,CAAC,CAAA;QAC/D,IAAI,CAACqU,QAAQ,CAAC5V,OAAO,CAACsW,KAAK,IAAIA,KAAK,EAAE,CAAC,CAAA;QACvC,IAAI,CAACV,QAAQ,GAAG,EAAE,CAAA;IACtB,GAAA;IACJ;;ICJe,MAAMW,IAAI,SAAS9X,OAAO,CAAC;MACtCqS,WAAW,CAAC0F,MAAM,EAAgB;QAAA,IAAdzF,OAAO,GAAG,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAA,EAAE,CAAA;IAC5B,IAAA,KAAK,EAAE,CAAA;IACP;IACA,IAAA,IAAI,CAACwE,IAAI,GAAG,EAAE,CAAA;IAEd,IAAA,IAAIiB,MAAM,EAAE;UACR,IAAI,CAACA,MAAM,GAAGA,MAAM,CAAA;IACxB,KAAA;QACA,IAAI,CAACC,GAAG,GAAG,MAAM,CAAA;QACjB,MAAMC,cAAc,GAAGhG,qBAAqB,EAAE,CAAA;IAE9C,IAAA,IAAI,CAAC6E,IAAI,GAAGzV,MAAM,CAAC6W,MAAM,CAAC,EAAE,EAAED,cAAc,EAAE3F,OAAO,CAAC,CAAA;IAEtD,IAAA,IAAI,CAACwE,IAAI,CAAC1I,UAAU,GAAG+G,QAAQ,CAAC,IAAI,CAAC2B,IAAI,CAAC1I,UAAU,EAAE,EAAE,CAAC,CAAA;IACzD,IAAA,IAAI,CAAC0I,IAAI,CAACzI,eAAe,GAAG8G,QAAQ,CAAC,IAAI,CAAC2B,IAAI,CAACzI,eAAe,EAAE,EAAE,CAAC,CAAA;QACnE,IAAI,CAAC8J,YAAY,GAAG,IAAI,CAAA;QACxB,IAAI,CAACC,QAAQ,GAAG,IAAI,CAAA;QACpB,IAAI,CAACC,QAAQ,GAAG,IAAI,CAAA;QACpB,IAAI,CAACC,eAAe,GAAG,IAAI,CAAA;QAC3B,IAAI,CAACC,YAAY,GAAG,IAAI,CAAA;QACxB,IAAI,CAACC,eAAe,GAAG,IAAI,CAAA;QAC3B,IAAI,CAACC,sBAAsB,GAAG,IAAI,CAAA;IAClC;IACA,IAAA,IAAI,CAACC,UAAU,GAAG,GAAG,CAAC;QACtB,IAAI,CAAC5B,IAAI,CAACpI,iBAAiB,GAAG,IAAI,CAACiK,qBAAqB,EAAE,CAAA;QAC1D,IAAI,CAACC,eAAe,GAAG,EAAE,CAAA;IACzB;QACA,IAAI,CAACC,MAAM,GAAG,IAAI,CAAA;IAClB,IAAA,IAAI,CAACC,YAAY,GAAG1M,gBAAgB,CAACC,UAAU,CAAA;;IAE/C;QACA,IAAI,CAAC0M,iBAAiB,GAAG,IAAI,CAAA;QAC7B,IAAI,CAACC,aAAa,GAAG,IAAI,CAAA;QACzB,IAAI,CAACpK,wBAAwB,GAAG,IAAI,CAAA;QACpC,IAAI,CAACqK,KAAK,GAAG,IAAI,CAAA;QACjB,IAAI,CAACC,cAAc,GAAG,CAAC,CAAA;;IAEvB;QACA,IAAI,CAACC,UAAU,GAAG,CAAC,CAAA;QACnB,IAAI,CAACC,aAAa,GAAG,IAAI,CAAA;QACzB,IAAI,CAACC,iBAAiB,GAAG,EAAE,CAAA;IAC3B,IAAA,IAAI,CAACC,MAAM,GAAG,IAAIpC,MAAM,CAAC,IAAI,CAAC,CAAA;QAE9B,IAAI,CAACqC,SAAS,EAAE,CAAA;IAChB;IACA,IAAA,IAAI,CAAC,IAAI,CAACxB,MAAM,EAAE;IACd,MAAA,IAAI,CAAClW,KAAK,GAAG,IAAI+U,KAAK,CAAC,IAAI,CAAC,CAAA;IAChC,KAAA;IAEA,IAAA,IAAI,CAAC,IAAI,CAACE,IAAI,CAAC/I,OAAO,KAAKxB,aAAa,CAACC,KAAK,IAAI,IAAI,CAACsK,IAAI,CAAC/I,OAAO,KAAKxB,aAAa,CAACE,KAAK,KACvF,EAAE,IAAI,CAACqK,IAAI,CAAC1I,UAAU,KAAK,IAAI,IAAI,IAAI,CAAC0I,IAAI,CAACzI,eAAe,KAAK,EAAE,CAAC,EAAE;IACtE,MAAA,IAAI,CAACvM,IAAI,CAAC,IAAI,CAACkW,GAAG,EAAG,CAAA;AACjC,uBAAA,EAAyB,IAAI,CAAClB,IAAI,CAAC/I,OAAQ,2BAA0B,IAAI,CAAC+I,IAAI,CAACzI,eAAgB,CAA2B,yBAAA,EAAA,IAAI,CAACyI,IAAI,CAACzI,eAAgB,CAAA;AACpJ,YAAA,EAAc,IAAI,CAACyI,IAAI,CAAC/I,OAAQ,sDAAqD,CAAC,CAAA;IAC9E,KAAA;IAGA,IAAA,IAAI,CAACjL,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,MAAM,EAAElG,IAAI,CAACC,SAAS,CAAC,IAAI,CAAC+E,IAAI,CAAC,CAAC,CAAA;IACzD,GAAA;IAEAnS,EAAAA,OAAO,GAAG;QAEN,IAAI,IAAI,CAAC8T,sBAAsB,EAAE;IAC7Be,MAAAA,YAAY,CAAC,IAAI,CAACf,sBAAsB,CAAC,CAAA;UACzC,IAAI,CAACA,sBAAsB,GAAG,IAAI,CAAA;IACtC,KAAA;;IAEA;QACA,IAAI,IAAI,CAACD,eAAe,EAAE;IACtB,MAAA,IAAI,CAACA,eAAe,CAACiB,SAAS,IAAI,IAAI,CAACjB,eAAe,CAACiB,SAAS,EAAE,CAAClY,OAAO,CAAEmY,KAAK,IAAK;YAClFA,KAAK,CAACC,IAAI,EAAE,CAAA;IAChB,OAAC,CAAC,CAAA;UACF,IAAI,CAACnB,eAAe,GAAG,IAAI,CAAA;IAC/B,KAAA;QAEA,IAAI,IAAI,CAACO,iBAAiB,EAAE;IACxB,MAAA,IAAI,CAACA,iBAAiB,CAACa,UAAU,EAAE,CAAA;UACnC,IAAI,CAACb,iBAAiB,GAAG,IAAI,CAAA;IACjC,KAAA;QACA,IAAI,IAAI,CAACV,QAAQ,EAAE;IACf,MAAA,IAAI,CAACA,QAAQ,CAACuB,UAAU,EAAE,CAAA;IAC1B,MAAA,IAAI,CAACvB,QAAQ,CAACwB,cAAc,GAAG,IAAI,CAAA;UACnC,IAAI,CAACxB,QAAQ,GAAG,IAAI,CAAA;IACxB,KAAA;QAEA,IAAI,IAAI,CAACE,YAAY,EAAE;IACnB,MAAA,IAAI,CAACA,YAAY,CAACqB,UAAU,EAAE,CAAA;UAC9B,IAAI,CAACrB,YAAY,GAAG,IAAI,CAAA;IAC5B,KAAA;QAEA,IAAI,IAAI,CAACH,QAAQ,EAAE;IACf,MAAA,IAAI,CAACA,QAAQ,CAACwB,UAAU,EAAE,CAAA;UAC1B,IAAI,CAACxB,QAAQ,GAAG,IAAI,CAAA;IACxB,KAAA;QAEA,IAAI,IAAI,CAACE,eAAe,EAAE;IACtB,MAAA,IAAI,CAACA,eAAe,CAACsB,UAAU,EAAE,CAAA;UACjC,IAAI,CAACtB,eAAe,GAAG,IAAI,CAAA;IAC/B,KAAA;QAEA,IAAI,IAAI,CAACO,MAAM,EAAE;IACb,MAAA,IAAI,IAAI,CAACC,YAAY,KAAK1M,gBAAgB,CAACE,IAAI,EAAE;YAC7C,IAAI,CAACwN,UAAU,EAAE,CAAA;IACrB,OAAA;IACA,MAAA,IAAI,CAACjB,MAAM,CAAC1R,KAAK,EAAE,CAAA;UACnB,IAAI,CAAC0R,MAAM,GAAG,IAAI,CAAA;IACtB,KAAA;QACA,IAAI,CAACkB,kBAAkB,EAAE,CAAA;QACzB,IAAI,CAACC,6BAA6B,EAAE,CAAA;QACpC,IAAI,CAAC7B,YAAY,GAAG,IAAI,CAAA;QACxB,IAAI,CAACC,QAAQ,GAAG,IAAI,CAAA;QACpB,IAAI,CAACC,QAAQ,GAAG,IAAI,CAAA;QACpB,IAAI,CAACO,eAAe,GAAG,EAAE,CAAA;QACzB,IAAI,CAACO,UAAU,GAAG,CAAC,CAAA;QACnB,IAAI,CAACF,KAAK,GAAG,IAAI,CAAA;QACjB,IAAI,CAACG,aAAa,GAAG,IAAI,CAAA;QACzB,IAAI,CAACC,iBAAiB,GAAG,EAAE,CAAA;QAC3B,IAAI,CAACH,cAAc,GAAG,CAAC,CAAA;IAEvB,IAAA,IAAI,CAACpW,GAAG,CAAC,MAAM,EAAE,SAAS,CAAC,CAAA;IAC/B,GAAA;MAEAmX,cAAc,CAAC5M,GAAG,EAAE;QAChB,MAAM1L,GAAG,GAAG0L,GAAG,CAAClM,MAAM,GAAG,IAAI,CAACkY,iBAAiB,CAAClY,MAAM,CAAA;IACtD,IAAA,MAAMiD,MAAM,GAAG,IAAIuL,UAAU,CAAChO,GAAG,CAAC,CAAA;QAClCyC,MAAM,CAAC8V,GAAG,CAAC,IAAI,CAACb,iBAAiB,EAAE,CAAC,CAAC,CAAA;QACrCjV,MAAM,CAAC8V,GAAG,CAAC7M,GAAG,EAAE,IAAI,CAACgM,iBAAiB,CAAClY,MAAM,CAAC,CAAA;QAC9C,IAAI,CAACkY,iBAAiB,GAAGjV,MAAM,CAAA;IAC/B;IACJ,GAAA;;IAEA+V,EAAAA,eAAe,GAAG;QACd,MAAM5I,IAAI,GAAG,IAAIC,IAAI,CAAC,CAAC,IAAI,CAAC6H,iBAAiB,CAAC,CAAC,CAAA;QAC/C,IAAI;IACA,MAAA,MAAMe,EAAE,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC,CAAA;UACtCF,EAAE,CAACG,IAAI,GAAG9J,MAAM,CAACiB,GAAG,CAACC,eAAe,CAACJ,IAAI,CAAC,CAAA;UAC1C6I,EAAE,CAACI,QAAQ,GAAGnL,IAAI,CAACD,GAAG,EAAE,GAAG,MAAM,CAAA;UACjCgL,EAAE,CAACK,KAAK,EAAE,CAAA;UACVhK,MAAM,CAACiB,GAAG,CAACgJ,eAAe,CAACN,EAAE,CAACG,IAAI,CAAC,CAAA;SACtC,CAAC,OAAOla,CAAC,EAAE;IACR4W,MAAAA,OAAO,CAAClU,KAAK,CAAC,iBAAiB,EAAE1C,CAAC,CAAC,CAAA;IACvC,KAAA;IACJ,GAAA;IAEAsY,EAAAA,qBAAqB,GAAG;QACpB,MAAM;UAACvK,UAAU;IAAEC,MAAAA,eAAAA;SAAgB,GAAG,IAAI,CAACyI,IAAI,CAAA;IAC/C;QACA,OAAS1I,UAAU,GAAG,CAAC,IAAK,EAAE,GAAG,IAAI,CAAC,GAAI,CAAC,CAAA;IAC/C,GAAA;IAEA,EAAA,IAAIuM,gBAAgB,GAAG;IACnB,IAAA,OAAO,IAAI,CAAC7B,YAAY,KAAK1M,gBAAgB,CAACE,IAAI,CAAA;IACtD,GAAA;IAEAxJ,EAAAA,GAAG,GAAU;IAAA,IAAA,KAAA,IAAA,IAAA,GAAA,SAAA,CAAA,MAAA,EAANnC,IAAI,GAAA,IAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA,GAAA,CAAA,EAAA,IAAA,GAAA,IAAA,EAAA,IAAA,EAAA,EAAA;UAAJA,IAAI,CAAA,IAAA,CAAA,GAAA,SAAA,CAAA,IAAA,CAAA,CAAA;IAAA,KAAA;IACP,IAAA,IAAI,CAACia,IAAI,CAAC,KAAK,EAAE,GAAGja,IAAI,CAAC,CAAA;IAC7B,GAAA;IAEAmB,EAAAA,IAAI,GAAU;IAAA,IAAA,KAAA,IAAA,KAAA,GAAA,SAAA,CAAA,MAAA,EAANnB,IAAI,GAAA,IAAA,KAAA,CAAA,KAAA,CAAA,EAAA,KAAA,GAAA,CAAA,EAAA,KAAA,GAAA,KAAA,EAAA,KAAA,EAAA,EAAA;UAAJA,IAAI,CAAA,KAAA,CAAA,GAAA,SAAA,CAAA,KAAA,CAAA,CAAA;IAAA,KAAA;IACR,IAAA,IAAI,CAACia,IAAI,CAAC,MAAM,EAAE,GAAGja,IAAI,CAAC,CAAA;IAC9B,GAAA;IAEAoC,EAAAA,KAAK,GAAU;IAAA,IAAA,KAAA,IAAA,KAAA,GAAA,SAAA,CAAA,MAAA,EAANpC,IAAI,GAAA,IAAA,KAAA,CAAA,KAAA,CAAA,EAAA,KAAA,GAAA,CAAA,EAAA,KAAA,GAAA,KAAA,EAAA,KAAA,EAAA,EAAA;UAAJA,IAAI,CAAA,KAAA,CAAA,GAAA,SAAA,CAAA,KAAA,CAAA,CAAA;IAAA,KAAA;IACT,IAAA,IAAI,CAACia,IAAI,CAAC,OAAO,EAAE,GAAGja,IAAI,CAAC,CAAA;IAC/B,GAAA;MAEAia,IAAI,CAACnJ,IAAI,EAAW;IAAA,IAAA,KAAA,IAAA,KAAA,GAAA,SAAA,CAAA,MAAA,EAAN9Q,IAAI,GAAA,IAAA,KAAA,CAAA,KAAA,GAAA,CAAA,GAAA,KAAA,GAAA,CAAA,GAAA,CAAA,CAAA,EAAA,KAAA,GAAA,CAAA,EAAA,KAAA,GAAA,KAAA,EAAA,KAAA,EAAA,EAAA;UAAJA,IAAI,CAAA,KAAA,GAAA,CAAA,CAAA,GAAA,SAAA,CAAA,KAAA,CAAA,CAAA;IAAA,KAAA;QACd,IAAI,IAAI,CAACoX,MAAM,EAAE;UACb,IAAI,CAACA,MAAM,CAAClW,KAAK,CAAC4P,IAAI,CAAC,CAAC,GAAG9Q,IAAI,CAAC,CAAA;IAEpC,KAAC,MAAM,IAAI,IAAI,CAACkB,KAAK,EAAE;UACnB,IAAI,CAACA,KAAK,CAAC4P,IAAI,CAAC,CAAC,GAAG9Q,IAAI,CAAC,CAAA;IAC7B,KAAC,MAAM;IACHsW,MAAAA,OAAO,CAACxF,IAAI,CAAC,CAAC,GAAG9Q,IAAI,CAAC,CAAA;IAC1B,KAAA;IACJ,GAAA;IAEAka,EAAAA,cAAc,GAAG;QACb,OAAO,EAAE,IAAI,CAAC1B,UAAU,CAAA;IAC5B,GAAA;IAEA2B,EAAAA,gBAAgB,GAAG;IACf,IAAA,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACpC,MAAA,MAAM7D,KAAK,GAAG,IAAI,CAACkC,MAAM,CAAClC,KAAK,CAAA;UAC/B,IAAI,CAACyB,MAAM,GAAG,IAAIqC,SAAS,CAAC,IAAI,CAACjC,KAAK,CAAC,CAAA;IACvC,MAAA,IAAI,CAACJ,MAAM,CAACsC,UAAU,GAAG,aAAa,CAAA;IACtC,MAAA,IAAI,CAACra,IAAI,CAACkB,MAAM,CAAC2F,eAAe,CAAC,CAAA;UAEjCyP,KAAK,CAAC,IAAI,CAACyB,MAAM,EAAEpL,gBAAgB,CAACnB,IAAI,EAAE,MAAM;IAC5C,QAAA,IAAI,CAACwM,YAAY,GAAG1M,gBAAgB,CAACE,IAAI,CAAA;YACzC,IAAI,CAACxJ,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,2BAA2B,CAAC,CAAA;IAC/C,QAAA,IAAI,CAAClX,IAAI,CAACkB,MAAM,CAAC4F,cAAc,CAAC,CAAA;IAChCoT,QAAAA,OAAO,EAAE,CAAA;YACT,IAAI,CAACI,OAAO,EAAE,CAAA;IAClB,OAAC,CAAC,CAAA;UAEFhE,KAAK,CAAC,IAAI,CAACyB,MAAM,EAAEpL,gBAAgB,CAACC,OAAO,EAAGmK,KAAK,IAAK;IACpD,QAAA,IAAI,CAAC/U,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,mBAAmB,EAAEH,KAAK,CAAC5W,IAAI,CAAC,CAAA;IACvD,OAAC,CAAC,CAAA;UAEFmW,KAAK,CAAC,IAAI,CAACyB,MAAM,EAAEpL,gBAAgB,CAACtG,KAAK,EAAG9G,CAAC,IAAK;IAC9C,QAAA,IAAI,CAACyY,YAAY,GAAG1M,gBAAgB,CAACjF,KAAK,CAAA;YAC1C,IAAI,CAACrF,IAAI,CAAC,IAAI,CAACkW,GAAG,EAAE,2BAA2B,EAAE3X,CAAC,CAAC,CAAA;IACnD,QAAA,IAAI,CAACS,IAAI,CAACkB,MAAM,CAAC6F,eAAe,CAAC,CAAA;YACjCoT,MAAM,CAAC5a,CAAC,CAAC,CAAA;IACb,OAAC,CAAC,CAAA;UACF+W,KAAK,CAAC,IAAI,CAACyB,MAAM,EAAEpL,gBAAgB,CAAC1K,KAAK,EAAGA,KAAK,IAAK;IAClD,QAAA,IAAI,CAAC+V,YAAY,GAAG1M,gBAAgB,CAACrJ,KAAK,CAAA;YAC1C,IAAI,CAACA,KAAK,CAAC,IAAI,CAACiV,GAAG,EAAE,2BAA2B,EAAEjV,KAAK,CAAC,CAAA;YACxD,IAAI,CAACjC,IAAI,CAACkB,MAAM,CAAC8F,eAAe,EAAE/E,KAAK,CAAC,CAAA;YACxCkY,MAAM,CAAClY,KAAK,CAAC,CAAA;IACjB,OAAC,CAAC,CAAA;IACN,KAAC,CAAC,CAAA;IACN,GAAA;IAEA+W,EAAAA,UAAU,GAAG,EAEb;IAGAP,EAAAA,SAAS,GAAG;QAER,IAAI,CAAC8B,YAAY,EAAE,CAAA;QACnB,IAAI,IAAI,CAACvE,IAAI,CAACnI,MAAM,KAAKhB,WAAW,CAACC,OAAO,EAAE;UAC1C,IAAI,CAAC0N,YAAY,EAAE,CAAA;SACtB,MAAM,IAAI,IAAI,CAACxE,IAAI,CAACnI,MAAM,KAAKhB,WAAW,CAACE,MAAM,EAAE;UAChD,IAAI,CAAC0N,oBAAoB,EAAE,CAAA;IAC/B,KAAA;IACA,IAAA,IAAI,CAACzY,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,yBAAyB,EAAE,IAAI,CAACG,YAAY,CAAC/J,UAAU,CAAC,CAAA;IAC/E,GAAA;IAEAiN,EAAAA,YAAY,GAAG;IACX;QACA,IAAI,CAAClD,YAAY,GAAG,KAAK1H,MAAM,CAAC+K,YAAY,IAAI/K,MAAM,CAACgL,kBAAkB,EAAE;IAACrN,MAAAA,UAAU,EAAE,KAAA;IAAK,KAAC,CAAC,CAAA;QAC/F,IAAI,CAACgK,QAAQ,GAAG,IAAI,CAACD,YAAY,CAACuD,UAAU,EAAE,CAAA;IAC9C;IACA,IAAA,IAAI,CAACtD,QAAQ,CAACuD,IAAI,CAACxJ,KAAK,GAAG,CAAC,CAAA;;IAE5B;QACA,IAAI,CAACoG,YAAY,GAAG,IAAI,CAACJ,YAAY,CAACyD,kBAAkB,EAAE,CAAA;IAC1D,IAAA,IAAI,CAACrD,YAAY,CAAC9G,IAAI,GAAG,SAAS,CAAA;IAClC,IAAA,IAAI,CAAC8G,YAAY,CAACsD,SAAS,CAAC1J,KAAK,GAAG,IAAI,CAAA;IAExC,IAAA,IAAI,CAACS,SAAS,GAAG,IAAIR,SAAS,CAAC;IAC3BG,MAAAA,cAAc,EAAE,IAAI,CAAC4F,YAAY,CAAC/J,UAAU;IAC5CoE,MAAAA,YAAY,EAAE,IAAI,CAACsE,IAAI,CAAC1I,UAAU;IAClCqE,MAAAA,QAAQ,EAAE,IAAI,CAACqE,IAAI,CAAC3I,cAAc;UAClCuE,eAAe,EAAE,IAAI,CAACgG,UAAAA;IAC1B,KAAC,CAAC,CAAA;IACN,GAAA;IAEA6C,EAAAA,oBAAoB,GAAG;IACnB;IACA,IAAA,MAAMO,YAAY,GAAG,IAAI,CAAC3D,YAAY,CAAC4D,qBAAqB,IAAI,IAAI,CAAC5D,YAAY,CAAC6D,oBAAoB,CAAA;IACtG,IAAA,IAAI,CAAC3D,QAAQ,GAAGyD,YAAY,CAAClb,KAAK,CAAC,IAAI,CAACuX,YAAY,EAAE,CAAC,IAAI,CAACO,UAAU,EAAE,IAAI,CAAC5B,IAAI,CAAC3I,cAAc,EAAE,IAAI,CAAC2I,IAAI,CAAC3I,cAAc,CAAC,CAAC,CAAA;IAC5H,IAAA,IAAI,CAACkK,QAAQ,CAACwB,cAAc,GAAIxZ,CAAC,IAAK,IAAI,CAAC4b,eAAe,CAAC5b,CAAC,CAAC,CAAA;IACjE,GAAA;IAEAib,EAAAA,YAAY,GAAG;IACX,IAAA,SAASY,cAAc,GAAG;UACtB,MAAMC,aAAa,SAASC,qBAAqB,CAAC;YAC9C/J,WAAW,CAACC,OAAO,EAAE;IACjB,UAAA,KAAK,EAAE,CAAA;cACP,IAAI,CAAC+J,OAAO,GAAG,CAAC,CAAA;IAChB,UAAA,IAAI,CAACC,WAAW,GAAGhK,OAAO,CAACiK,gBAAgB,CAAC7D,UAAU,CAAA;cACtD,IAAI,CAAC8D,OAAO,GAAG,IAAI9I,YAAY,CAAC,IAAI,CAAC4I,WAAW,CAAC,CAAA;IACrD,SAAA;IAEAG,QAAAA,OAAO,CAACC,MAAM,EAAEC,OAAO,EAAEC,UAAU,EAAE;IACjC,UAAA,IAAI,CAACF,MAAM,CAACvb,MAAM,IAAI,CAACub,MAAM,CAAC,CAAC,CAAC,CAACvb,MAAM,EAAE;IACrC,YAAA,OAAO,IAAI,CAAA;IACf,WAAA;IACA,UAAA,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwb,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACvb,MAAM,EAAED,CAAC,EAAE,EAAE;gBAC1C,IAAI,CAACmb,OAAO,IAAI,CAAC,CAAA;IACjB,YAAA,IAAI,IAAI,CAACA,OAAO,KAAK,IAAI,CAACC,WAAW,EAAE;kBACnC,IAAI,CAACD,OAAO,GAAG,CAAC,CAAA;IAChB,cAAA,IAAI,CAACQ,IAAI,CAACC,WAAW,CAAC;IAClBC,gBAAAA,SAAS,EAAE,MAAM;oBACjB3Y,MAAM,EAAE,IAAI,CAACoY,OAAAA;IACjB,eAAC,CAAC,CAAA;IACN,aAAA;IACA,YAAA,IAAI,CAACA,OAAO,CAAC,IAAI,CAACH,OAAO,CAAC,GAAGK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACxb,CAAC,CAAC,CAAA;IAChD,WAAA;IAEA,UAAA,OAAO,IAAI,CAAA;IACf,SAAA;IACJ,OAAA;IAEA8b,MAAAA,iBAAiB,CAAC,gBAAgB,EAAEb,aAAa,CAAC,CAAA;IACtD,KAAA;IAEA,IAAA,MAAMc,UAAU,GAAGlM,sBAAsB,CAACmL,cAAc,CAAC,CAAA;IACzD,IAAA,IAAI,CAAC/D,YAAY,CAAC+E,YAAY,IAAI,IAAI,CAAC/E,YAAY,CAAC+E,YAAY,CAACC,SAAS,CAACF,UAAU,CAAC,CAACG,IAAI,CAAC,MAAM;UAC9F,MAAMC,WAAW,GAAG,IAAIC,gBAAgB,CAAC,IAAI,CAACnF,YAAY,EAAE,gBAAgB,EAAE;IAC1EoE,QAAAA,gBAAgB,EAAE;cACd7D,UAAU,EAAE,IAAI,CAACA,UAAAA;IACrB,SAAA;IACJ,OAAC,CAAC,CAAA;IACF2E,MAAAA,WAAW,CAACE,OAAO,CAAC,IAAI,CAACnF,QAAQ,CAAC,CAAA;IAClCiF,MAAAA,WAAW,CAACR,IAAI,CAACW,SAAS,GAAInd,CAAC,IAAK;IAChC,QAAA,IAAIA,CAAC,CAACY,IAAI,CAAC8b,SAAS,KAAK,MAAM,EAAE;cAC7B,IAAI,CAACU,gBAAgB,CAACpd,CAAC,CAACY,IAAI,CAACmD,MAAM,CAAC,CAAA;IACxC,SAAA;WACH,CAAA;UACD,IAAI,CAACkU,eAAe,GAAG+E,WAAW,CAAA;IACtC,KAAC,CAAC,CAAA;IAEF,IAAA,IAAI,CAAC5E,sBAAsB,GAAGiF,UAAU,CAAC,MAAM;IAC3ChM,MAAAA,GAAG,CAACgJ,eAAe,CAACuC,UAAU,CAAC,CAAA;UAC/B,IAAI,CAACxE,sBAAsB,GAAG,IAAI,CAAA;SACrC,EAAE1W,qBAAqB,CAAC,CAAA;IAC7B,GAAA;MAGAka,eAAe,CAAC5b,CAAC,EAAE;IACf;IACA;QACA,MAAMsd,YAAY,GAAGtd,CAAC,CAACud,WAAW,CAACC,cAAc,CAAC,CAAC,CAAC,CAAA;IACpD;QACA,IAAI,CAACJ,gBAAgB,CAAC,IAAI/J,YAAY,CAACiK,YAAY,CAAC,CAAC,CAAA;IACzD,GAAA;MAEAF,gBAAgB,CAACE,YAAY,EAAE;IAC3B;IACA,IAAA,IAAIA,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,IAAIA,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE;UAChD,IAAI,CAAC7a,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,kBAAkB,CAAC,CAAA;IACtC,MAAA,OAAA;IACJ,KAAA;QAEA,MAAM8F,cAAc,GAAG,IAAI,CAAClL,SAAS,CAAC8B,QAAQ,CAACiJ,YAAY,CAAC,CAAA;IAC5D;QACA,IAAII,eAAe,GAAGD,cAAc,CAAA;IACpC,IAAA,IAAI,IAAI,CAAChH,IAAI,CAACzI,eAAe,KAAK,EAAE,EAAE;IAClC0P,MAAAA,eAAe,GAAGpJ,eAAe,CAACmJ,cAAc,CAAC,CAAA;SACpD,MAAM,IAAI,IAAI,CAAChH,IAAI,CAACzI,eAAe,KAAK,CAAC,EAAE;IACxC0P,MAAAA,eAAe,GAAG/I,cAAc,CAAC8I,cAAc,CAAC,CAAA;IACpD,KAAA;IAEA,IAAA,IAAIC,eAAe,CAAC3Z,MAAM,KAAK,IAAI,EAAE;UACjC,IAAIgS,UAAU,GAAG,IAAI,CAAA;UACrB,IAAI,IAAI,CAACU,IAAI,CAAC/I,OAAO,KAAKxB,aAAa,CAACC,KAAK,EAAE;IAC3C4J,QAAAA,UAAU,GAAGD,YAAY,CAAC4H,eAAe,CAAC,CAAA;WAC7C,MAAM,IAAI,IAAI,CAACjH,IAAI,CAAC/I,OAAO,KAAKxB,aAAa,CAACE,KAAK,EAAE;IAClD2J,QAAAA,UAAU,GAAGO,YAAY,CAACoH,eAAe,CAAC,CAAA;WAC7C,MAAM,IAAI,IAAI,CAACjH,IAAI,CAAC/I,OAAO,KAAKxB,aAAa,CAACG,GAAG,EAAE;IAChD0J,QAAAA,UAAU,GAAG2H,eAAe,CAAA;IAChC,OAAA;IACA;IACA,MAAA,MAAMC,UAAU,GAAG,IAAIrO,UAAU,CAACyG,UAAU,CAAC,CAAA;IAC7C,MAAA,KAAK,IAAIlV,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8c,UAAU,CAAC7c,MAAM,EAAED,CAAC,EAAE,EAAE;IACxC,QAAA,IAAIwN,iBAAiB,GAAG,IAAI,CAACkK,eAAe,CAACzX,MAAM,CAAA;YACnD,IAAI,CAACyX,eAAe,CAAClK,iBAAiB,EAAE,CAAC,GAAGsP,UAAU,CAAC9c,CAAC,CAAC,CAAA;YACzD,IAAI,IAAI,CAAC0X,eAAe,CAACzX,MAAM,KAAK,IAAI,CAAC2V,IAAI,CAACpI,iBAAiB,EAAE;cAC7D,IAAI,CAACuP,YAAY,CAAC,IAAItO,UAAU,CAAC,IAAI,CAACiJ,eAAe,CAAC,CAAC,CAAA;cACvD,IAAI,CAACA,eAAe,GAAG,EAAE,CAAA;IAC7B,SAAA;IACJ,OAAA;IACJ,KAAA;IACJ,GAAA;MAEAsF,cAAc,CAAC9H,UAAU,EAAE;QACvB,IAAI+H,UAAU,GAAG,IAAI,CAAA;IACrB;IACA,IAAA,IAAI,IAAI,CAACrH,IAAI,CAAC9I,UAAU,KAAKb,gBAAgB,CAACE,GAAG,KAC5C,IAAI,CAACyJ,IAAI,CAAC/I,OAAO,KAAKxB,aAAa,CAACC,KAAK,IAAI,IAAI,CAACsK,IAAI,CAAC/I,OAAO,KAAKxB,aAAa,CAACE,KAAK,CAAC,EAAE;IAC1F0R,MAAAA,UAAU,GAAG,IAAI,CAACC,SAAS,CAAChI,UAAU,CAAC,CAAA;SAC1C,MAAM,IAAI,IAAI,CAACU,IAAI,CAAC9I,UAAU,KAAKb,gBAAgB,CAACC,KAAK,EAAE;IACxD;IACA+Q,MAAAA,UAAU,GAAG/H,UAAU,CAAA;IAC3B,KAAA;IAEA,IAAA,OAAO+H,UAAU,CAAA;IACrB,GAAA;MAEAC,SAAS,CAAChI,UAAU,EAAE;QAClB,MAAMiI,SAAS,GAAG,EAAE,CAAA;IACpB;QACA,MAAMC,OAAO,GAAG,CAAC,CAAA;IACjB;QACA,MAAMC,OAAO,GAAG,CAAC,CAAA;IACjB;QACA,MAAMC,SAAS,GAAG,CAAC,CAAA;IACnB;QACA,MAAMC,SAAS,GAAG,CAAC,CAAA;IACnB;QACA,MAAMC,MAAM,GAAG,CAAC,CAAA;IAChB;QACA,IAAIC,YAAY,GAAG,CAAC,CAAA;IACpB;QACA,IAAIC,cAAc,GAAG,CAAC,CAAA;IACtB;QACA,IAAIC,SAAS,GAAG,CAAC,CAAA;IACjB;IACA,IAAA,MAAMC,IAAI,GAAG,IAAI,CAAChI,IAAI,CAAC5I,OAAO,CAAA;IAC9B;IACA,IAAA,MAAM6Q,QAAQ,GAAG3I,UAAU,CAACjV,MAAM,CAAA;QAElC,IAAI,IAAI,CAAC2V,IAAI,CAAC/I,OAAO,KAAKxB,aAAa,CAACC,KAAK,EAAE;UAC3CmS,YAAY,GAAG/R,gBAAgB,CAACJ,KAAK,CAAA;SACxC,MAAM,IAAI,IAAI,CAACsK,IAAI,CAAC/I,OAAO,KAAKxB,aAAa,CAACE,KAAK,EAAE;UAClDkS,YAAY,GAAG/R,gBAAgB,CAACH,KAAK,CAAA;SACxC,MAAM,IAAI,IAAI,CAACqK,IAAI,CAAC/I,OAAO,KAAKxB,aAAa,CAACI,IAAI,EAAE;UACjDgS,YAAY,GAAG/R,gBAAgB,CAACD,IAAI,CAAA;IACxC,KAAA;IAEA,IAAA,IAAI,CAAC,IAAI,CAACuM,cAAc,EAAE;IACtB,MAAA,IAAI,CAACA,cAAc,GAAG9J,GAAG,EAAE,CAAA;IAC/B,KAAA;IACAyP,IAAAA,SAAS,GAAGzP,GAAG,EAAE,GAAG,IAAI,CAAC8J,cAAc,CAAA;IACvC0F,IAAAA,cAAc,GAAG,IAAI,CAAC/D,cAAc,EAAE,CAAA;;IAEtC;IACA;IACA;IACA;IACA;QACA,IAAInE,KAAK,GAAG,CAAC,CAAA;QAEb,IAAI,IAAI,CAACI,IAAI,CAAC7I,iBAAiB,KAAKX,0BAA0B,CAACC,GAAG,EAAE;IAChE,MAAA,MAAMyR,WAAW,GAAGD,QAAQ,GAAG,EAAE,CAAA;IACjC;UACAV,SAAS,CAAC3H,KAAK,EAAE,CAAC,GAAG,IAAI,GAAIsI,WAAW,IAAI,CAAE,CAAA;IAC9C;UACAX,SAAS,CAAC3H,KAAK,EAAE,CAAC,GAAG,IAAI,GAAIsI,WAAW,IAAI,CAAE,CAAA;IAClD,KAAA;QAEAX,SAAS,CAAC3H,KAAK,EAAE,CAAC,GAAI,CAAC4H,OAAO,IAAI,CAAC,KAAKC,OAAO,IAAI,CAAC,CAAC,IAAIC,SAAS,IAAI,CAAC,CAAC,GAAGC,SAAU,CAAA;QACrFJ,SAAS,CAAC3H,KAAK,EAAE,CAAC,GAAI,CAACgI,MAAM,IAAI,CAAC,IAAIC,YAAa,CAAA;QACnDN,SAAS,CAAC3H,KAAK,EAAE,CAAC,GAAIkI,cAAc,IAAI,IAAI,GAAG,CAAC,CAAE,CAAA;QAClDP,SAAS,CAAC3H,KAAK,EAAE,CAAC,GAAIkI,cAAc,IAAI,IAAI,GAAG,CAAC,CAAE,CAAA;IAClDP,IAAAA,SAAS,CAAC3H,KAAK,EAAE,CAAC,GAAKmI,SAAS,IAAI,MAAM,GAAG,CAAC,CAAC,IAAK,IAAI,GAAG,CAAC,CAAE,CAAA;IAC9DR,IAAAA,SAAS,CAAC3H,KAAK,EAAE,CAAC,GAAKmI,SAAS,IAAI,MAAM,GAAG,CAAC,CAAC,IAAK,IAAI,GAAG,CAAC,CAAE,CAAA;IAC9DR,IAAAA,SAAS,CAAC3H,KAAK,EAAE,CAAC,GAAKmI,SAAS,IAAI,MAAM,GAAG,CAAC,CAAC,IAAK,IAAI,GAAG,CAAC,CAAE,CAAA;IAC9DR,IAAAA,SAAS,CAAC3H,KAAK,EAAE,CAAC,GAAKmI,SAAS,IAAI,MAAM,GAAG,CAAC,CAAC,IAAK,IAAI,GAAG,CAAC,CAAE,CAAA;IAC9DR,IAAAA,SAAS,CAAC3H,KAAK,EAAE,CAAC,GAAKoI,IAAI,IAAI,MAAM,GAAG,CAAC,CAAC,IAAK,IAAI,GAAG,CAAC,CAAE,CAAA;IACzDT,IAAAA,SAAS,CAAC3H,KAAK,EAAE,CAAC,GAAKoI,IAAI,IAAI,MAAM,GAAG,CAAC,CAAC,IAAK,IAAI,GAAG,CAAC,CAAE,CAAA;IACzDT,IAAAA,SAAS,CAAC3H,KAAK,EAAE,CAAC,GAAKoI,IAAI,IAAI,MAAM,GAAG,CAAC,CAAC,IAAK,IAAI,GAAG,CAAC,CAAE,CAAA;IACzDT,IAAAA,SAAS,CAAC3H,KAAK,EAAE,CAAC,GAAKoI,IAAI,IAAI,MAAM,GAAG,CAAC,CAAC,IAAK,IAAI,GAAG,CAAC,CAAE,CAAA;QAEzD,IAAIX,UAAU,GAAGE,SAAS,CAACY,MAAM,CAAC,CAAC,GAAG7I,UAAU,CAAC,CAAC,CAAA;QAElD,IAAI8I,MAAM,GAAG,IAAIvP,UAAU,CAACwO,UAAU,CAAChd,MAAM,CAAC,CAAA;IAC9C,IAAA,KAAK,IAAIge,EAAE,GAAG,CAAC,EAAEA,EAAE,GAAGhB,UAAU,CAAChd,MAAM,EAAEge,EAAE,EAAE,EAAE;IAC3CD,MAAAA,MAAM,CAACC,EAAE,CAAC,GAAGhB,UAAU,CAACgB,EAAE,CAAC,CAAA;IAC/B,KAAA;IAEA,IAAA,OAAOD,MAAM,CAAA;IACjB,GAAA;MAGAE,UAAU,CAAChJ,UAAU,EAAE;IACnB;;IAEA,IAAA,OAAOA,UAAU,CAAA;IACrB,GAAA;MAEA6H,YAAY,CAAC7H,UAAU,EAAE;IACrB,IAAA,IAAI,IAAI,CAACgD,aAAa,KAAK,IAAI,EAAE;IAC7B,MAAA,IAAI,CAACA,aAAa,GAAGhK,GAAG,EAAE,CAAA;IAC9B,KAAA;QACA,MAAMyP,SAAS,GAAGzP,GAAG,EAAE,CAAA;IACvB,IAAA,MAAMiQ,IAAI,GAAGR,SAAS,GAAG,IAAI,CAACzF,aAAa,CAAA;IAC3C,IAAA,MAAMkG,WAAW,GAAG,IAAI,CAACpB,cAAc,CAAC9H,UAAU,CAAC,CAAA;QACnD,IAAI,CAACtT,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAG,CAA6BqH,2BAAAA,EAAAA,IAAK,CAAqBC,mBAAAA,EAAAA,WAAW,CAACC,UAAW,CAAA,eAAA,EAAiBD,WAAW,CAACne,MAAO,wBAAuBiV,UAAU,CAACjV,MAAO,CAAA,CAAC,CAAC,CAAA;QAEjL,IAAI+Q,MAAM,CAAC,IAAI,CAAC4E,IAAI,CAACrI,aAAa,CAAC,EAAE;UACjC,IAAI,IAAI,CAACqI,IAAI,CAAC9I,UAAU,KAAKb,gBAAgB,CAACE,GAAG,EAAE;IAC/C,QAAA,IAAI,CAAC4M,cAAc,CAACqF,WAAW,CAAC,CAAA;IACpC,OAAA;IACJ,KAAA;IAGA,IAAA,IAAIA,WAAW,EAAE;UACb,IAAI,IAAI,CAAC3E,gBAAgB,EAAE;YACvB,IAAI,CAAC9B,MAAM,CAAC2G,IAAI,CAACF,WAAW,CAAClb,MAAM,CAAC,CAAA;IACxC,OAAC,MAAM;IACH,QAAA,IAAI,CAACtD,IAAI,CAAC+I,YAAY,CAAC2B,0BAA0B,CAAC,CAAA;IACtD,OAAA;IACJ,KAAA;QACA,IAAI,CAAC4N,aAAa,GAAGyF,SAAS,CAAA;IAClC,GAAA;IAEAzD,EAAAA,OAAO,GAAG;QACN,IAAI,CAACqE,aAAa,EAAE,CAAA;IACpB;IACA;IACJ,GAAA;;IAEAA,EAAAA,aAAa,GAAG;QACZ,IAAI,CAAC3c,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,cAAc,CAAC,CAAA;IAClC;IACA,IAAA,IAAIvH,MAAM,CAACD,SAAS,CAACE,YAAY,KAAKgP,SAAS,EAAE;IAC7CjP,MAAAA,MAAM,CAACD,SAAS,CAACE,YAAY,GAAG,EAAE,CAAA;IACtC,KAAA;;IAEA;IACA;QACA,IAAID,MAAM,CAACD,SAAS,CAACE,YAAY,CAACC,YAAY,KAAK+O,SAAS,EAAE;UAC1D,IAAI,CAAC5c,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,2EAA2E,CAAC,CAAA;UAC/FvH,MAAM,CAACD,SAAS,CAACE,YAAY,CAACC,YAAY,GAAG,UAAUgP,WAAW,EAAE;IAChE;IACA,QAAA,IAAIhP,YAAY,GAAGH,SAAS,CAACG,YAAY,IAAIH,SAAS,CAACI,kBAAkB,IAAIJ,SAAS,CAACK,eAAe,IAAIL,SAAS,CAACM,cAAc,CAAA;;IAElI;IACA;IACA;IACA;YACA,IAAI,CAACH,YAAY,EAAE;cACf,OAAOoK,OAAO,CAACE,MAAM,CAAC,IAAItI,KAAK,CAAC,iDAAiD,CAAC,CAAC,CAAA;IACvF,SAAA;;IAEA;IACA,QAAA,OAAO,IAAIoI,OAAO,CAAC,UAAUC,OAAO,EAAEC,MAAM,EAAE;cAC1CtK,YAAY,CAAC8F,IAAI,CAACjG,SAAS,EAAEmP,WAAW,EAAE3E,OAAO,EAAEC,MAAM,CAAC,CAAA;IAC9D,SAAC,CAAC,CAAA;WACL,CAAA;IACL,KAAA;IAEA,IAAA,IAAI,IAAI,CAACnE,IAAI,CAAClI,wBAAwB,EAAE;UACpC,IAAI,CAACgR,8BAA8B,EAAE,CAAA;IACzC,KAAA;IACA;IACA;IACA;IACAnP,IAAAA,MAAM,CAACD,SAAS,CAACE,YAAY,CAACC,YAAY,CAAC;IACvCkP,MAAAA,KAAK,EAAE,IAAI,CAAC/I,IAAI,CAAChI,gBAAgB;IACjCgR,MAAAA,KAAK,EAAE,KAAA;IACX,KAAC,CAAC,CAAC1C,IAAI,CAAE2C,MAAM,IAAK;UAChB,IAAI,CAACjd,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,sBAAsB,CAAC,CAAA;UAC1C,IAAI,CAACQ,eAAe,GAAGuH,MAAM,CAAA;UAC7B,IAAI,CAAChH,iBAAiB,GAAG,IAAI,CAACZ,YAAY,CAAC6H,uBAAuB,CAACD,MAAM,CAAC,CAAA;UAC1E,IAAI,CAAChH,iBAAiB,CAACwE,OAAO,CAAC,IAAI,CAAChF,YAAY,CAAC,CAAA;UACjD,IAAI,IAAI,CAACF,QAAQ,EAAE;YACf,IAAI,CAACE,YAAY,CAACgF,OAAO,CAAC,IAAI,CAAClF,QAAQ,CAAC,CAAA;YACxC,IAAI,CAACA,QAAQ,CAACkF,OAAO,CAAC,IAAI,CAACnF,QAAQ,CAAC,CAAA;IACxC,OAAC,MAAM,IAAI,IAAI,CAACE,eAAe,EAAE;YAC7B,IAAI,CAACC,YAAY,CAACgF,OAAO,CAAC,IAAI,CAACjF,eAAe,CAAC,CAAA;YAC/C,IAAI,CAACA,eAAe,CAACiF,OAAO,CAAC,IAAI,CAACnF,QAAQ,CAAC,CAAA;IAC/C,OAAA;UAEA,IAAI,CAACA,QAAQ,CAACmF,OAAO,CAAC,IAAI,CAACpF,YAAY,CAAC8H,WAAW,CAAC,CAAA;IACpD,MAAA,IAAI,CAACnf,IAAI,CAACkB,MAAM,CAACwF,uBAAuB,CAAC,CAAA;;IAEzC;IACA,MAAA,IAAIuY,MAAM,CAACG,UAAU,KAAK,IAAI,EAAE;IAC5BH,QAAAA,MAAM,CAACG,UAAU,GAAI7f,CAAC,IAAK;IACvB,UAAA,IAAI,CAAC8f,qBAAqB,CAAC9f,CAAC,CAAC,CAAA;aAChC,CAAA;IACL,OAAA;IACJ,KAAC,CAAC,CAAC+f,KAAK,CAAE/f,CAAC,IAAK;IACZ,MAAA,IAAI,CAAC0C,KAAK,CAAC,IAAI,CAACiV,GAAG,EAAE,oBAAoB,EAAE3X,CAAC,CAACiR,QAAQ,EAAE,CAAC,CAAA;UACxD,IAAI,CAACxQ,IAAI,CAACkB,MAAM,CAACyF,oBAAoB,EAAEpH,CAAC,CAACiR,QAAQ,EAAE,CAAC,CAAA;IACxD,KAAC,CAAC,CAAC+O,OAAO,CAAC,MAAM;UACb,IAAI,CAACvd,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,sBAAsB,CAAC,CAAA;UAC1C,IAAI,CAACgC,6BAA6B,EAAE,CAAA;IACxC,KAAC,CAAC,CAAA;IACN,GAAA;IAGAsG,EAAAA,cAAc,GAAG;QACb,IAAI,CAACxd,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,cAAc,CAAC,CAAA;QAClCxH,SAAS,CAACE,YAAY,GAClBF,SAAS,CAACE,YAAY,CAACC,YAAY,CAC/B;IAACkP,MAAAA,KAAK,EAAE,IAAA;IAAI,KAAC,CAAC,CAACzC,IAAI,CAClB2C,MAAM,IAAK;UACR,IAAI,CAACjd,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,uBAAuB,CAAC,CAAA;IAC/C,KAAC,CACJ,GACDxH,SAAS,CAACG,YAAY,CAClB;IAACkP,MAAAA,KAAK,EAAE,IAAA;SAAK,EACb,IAAI,CAAC/c,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,uBAAuB,CAAC,EAC3C,IAAI,CAAClV,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,oBAAoB,CAAC,CAC3C,CAAA;IACT,GAAA;IAEA,EAAA,MAAMuI,cAAc,GAAG;QACnB,IAAI,CAACzd,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,eAAe,CAAC,CAAA;QACnC,IAAI;UACA,MAAM+H,MAAM,GAAG,MAAMvP,SAAS,CAACE,YAAY,CAACC,YAAY,CAAC;IACrDkP,QAAAA,KAAK,EAAE;IACH9Q,UAAAA,OAAO,EAAE,IAAI;IACbC,UAAAA,gBAAgB,EAAE,IAAI;IACtBC,UAAAA,eAAe,EAAE,IAAI;IACrBC,UAAAA,gBAAgB,EAAE,IAAI;IACtBd,UAAAA,UAAU,EAAE,KAAK;IACjBe,UAAAA,YAAY,EAAE,CAAA;aACjB;IACD2Q,QAAAA,KAAK,EAAE,KAAA;IACX,OAAC,CAAC,CAAA;IACF7I,MAAAA,OAAO,CAACnU,GAAG,CAAC,4BAA4B,EAAEid,MAAM,CAAC,CAAA;UACjD,IAAI,CAACjd,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,uBAAuB,CAAC,CAAA;SAC9C,CAAC,OAAO3X,CAAC,EAAE;UACR,IAAI,CAACyC,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,oBAAoB,CAAC,CAAA;IAC5C,KAAA;IACJ,GAAA;MAEAmI,qBAAqB,CAAC9f,CAAC,EAAE;QACrB,IAAI,IAAI,CAACmY,eAAe,EAAE;UACtB,IAAI,CAAC1W,IAAI,CAAC,IAAI,CAACkW,GAAG,EAAE,mBAAmB,EAAE3X,CAAC,CAAC,CAAA;IAC3C,MAAA,IAAI,CAACS,IAAI,CAACkB,MAAM,CAAC+F,kBAAkB,CAAC,CAAA;IACxC,KAAA;IACJ,GAAA;IAEA6X,EAAAA,8BAA8B,GAAG;QAC7B,IAAI,CAAC5F,6BAA6B,EAAE,CAAA;IACpC,IAAA,IAAI,CAACpL,wBAAwB,GAAG8O,UAAU,CAAC,MAAM;UAC7C,IAAI,CAAC5a,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,4BAA4B,CAAC,CAAA;IAChD,MAAA,IAAI,CAAClX,IAAI,CAACkB,MAAM,CAAC0F,uBAAuB,CAAC,CAAA;IAC7C,KAAC,EAAE,IAAI,CAACoP,IAAI,CAACjI,mBAAmB,CAAC,CAAA;IACrC,GAAA;IAEAmL,EAAAA,6BAA6B,GAAG;QAC5B,IAAI,IAAI,CAACpL,wBAAwB,EAAE;UAC/B,IAAI,CAAC9L,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,+BAA+B,CAAC,CAAA;IACnDwB,MAAAA,YAAY,CAAC,IAAI,CAAC5K,wBAAwB,CAAC,CAAA;UAC3C,IAAI,CAACA,wBAAwB,GAAG,IAAI,CAAA;IACxC,KAAA;IACJ,GAAA;IAEA4R,EAAAA,mBAAmB,GAAG;IAClB;IACA,IAAA,IAAI,CAACxH,aAAa,GAAGyH,WAAW,CAAC,MAAM;UACnC,IAAI,CAAC3d,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,gBAAgB,CAAC,CAAA;IACpC,MAAA,IAAI/W,IAAI,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAA;IAC3DA,MAAAA,IAAI,GAAG,IAAI0O,UAAU,CAAC1O,IAAI,CAAC,CAAA;UAC3B,IAAI,CAAC4X,MAAM,CAAC2G,IAAI,CAACve,IAAI,CAACmD,MAAM,CAAC,CAAA;IACjC,KAAC,EAAE,EAAE,GAAG,IAAI,CAAC,CAAA;IACjB,GAAA;IAEA2V,EAAAA,kBAAkB,GAAG;QACjB,IAAI,IAAI,CAACf,aAAa,EAAE;UACpB,IAAI,CAAClW,GAAG,CAAC,IAAI,CAACkV,GAAG,EAAE,qBAAqB,CAAC,CAAA;IACzC0I,MAAAA,aAAa,CAAC,IAAI,CAAC1H,aAAa,CAAC,CAAA;UACjC,IAAI,CAACA,aAAa,GAAG,IAAI,CAAA;IAC7B,KAAA;IACJ,GAAA;MAGA2H,SAAS,CAAC1H,KAAK,EAAE;IACb,IAAA,OAAO,IAAI8B,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;UACpC,IAAI,CAAC3K,qBAAqB,EAAE,EAAE;YAC1B,OAAO2K,MAAM,CAAC,0BAA0B,CAAC,CAAA;IAC7C,OAAA;UACA,IAAI,CAAChC,KAAK,GAAGA,KAAK,CAAA;IAElB,MAAA,IAAI,IAAI,CAACnC,IAAI,CAACtI,cAAc,EAAE;YAC1B,IAAI,CAAC4M,OAAO,EAAE,CAAA;IAClB,OAAC,MAAM;IACH,QAAA,IAAI,CAAC,IAAI,CAACnC,KAAK,EAAE;cACb,OAAOgC,MAAM,CAAC,eAAe,CAAC,CAAA;IAClC,SAAA;IAEA,QAAA,IAAI,CAACH,gBAAgB,EAAE,CAACsF,KAAK,CAAE/f,CAAC,IAAK;cACjC4a,MAAM,CAAC5a,CAAC,CAAC,CAAA;IACb,SAAC,CAAC,CAAA;IACN,OAAA;IACA;IACA,MAAA,IAAI,CAACE,IAAI,CAACyB,MAAM,CAACyF,oBAAoB,EAAE,MAAM;YACzCwT,MAAM,CAAC,mBAAmB,CAAC,CAAA;IAC/B,OAAC,CAAC,CAAA;IACF;IACA,MAAA,IAAI,CAAC1a,IAAI,CAACyB,MAAM,CAACwF,uBAAuB,EAAE,MAAM;IAC5CwT,QAAAA,OAAO,EAAE,CAAA;IACb,OAAC,CAAC,CAAA;IACN,KAAC,CAAC,CAAA;IAEN,GAAA;MAEA4F,SAAS,CAACC,MAAM,EAAE;QACdA,MAAM,GAAGC,UAAU,CAACD,MAAM,CAAC,CAACE,OAAO,CAAC,CAAC,CAAC,CAAA;IACtC,IAAA,IAAIC,KAAK,CAACH,MAAM,CAAC,EAAE;IACf,MAAA,OAAA;IACJ,KAAA;QACAA,MAAM,GAAG/Q,KAAK,CAAC+Q,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;IAC5B,IAAA,IAAI,CAACzI,QAAQ,CAACuD,IAAI,CAACxJ,KAAK,GAAG0O,MAAM,CAAA;IACrC,GAAA;IAEAI,EAAAA,SAAS,GAAG;QACR,OAAO,IAAI,CAACnK,IAAI,CAAA;IACpB,GAAA;IAEA,EAAA,IAAI+J,MAAM,GAAG;QACT,OAAO,IAAI,CAACzI,QAAQ,GAAG0I,UAAU,CAAC,IAAI,CAAC1I,QAAQ,CAACuD,IAAI,CAACxJ,KAAK,GAAG,GAAG,CAAC,CAAC4O,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,CAAA;IACvF,GAAA;IACJ;;ICjsBA,MAAMG,gBAAgB,SAASlhB,OAAO,CAAC;IAEnCqS,EAAAA,WAAW,GAAe;QAAA,IAAdC,OAAO,GAAG,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAA,EAAE,CAAA;IACpB,IAAA,KAAK,EAAE,CAAA;QACP,IAAI,CAAC6O,IAAI,GAAG,IAAI,CAAA;IAChB;QACA,IAAI,CAACrK,IAAI,GAAGxE,OAAO,CAAA;QACnB,IAAI,CAAC8O,OAAO,GAAG,WAAW,CAAA;IAE1B,IAAA,IAAI,CAACvf,KAAK,GAAG,IAAI+U,KAAK,CAAC,IAAI,CAAC,CAAA;IAC5B,IAAA,IAAI,CAAC/U,KAAK,CAACiB,GAAG,CAAC,IAAI,CAACse,OAAO,EAAE,MAAM,EAAEtP,IAAI,CAACC,SAAS,CAACO,OAAO,CAAC,CAAC,CAAA;IACjE,GAAA;IAEA3N,EAAAA,OAAO,GAAG;QACN,IAAI,CAAC9C,KAAK,CAACiB,GAAG,CAAC,IAAI,CAACse,OAAO,EAAE,WAAW,CAAC,CAAA;QACzC,IAAI,CAAC1gB,GAAG,EAAE,CAAA;QACV,IAAI,IAAI,CAACygB,IAAI,EAAE;IACX,MAAA,IAAI,CAACA,IAAI,CAACxc,OAAO,EAAE,CAAA;UACnB,IAAI,CAACwc,IAAI,GAAG,IAAI,CAAA;IACpB,KAAA;QACA,IAAI,CAACtf,KAAK,CAACiB,GAAG,CAAC,IAAI,CAACse,OAAO,EAAE,SAAS,CAAC,CAAA;IAC3C,GAAA;IAGA7H,EAAAA,SAAS,GAAe;QAAA,IAAdjH,OAAO,GAAG,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAA,EAAE,CAAA;QAClB,IAAI,IAAI,CAAC6O,IAAI,EAAE;UACX,IAAI,CAACtf,KAAK,CAACiB,GAAG,CAAC,IAAI,CAACse,OAAO,EAAE,6CAA6C,CAAC,CAAA;IAC3E,MAAA,IAAI,CAACD,IAAI,CAACxc,OAAO,EAAE,CAAA;UACnB,IAAI,CAACwc,IAAI,GAAG,IAAI,CAAA;IACpB,KAAA;IAEA,IAAA,MAAME,GAAG,GAAGhgB,MAAM,CAAC6W,MAAM,CAAC,EAAE,EAAEtG,KAAK,CAAC,IAAI,CAACkF,IAAI,CAAC,EAAExE,OAAO,CAAC,CAAA;QACxD,IAAI,CAAC6O,IAAI,GAAG,IAAIrJ,IAAI,CAAC,IAAI,EAAEuJ,GAAG,CAAC,CAAA;IAC/B,IAAA,IAAI,CAACxf,KAAK,CAACiB,GAAG,CAAC,IAAI,CAACse,OAAO,EAAE,WAAW,EAAE,IAAI,CAACD,IAAI,CAACF,SAAS,EAAE,CAAC,CAAA;QAChE,IAAI,CAACK,eAAe,EAAE,CAAA;IAC1B,GAAA;IAEAA,EAAAA,eAAe,GAAG;IACd;QACAjgB,MAAM,CAACC,IAAI,CAACqI,WAAW,CAAC,CAACpI,OAAO,CAAEC,GAAG,IAAK;UACtC,IAAI,CAAC2f,IAAI,CAAClhB,EAAE,CAAC0J,WAAW,CAACnI,GAAG,CAAC,EAAG2Q,KAAK,IAAK;IACtC,QAAA,IAAI,CAACrR,IAAI,CAACU,GAAG,EAAE2Q,KAAK,CAAC,CAAA;IACzB,OAAC,CAAC,CAAA;IACN,KAAC,CAAC,CAAA;IACN,GAAA;;IAEA;IACJ;IACA;IACA;IACA;IACA;MACIwO,SAAS,CAAC1H,KAAK,EAAgB;QAAA,IAAd3G,OAAO,GAAG,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAA,EAAE,CAAA;IACzB,IAAA,OAAO,IAAIyI,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACpC,MAAA,IAAI,CAACpZ,KAAK,CAACiB,GAAG,CAAC,IAAI,CAACse,OAAO,EAAE,WAAW,EAAEnI,KAAK,EAAEnH,IAAI,CAACC,SAAS,CAACO,OAAO,CAAC,CAAC,CAAA;IACzE,MAAA,IAAI,CAACiH,SAAS,CAACjH,OAAO,CAAC,CAAA;UAEvB,IAAI,CAAC6O,IAAI,CAACR,SAAS,CAAC1H,KAAK,CAAC,CAACmE,IAAI,CAAC,MAAM;IAClCpC,QAAAA,OAAO,EAAE,CAAA;YAET,IAAI,CAACmG,IAAI,CAAC5gB,IAAI,CAACyB,MAAM,CAAC6F,eAAe,EAAE,MAAM;cACzC,IAAI,CAAChG,KAAK,CAACC,IAAI,CAAC,IAAI,CAACsf,OAAO,EAAE,6BAA6B,CAAC,CAAA;IAC5D,UAAA,IAAI,CAACG,QAAQ,EAAE,CAACnB,KAAK,CAAE/f,CAAC,IAAK;IACzB,YAAA,IAAI,CAACwB,KAAK,CAACC,IAAI,CAAC,IAAI,CAACsf,OAAO,EAAE,0BAA0B,EAAE/gB,CAAC,CAAC,CAAA;IAChE,WAAC,CAAC,CAACggB,OAAO,CAAC,MAAM;gBACb,IAAI,CAACvf,IAAI,CAACkB,MAAM,CAACqH,iBAAiB,EAAErH,MAAM,CAAC6F,eAAe,CAAC,CAAA;IAC/D,WAAC,CAAC,CAAA;IACN,SAAC,CAAC,CAAA;YACF,IAAI,CAACsZ,IAAI,CAAC5gB,IAAI,CAACyB,MAAM,CAAC8F,eAAe,EAAGzH,CAAC,IAAK;cAC1C,IAAI,CAACwB,KAAK,CAACkB,KAAK,CAAC,IAAI,CAACqe,OAAO,EAAE,6BAA6B,CAAC,CAAA;IAC7D,UAAA,IAAI,CAACG,QAAQ,EAAE,CAACnB,KAAK,CAAE/f,CAAC,IAAK;IACzB,YAAA,IAAI,CAACwB,KAAK,CAACC,IAAI,CAAC,IAAI,CAACsf,OAAO,EAAE,0BAA0B,EAAE/gB,CAAC,CAAC,CAAA;IAChE,WAAC,CAAC,CAACggB,OAAO,CAAC,MAAM;gBACb,IAAI,CAACvf,IAAI,CAACkB,MAAM,CAACqH,iBAAiB,EAAErH,MAAM,CAAC8F,eAAe,CAAC,CAAA;IAC/D,WAAC,CAAC,CAAA;IACN,SAAC,CAAC,CAAA;YAEF,IAAI,CAACqZ,IAAI,CAAC5gB,IAAI,CAACyB,MAAM,CAAC+F,kBAAkB,EAAE,MAAM;cAC5C,IAAI,CAAClG,KAAK,CAACC,IAAI,CAAC,IAAI,CAACsf,OAAO,EAAE,gCAAgC,CAAC,CAAA;IAC/D,UAAA,IAAI,CAACG,QAAQ,EAAE,CAACnB,KAAK,CAAE/f,CAAC,IAAK;IACzB,YAAA,IAAI,CAACwB,KAAK,CAACC,IAAI,CAAC,IAAI,CAACsf,OAAO,EAAE,6BAA6B,EAAE/gB,CAAC,CAAC,CAAA;IACnE,WAAC,CAAC,CAACggB,OAAO,CAAC,MAAM;gBACb,IAAI,CAACvf,IAAI,CAACkB,MAAM,CAACqH,iBAAiB,EAAErH,MAAM,CAAC+F,kBAAkB,CAAC,CAAA;IAClE,WAAC,CAAC,CAAA;IACN,SAAC,CAAC,CAAA;YAEF,IAAI,CAACoZ,IAAI,CAAC5gB,IAAI,CAACyB,MAAM,CAAC0F,uBAAuB,EAAE,MAAM;cACjD,IAAI,CAAC7F,KAAK,CAACC,IAAI,CAAC,IAAI,CAACsf,OAAO,EAAE,qCAAqC,CAAC,CAAA;IACpE,UAAA,IAAI,CAACG,QAAQ,EAAE,CAACnB,KAAK,CAAE/f,CAAC,IAAK;IACzB,YAAA,IAAI,CAACwB,KAAK,CAACC,IAAI,CAAC,IAAI,CAACsf,OAAO,EAAE,kCAAkC,EAAE/gB,CAAC,CAAC,CAAA;IACxE,WAAC,CAAC,CAACggB,OAAO,CAAC,MAAM;gBACb,IAAI,CAACvf,IAAI,CAACkB,MAAM,CAACqH,iBAAiB,EAAErH,MAAM,CAAC0F,uBAAuB,CAAC,CAAA;IACvE,WAAC,CAAC,CAAA;IACN,SAAC,CAAC,CAAA;IAEN,OAAC,CAAC,CAAC0Y,KAAK,CAAE/f,CAAC,IAAK;YACZ4a,MAAM,CAAC5a,CAAC,CAAC,CAAA;IACb,OAAC,CAAC,CAAA;IACN,KAAC,CAAC,CAAA;IACN,GAAA;;IAGA;IACJ;IACA;IACA;IACIkhB,EAAAA,QAAQ,GAAG;IACP,IAAA,OAAO,IAAIxG,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;UACpC,IAAI,CAACpZ,KAAK,CAACiB,GAAG,CAAC,IAAI,CAACse,OAAO,EAAE,YAAY,CAAC,CAAA;IAC1C,MAAA,IAAI,CAAC,IAAI,CAACD,IAAI,EAAE;YACZlG,MAAM,CAAC,kBAAkB,CAAC,CAAA;IAC9B,OAAA;IACA,MAAA,IAAI,CAACkG,IAAI,CAACxc,OAAO,EAAE,CAAA;UACnB,IAAI,CAACwc,IAAI,GAAG,IAAI,CAAA;IAChBnG,MAAAA,OAAO,EAAE,CAAA;IACb,KAAC,CAAC,CAAA;IACN,GAAA;;IAEA;IACJ;IACA;IACA;IACIwG,EAAAA,aAAa,GAAG;IACZ,IAAA,OAAO,IAAIzG,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACpC,MAAA,IAAI,CAAC,IAAI,CAACkG,IAAI,EAAE;YACZlG,MAAM,CAAC,kBAAkB,CAAC,CAAA;IAC9B,OAAA;IACA,MAAA,IAAI1K,MAAM,GAAG,IAAI,CAAC4Q,IAAI,CAACN,MAAM,CAAA;UAC7B7F,OAAO,CAACzK,MAAM,CAAC,CAAA;IACnB,KAAC,CAAC,CAAA;IACN,GAAA;;IAEA;IACJ;IACA;IACA;IACA;MACIkR,aAAa,CAACZ,MAAM,EAAE;IAClB,IAAA,OAAO,IAAI9F,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACpC,MAAA,IAAI,CAACpZ,KAAK,CAACiB,GAAG,CAAC,IAAI,CAACse,OAAO,EAAE,eAAe,EAAEP,MAAM,CAAC,CAAA;IACrD,MAAA,IAAI,CAAC,IAAI,CAACM,IAAI,EAAE;YACZlG,MAAM,CAAC,kBAAkB,CAAC,CAAA;IAC9B,OAAA;UACA,IAAI,CAACkG,IAAI,CAACP,SAAS,CAACC,MAAM,GAAG,GAAG,CAAC,CAAA;IACjC7F,MAAAA,OAAO,EAAE,CAAA;IACb,KAAC,CAAC,CAAA;IACN,GAAA;IAEA0G,EAAAA,mBAAmB,GAAG;IAClB,IAAA,OAAO,IAAI3G,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;UACpC,IAAI,IAAI,CAACkG,IAAI,EAAE;IACX,QAAA,IAAI,CAACA,IAAI,CAAChH,eAAe,EAAE,CAAA;IAC3Ba,QAAAA,OAAO,EAAE,CAAA;IACb,OAAC,MAAM;YACHC,MAAM,CAAC,kBAAkB,CAAC,CAAA;IAC9B,OAAA;IACJ,KAAC,CAAC,CAAA;IAEN,GAAA;IACJ,CAAA;IAEAiG,gBAAgB,CAAClf,MAAM,GAAG2H,WAAW,CAAA;IAErC8G,MAAM,CAACyQ,gBAAgB,GAAGA,gBAAgB,CAAA;IAC1CzQ,MAAM,CAACkR,SAAS,GAAGT,gBAAgB,CAAA;IACnCzQ,MAAM,CAACmR,gBAAgB,GAAGV,gBAAgB;;;;;;"}